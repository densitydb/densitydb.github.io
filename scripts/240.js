"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["240"],{82359:function(t,e,r){r.r(e),r.d(e,{getCachedPerQuestionStats:()=>w,getInfiniteQuizzes:()=>h,getPerQuestionStats:()=>_,parseTimeIdentifier:()=>p,reportToServer:()=>v});var n=r(4334),a=r(54194),s=r(72447);function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e,r,n,a,s,u){try{var i=t[s](u),o=i.value}catch(t){r(t);return}i.done?e(o):Promise.resolve(o).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var s=t.apply(e,r);function u(t){i(s,n,a,u,o,"next",t)}function o(t){i(s,n,a,u,o,"throw",t)}u(void 0)})}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r,n,a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var s=[],u=!0,i=!1;try{for(a=a.call(t);!(u=(r=a.next()).done)&&(s.push(r.value),!e||s.length!==e);u=!0);}catch(t){i=!0,n=t}finally{try{u||null==a.return||a.return()}finally{if(i)throw n}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=i(0),u.throw=i(1),u.return=i(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(i){return function(o){var c=[i,o];if(r)throw TypeError("Generator is already executing.");for(;u&&(u=0,c[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){s.label=c[1];break}if(6===c[0]&&s.label<a[1]){s.label=a[1],a=c;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(c);break}a[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(t){c=[6,t],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function f(){return o(function(){var t;return l(this,function(e){switch(e.label){case 0:return[4,n.G.POST("/juxtastat/register_user",{params:{header:s.QuizModel.shared.userHeaders()},body:{domain:null!=(t=localStorage.getItem("testHostname"))?t:window.location.hostname}})];case 1:return e.sent(),[2]}})})()}function d(t,e,r,a){return o(function(){var u,i,o;return l(this,function(c){switch(c.label){case 0:return[4,f()];case 1:return c.sent(),[4,n.G.GET(e,{params:{header:s.QuizModel.shared.userHeaders()}})];case 2:if(void 0===(u=c.sent().data))return[2];return i=u.latest_day,o=Object.keys(t).filter(function(t){return a(t)>i}).map(function(e){return[a(e),t[e].correct_pattern.map(function(t){return 1===t||!0===t})]}),[4,n.G.POST(r,{params:{header:s.QuizModel.shared.userHeaders()},body:{day_stats:o}})];case 3:return c.sent(),[2]}})})()}function h(t,e){var r=[],n=[],s=!0,u=!1,i=void 0;try{for(var o,c=Object.keys(t)[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var l=o.value,f=function(t){var e=/^I_([0-9a-zA-Z]+)_([0-9]+)$/.exec(t);if(null!==e)return[e[1],parseInt(e[2])]}(l);void 0!==f&&(0,a.infiniteQuizIsDone)(t[l].correct_pattern)===e&&a.validQuizInfiniteVersions.includes(f[1])&&(r.push(f),n.push(l))}}catch(t){u=!0,i=t}finally{try{s||null==c.return||c.return()}finally{if(u)throw i}}return[r,n]}function p(t,e){switch(t){case"juxtastat":return y(e);case"retrostat":return b(e)}}function y(t){return/^-?[0-9]+$/.test(t)?parseInt(t):-1e4}function b(t){return/^W-?[0-9]+$/.test(t)?parseInt(t.substring(1)):-1e4}function v(t,e){return o(function(){return l(this,function(r){switch(r.label){case 0:switch(e){case"juxtastat":return[3,1];case"retrostat":return[3,3];case"infinite":return[3,5]}return[3,7];case 1:return[4,d(t,"/juxtastat/latest_day","/juxtastat/store_user_stats",y)];case 2:case 4:case 6:return r.sent(),[2];case 3:return[4,d(t,"/retrostat/latest_week","/retrostat/store_user_stats",b)];case 5:return[4,o(function(){var e,r,a,u,i,d,p,y,b,v,m;return l(this,function(e){switch(e.label){case 0:return s.QuizModel.shared.uniquePersistentId.value,s.QuizModel.shared.uniqueSecureId.value,[4,o(function(){var e,r,a,u,i;return l(this,function(o){switch(o.label){case 0:return r=(e=c(h(t,!0),2))[0],a=e[1],[4,f()];case 1:return o.sent(),[4,n.G.POST("/juxtastat_infinite/has_infinite_stats",{params:{header:s.QuizModel.shared.userHeaders()},body:{seedVersions:r}})];case 2:if(void 0===(u=o.sent().data))return[2,void 0];return i=u.has,[2,[r.filter(function(t,e){return!i[e]}),a.filter(function(t,e){return!i[e]})]]}})})()];case 1:if(void 0===(a=e.sent()))return[2];i=(u=c(a,2))[0],d=u[1],p=0,e.label=2;case 2:if(!(p<i.length))return[3,5];return b=(y=c(i[p],2))[0],v=y[1],m=t[d[p]],[4,n.G.POST("/juxtastat_infinite/store_user_stats",{params:{header:s.QuizModel.shared.userHeaders()},body:{seed:b,version:v,corrects:m.correct_pattern.map(function(t){return 1===t||!0===t})}})];case 3:e.sent(),e.label=4;case 4:return p++,[3,2];case 5:return[2]}})})()];case 7:return[2]}})})()}var m=new Map;function w(t){return m.get(JSON.stringify(t))}function _(t){return o(function(){var e,r;return l(this,function(a){switch(a.label){case 0:if(null==(e=w(t)))return[3,1];return r=e,[3,3];case 1:var s;return[4,(s=t,o(function(){var t;return l(this,function(e){switch(e.label){case 0:switch(s.kind){case"juxtastat":return[3,1];case"retrostat":return[3,3]}return[3,5];case 1:return[4,n.G.GET("/juxtastat/get_per_question_stats",{params:{query:{day:s.name}}})];case 2:case 4:return t=e.sent(),[3,5];case 3:return[4,n.G.GET("/retrostat/get_per_question_stats",{params:{query:{week:parseInt(s.name.substring(1))}}})];case 5:if(void 0===t.data)throw Error("Failed to get per question stats");return[2,t.data]}})})())];case 2:r=a.sent(),a.label=3;case 3:return[2,r]}})})()}}}]);
//# sourceMappingURL=240.js.map