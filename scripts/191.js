"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["191"],{65344:function(e,t,n){n.d(t,{I:()=>i});var r=n(72668),o=n(89147),i=(0,r.createContext)(new o.Z(void 0))},41277:function(e,t,n){n.d(t,{Lq:()=>A,Qf:()=>x,VB:()=>j,as:()=>E,yM:()=>k});var r=n(78970),o=n(23509),i=n.n(o),a=n(72668),u=n(37014),l=n(69610),c=n(23529),s=n(24714),p=n(54509),f=n(5855),y=n(88452),d=n(77053),m=n(73001),v=n(30444),b=n(79455);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}var E="4px";function S(e,t){var n,r;return"function"===e.type&&(null==(r=t.get(e.name))||null==(n=r.documentation)?void 0:n.customConstructor)===!0}function x(e){var t=e.setSelection,n=e.typeEnvironment,r=k(e.uss),o=(0,a.useMemo)(function(){var t=new Set;return e.type.forEach(function(n){(0,b.$p)([n],e.typeEnvironment).forEach(function(e){return t.add(e)})}),Array.from(t)},[i()(e.type),e.typeEnvironment]),u=(0,a.useMemo)(function(){return o.some(function(t){return S(t,e.typeEnvironment)})&&!S(r,e.typeEnvironment)},[o,e.typeEnvironment,r]),l=(0,a.useCallback)(function(t){return function(e,t){if("custom"===t.type)return{text:"Custom Expression"};if("constant"===t.type)return{text:"Constant"};if("vector"===t.type)return{text:"Manual List"};if("object"===t.type)return{text:"Properties"};var n,r,o,i,u=null==(n=e.get(t.name))?void 0:n.documentation;if((null==u||null==(r=u.selectorRendering)?void 0:r.kind)==="subtitleLongDescription")return{text:u.humanReadableName,node:function(e){return a.createElement(I,{doc:u,highlighted:e})}};if((null==u||null==(o=u.selectorRendering)?void 0:o.kind)!=="gradientBackground")return{text:null!=(i=null==u?void 0:u.humanReadableName)?i:t.name};var l=u.selectorRendering.ramp;return{text:u.humanReadableName,node:function(e){return a.createElement(P,{name:u.humanReadableName,ramp:l,highlighted:e})}}}(e.typeEnvironment,t)},[e.typeEnvironment]),s=(0,a.useCallback)(function(){var e=o.find(function(e){return S(e,n)});e&&t(e)},[o,n,t]);if(!(o.length<2)){var f=e.type.some(function(e){return"number"===e.type}),d=e.type.some(function(e){return"string"===e.type}),m="constant"===r.type&&(f||d),g="constant"===e.uss.type?e.uss.value.node.value.toString():"",E=e.errors.filter(function(t){return"single"===t.location.start.block.type&&t.location.start.block.ident===e.blockIdent}),x=a.createElement(c.SA,{results:E,editor:!1}),j=e.type.some(function(e){return"opaque"===e.type&&"color"===e.name})?A(e.uss,e.typeEnvironment):void 0,U=a.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",gap:"0.5em"}},a.createElement(v.S,{value:r,possibleValues:o,renderValue:l,onChange:e.setSelection,onEdit:u?s:void 0}),m&&(f?a.createElement(O,h({currentValue:g},e)):a.createElement(w,h({currentValue:g},e))),void 0!==j&&a.createElement("input",{type:"color",value:(0,p.XF)(j.color,!0),style:{width:"200px",height:"30.5px"},onChange:function(t){var n,r=(0,p.uG)(t.target.value),o="hsv"===j.kind?(0,p.v1)(r,{forceAlpha:j.color.a}):(0,p.io)(r,{forceAlpha:j.color.a});switch(e.uss.type){case"customNode":n=(0,y.Fc)(o,e.blockIdent,e.type);break;case"identifier":case"call":n=(0,y.hc)(o,e.blockIdent)}void 0!==n&&(n=(0,b.S2)(n,e.blockIdent,e.type,e.typeEnvironment,function(){throw Error("Should not happen")},!0),e.setUss(n))}}));return a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5em"}},U,x)}}function w(e){var t=e.currentValue,n=e.blockIdent,r=e.setUss;return a.createElement("textarea",{value:t,onChange:function(e){r({type:"constant",value:{node:{type:"string",value:e.target.value},location:(0,f.PS)(n)}})},style:{width:"200px",fontSize:"14px",padding:"4px 8px",resize:"vertical"},placeholder:"Enter string"})}function O(e){var t=e.currentValue,n=e.blockIdent,r=e.setUss;return a.createElement("input",{type:"text",value:t,onChange:function(e){var t,o,i=e.target.value;r({type:"constant",value:{node:void 0!==(o=(0,f.p3)(i))?{type:"number",value:o}:{type:"string",value:i},location:(0,f.PS)(n)}})},style:{width:"200px",fontSize:"14px",padding:"4px 8px",resize:"none"},placeholder:"Enter number"})}function k(e){if("customNode"===e.type)return{type:"custom"};if("constant"===e.type)return{type:"constant"};if("identifier"===e.type)return{type:"variable",name:e.name.node};if("call"===e.type){var t=k(e.fn);return(0,d.h)("variable"===t.type,"Function must be a variable or another function"),{type:"function",name:t.name}}if("vectorLiteral"===e.type)return{type:"vector"};if("objectLiteral"===e.type)return{type:"object"};throw Error("Unsupported USS expression type: ".concat(e.type))}var j=m.n0(m.E0(m.Rf(m.RE({fn:m.G0([m.QU("rgb"),m.QU("hsv")]),unnamedArgs:[m.Rx(),m.Rx(),m.Rx()],namedArgs:{a:m.jt(m.Rx())}}))),function(e){var t,n,r;switch(e.fn){case"rgb":t=(0,s._l)(e.unnamedArgs[0],e.unnamedArgs[1],e.unnamedArgs[2],null!=(n=e.namedArgs.a)?n:1,!0);break;case"hsv":t=(0,s.De)(e.unnamedArgs[0],e.unnamedArgs[1],e.unnamedArgs[2],null!=(r=e.namedArgs.a)?r:1,!0)}if(void 0!==t)return{color:t,kind:e.fn}});function A(e,t){try{return j.parse(e,t)}catch(e){return}}function I(e){var t=(0,l.cI)();return a.createElement("div",{style:{padding:"8px 12px",background:e.highlighted?t.slightlyDifferentBackgroundFocused:t.slightlyDifferentBackground}},a.createElement("div",null,e.doc.humanReadableName),a.createElement("div",{style:{fontSize:"smaller",color:t.ordinalTextColor}},e.doc.longDescription))}function P(e){var t=(0,l.cI)(),n=(0,r.Z)(e.ramp[0][1]),o="rgb(from ".concat(t.slightlyDifferentBackgroundFocused," r g b / 1)");return a.createElement("div",{style:{padding:"8px 12px",color:u.J[n.isLight()?"Light Mode":"Dark Mode"].textMain,background:e.highlighted?"".concat(L(o,"bottom"),", ").concat(L(o,"right"),", ").concat(U(e.ramp)):U(e.ramp)}},e.name)}function U(e){return"linear-gradient(to right, ".concat(e.map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return g(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],r=t[1];return"".concat(r," ").concat(Math.round(100*n),"%")}).join(", "),")")}function L(e,t){return"linear-gradient(to ".concat(t,", ").concat(e," ").concat("5px",", transparent ").concat("5px",", transparent calc(100% - ").concat("5px","), ").concat(e," calc(100% - ").concat("5px","))")}},7500:function(e,t,n){n.d(t,{xI:()=>Q,BE:()=>Z,Qc:()=>$,ag:()=>W,Ll:()=>K,Py:()=>z});var r=n(39343),o=n.n(r),i=n(72668),a=n(98234),u=n(23529),l=n(34672),c=n(5855),s=n(88452),p=n(23509),f=n.n(p),y=n(54509),d=n(27193),m=n(89080),v=n(79074),b=n(77053),g=n(36195),h=n(65344);function E(e){var t=e.uss,n=e.setUss,r=e.typeEnvironment,o=e.errors,a=e.blockIdent,l=e.placeholder,c=(0,i.useMemo)(function(){return o.filter(function(e){return"single"===e.location.start.block.type&&e.location.start.block.ident===a})},[o,a]),p=(0,i.useContext)(h.I),f=p.use();return i.createElement(u.ML,{uss:t.originalCode,setUss:function(e){n((0,s.Fc)(e,a,t.expectedType))},typeEnvironment:r,results:c,placeholder:l,selection:(null==f?void 0:f.blockIdent)===a?f.range:null,setSelection:function(e){var t;null!==e?p.value={blockIdent:a,range:e}:(null==(t=p.value)?void 0:t.blockIdent)===a&&(p.value=void 0)}})}var S=n(41277),x=n(79455),w=n(20110);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||P(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}}function U(e,t,n){if("number"===e.type)return{type:"constant",value:{node:{type:"number",value:0},location:(0,c.PS)(t)}};if("string"===e.type)return{type:"constant",value:{node:{type:"string",value:""},location:(0,c.PS)(t)}};var r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l,p=A(a.value,2),f=p[0],y=p[1];if(null==(l=y.documentation)?void 0:l.isDefault){if((0,m.wB)(y.type)===(0,m.wB)(e))return D({type:"variable",name:f},n,t);if("function"===y.type.type&&"inferFromPrimitive"!==y.type.returnType.type&&(0,m.wB)(y.type.returnType.value)===(0,m.wB)(e))return M({type:"function",name:f},n,t)}}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return"vector"===e.type?{type:"vectorLiteral",entireLoc:(0,c.PS)(t),elements:[]}:(0,s.Fc)("",t,[e])}function L(e){var t,n,r,o=e.argWDefault.type;(0,b.h)("concrete"===o.type,"Named argument ".concat(e.name," must be concrete"));var u=e.uss,l=u.args.find(function(t){return"named"===t.type&&t.name.node===e.name}),s=void 0!==e.argWDefault.defaultValue,p=void 0!==l,f=(0,d.EU)(e.blockIdent,e.name),y=e.typeEnvironment.get(u.fn.name.node),m=null!=(r=null==y||null==(n=y.documentation)||null==(t=n.namedArgs)?void 0:t[e.name])?r:e.name;return i.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.25em",width:"100%",margin:"0.25em 0"}},i.createElement("div",{style:{flex:1}},i.createElement("div",null,s?i.createElement(a.Ov,{name:m,checked:p,onChange:function(t){if(t){var n,r=e.argWDefault.defaultValue,i=void 0===r||"identifier"===r.type&&"null"===r.name.node?U(o.value,f,e.typeEnvironment):r;i=null!=(n=F(i,e.typeEnvironment,f,o.value))?n:(0,x.S2)(i,f,[o.value],e.typeEnvironment,function(){throw Error("Should not happen")},!0);var a={type:"named",name:{node:e.name,location:(0,c.PS)(f)},value:i},l=I(u.args).concat([a]);e.setUss(j(k({},u),{args:l}))}else{var s=u.args.filter(function(t){return"named"!==t.type||t.name.node!==e.name});e.setUss(j(k({},u),{args:s}))}}}):i.createElement("span",null,m)),p&&i.createElement(C,{uss:l.value,setUss:function(t){var n=u.args.map(function(n){return"named"===n.type&&n.name.node===e.name?j(k({},n),{value:t}):n});e.setUss(j(k({},u),{args:n}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:f,type:[o.value]})))}function C(e){var t,n,r,o,a,u,p=(0,l.x9)(e.uss).start;("single"!==p.block.type||p.block.ident!==e.blockIdent)&&(w.warn("USS: ",e.uss),w.warn("USS Location: ",p),w.warn("Editor blockIdent: ",e.blockIdent),w.error("[failtest] USS expression location does not match block identifier",e.uss,"single"===p.block.type?p.block.ident:"(multi)",e.blockIdent));var y=null!=(a=e.labelWidth)?a:"5%",m=A((n=(t=A(function(){if("constant"===e.uss.type)return[void 0,"does-not-consume-errors"];var t=e.uss;if("customNode"===t.type)return[i.createElement(E,{key:"custom",uss:t,setUss:e.setUss,typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:e.blockIdent}),"consumes-errors"];if("identifier"===t.type)return[void 0,"does-not-consume-errors"];if("call"===t.type){(0,b.h)("identifier"===t.fn.type,"Function must be an identifier");var n=e.typeEnvironment.get(t.fn.name.node);(0,b.h)(void 0!==n,"Function ".concat(t.fn.name.node," not found in type environment"));var r=n.type;(0,b.h)("function"===r.type,"Function ".concat(t.fn.name.node," must be a function type"));var o=[];return r.posArgs.forEach(function(n,r){(0,b.h)("concrete"===n.type,"Positional argument must be concrete"),o.push(i.createElement(C,{key:"pos-".concat(r),uss:t.args[r].value,setUss:function(n){var o=I(t.args);o[r]=j(k({},o[r]),{value:n}),e.setUss(j(k({},t),{args:o}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:(0,d.ZM)(e.blockIdent,r),type:[n.value]}))}),Object.entries(r.namedArgs).forEach(function(n){var r,a=A(n,2),u=a[0],l=a[1];(null==(r=l.documentation)?void 0:r.hide)!==!0&&o.push(i.createElement(L,{key:"named-".concat(u),name:u,argWDefault:l,uss:t,setUss:e.setUss,typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:e.blockIdent}))}),[i.createElement.apply(i,["div",{key:"subselectors"}].concat(I(o))),"does-not-consume-errors"]}if("vectorLiteral"===t.type){var a={type:"number"};return"vector"===e.type[0].type&&(a=e.type[0].elementType),[i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5em",width:"100%"}},t.elements.map(function(n,r){return i.createElement("div",{key:r,style:{display:"flex",alignItems:"center",gap:"0.5em",width:"100%"}},i.createElement(C,{uss:n,setUss:function(n){var o=I(t.elements);o[r]=n,e.setUss(j(k({},t),{elements:o}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:(0,d.AY)(e.blockIdent,r),type:[a],label:"".concat(r+1)}),i.createElement("button",{style:{flexShrink:0},onClick:function(){var n=t.elements.filter(function(e,t){return t!==r});e.setUss(j(k({},t),{elements:n}))},title:"Remove element"},"â€“"))}),i.createElement("button",{style:{alignSelf:"flex-start",marginTop:4},onClick:function(){var n=I(t.elements).concat([t.elements.length>0?t.elements[t.elements.length-1]:U(a,(0,d.AY)(e.blockIdent,t.elements.length),e.typeEnvironment)]);e.setUss(j(k({},t),{elements:n}))}},"+ Add element")),"does-not-consume-errors"]}if("objectLiteral"===t.type){var u=new v.G(function(){return{type:"number"}});return"object"===e.type[0].type&&(u=e.type[0].properties),[i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5em",width:"100%"}},Array.from(u.keys()).sort().map(function(n){var r,o,a=u.get(n);return i.createElement(C,{key:n,uss:null!=(o=null==(r=t.properties.find(function(e){return A(e,1)[0]===n}))?void 0:r[1])?o:U(a,(0,d.zt)(e.blockIdent,n),e.typeEnvironment),setUss:function(r){e.setUss(j(k({},t),{properties:t.properties.map(function(e){var t=A(e,2),o=t[0],i=t[1];return[o,o===n?r:i]})}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:(0,d.zt)(e.blockIdent,n),type:[a],label:n})})),"does-not-consume-errors"]}throw Error("Unsupported USS expression type: ".concat(e.uss.type))}(),2))[0],r=t[1],void 0===n?[void 0,r]:[i.createElement("div",{style:{width:"100%",flex:1}},i.createElement("div",{style:{display:"flex",gap:"1em",marginLeft:y}},e.label&&i.createElement("span",{style:{minWidth:"fit-content"}}),i.createElement("div",{style:{flex:1}},n))),r]),2),h=m[0],O=m[1],P=void 0===e.label?void 0:i.createElement("div",{style:{padding:"".concat(S.as," 0px"),display:"flex",justifyContent:"flex-end"}},i.createElement("span",{style:{minWidth:"fit-content",marginRight:"5px"}},e.label)),R=(0,x.$p)(e.type,e.typeEnvironment).length<2?void 0:i.createElement("div",{style:{width:"calc(100% - ".concat(y,")")}},i.createElement(S.Qf,{uss:e.uss,setSelection:function(t){e.setUss(function(e,t,n,r,o){var i=F(t,n,r,o,e);if(void 0!==i)return i;var a=(0,x.KO)(t,r,o,n);if(void 0!==a&&f()((0,S.yM)(a))===f()(e))return a;switch(e.type){case"custom":return(0,s.Fc)((0,s.Z2)(t),r,[o]);case"constant":return U(o,r,n);case"variable":return D(e,n,r);case"function":return M(e,n,r,t);case"vector":return{type:"vectorLiteral",entireLoc:(0,c.PS)(r),elements:[]};case"object":return{type:"objectLiteral",entireLoc:(0,c.PS)(r),properties:[]}}}(t,e.uss,e.typeEnvironment,e.blockIdent,e.type[0]))},setUss:e.setUss,typeEnvironment:e.typeEnvironment,type:e.type,blockIdent:e.blockIdent,errors:"consumes-errors"===O?[]:e.errors})),N=(0,g.wd)()||(null!=(u=null==(o=e.label)?void 0:o.length)?u:0)>5;return i.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",flex:1,margin:"0.25em 0",gap:"0.25em"},id:"auto-ux-editor-".concat(e.blockIdent)},void 0!==P||void 0!==R?i.createElement("div",{style:{width:"100%",flex:1}},N?i.createElement(i.Fragment,null,i.createElement("div",{style:{display:"flex",alignItems:"top"}},P),i.createElement("div",{style:{display:"flex",alignItems:"top"}},i.createElement("div",{style:{width:y}}),R)):i.createElement("div",{style:{display:"flex",alignItems:"top"}},i.createElement("div",{style:{width:y}},P),R)):void 0,h)}function D(e,t,n){var r,o=null==(r=t.get(e.name))?void 0:r.type;return(0,b.h)(void 0!==o,"Variable ".concat(e.name," not found in type environment")),{type:"identifier",name:{node:e.name,location:(0,c.PS)(n)}}}function M(e,t,n,r){var o=t.get(e.name);(0,b.h)(void 0!==o&&"function"===o.type.type,"Function ".concat(e.name," not found or not a function"));for(var i=r?function(e,t){var n;if("call"===e.type&&"identifier"===e.fn.type&&(n=t.get(e.fn.name.node))&&"function"===n.type.type){var r=n.type;return function(t,n){var o,i;return"number"==typeof t&&t<r.posArgs.length&&"concrete"===r.posArgs[t].type&&(0,m.wB)(n)===(0,m.wB)(r.posArgs[t].value)?null==(o=e.args.filter(function(e){return"unnamed"===e.type})[t])?void 0:o.value:"string"==typeof t&&t in r.namedArgs&&"concrete"===r.namedArgs[t].type.type&&(0,m.wB)(n)===(0,m.wB)(r.namedArgs[t].type.value)?null==(i=e.args.find(function(e){return"named"===e.type&&e.name.node===t}))?void 0:i.value:void 0}}return function(){}}(r,t):void 0,a=[],u=0;u<o.type.posArgs.length;u++){var l,s=o.type.posArgs[u];(0,b.h)("concrete"===s.type,"Positional argument must be concrete"),a.push({type:"unnamed",value:null!=(l=null==i?void 0:i(u,s.value))?l:U(s.value,(0,d.ZM)(n,u),t)})}var p=!0,f=!1,y=void 0;try{for(var v,g=Object.entries(o.type.namedArgs)[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var h=A(v.value,2),E=h[0],S=h[1],x=S.type;(0,b.h)("concrete"===x.type,"Named argument ".concat(E," must be concrete"));var w=null==i?void 0:i(E,x.value);(w||void 0===S.defaultValue)&&a.push({type:"named",name:{node:E,location:(0,c.PS)(n)},value:null!=w?w:U(x.value,(0,d.EU)(n,E),t)})}}catch(e){f=!0,y=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw y}}return{type:"call",fn:{type:"identifier",name:{node:e.name,location:(0,c.PS)(n)}},args:a,entireLoc:(0,c.PS)(n)}}function F(e,t,n,r,o){switch(e.type){case"identifier":var i=t.get(e.name.node);if(void 0===i||(null==(c=i.documentation)?void 0:c.equivalentExpressions)===void 0)return;var a=!0,u=!1,l=void 0;try{for(var c,p,d=i.documentation.equivalentExpressions[Symbol.iterator]();!(a=(p=d.next()).done);a=!0){var m=p.value,v=(0,x.KO)(m,n,r,t);if(void 0!==v&&(void 0===o||f()((0,S.yM)(v))===f()(o)))return v}}catch(e){u=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(u)throw l}}return;case"customNode":if("expression"===e.expr.type)return F(e.expr.value,t,n,r,o);return;case"call":if("opaque"===r.type&&"color"===r.name&&(null==o?void 0:o.type)==="function"){var b=(0,S.Lq)(e,t);switch(!0){case(null==b?void 0:b.kind)==="rgb"&&"hsv"===o.name:return(0,s.hc)((0,y.v1)(b.color),n);case(null==b?void 0:b.kind)==="hsv"&&"rgb"===o.name:return(0,s.hc)((0,y.io)(b.color),n)}}return;default:return}}function R(e){var t=e.condition,n=e.setCondition,r=e.typeEnvironment,o=e.errors,u=e.blockIdent,l="customNode"===t.type;return i.createElement("div",{style:{margin:"0.5em 0"}},i.createElement(a.Ov,{name:"Filter?",checked:l,onChange:function(e){if(e){var r=(0,s.Z2)(t)||"true";n((0,s.Fc)(r,u,[{type:"vector",elementType:{type:"boolean"}}]))}else n({type:"identifier",name:{node:"true",location:(0,c.PS)(u)}})}}),l&&i.createElement(E,{uss:t,setUss:n,typeEnvironment:r,errors:o,blockIdent:u}))}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e){var t,n=e.preamble,r=e.setPreamble,o=e.typeEnvironment,u=e.errors,l=e.blockIdent,c=(t=(0,i.useState)(""!==n.originalCode.trim()),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return N(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=c[0],f=c[1];return(0,i.useEffect)(function(){f(""!==n.originalCode.trim())},[n.originalCode]),i.createElement("div",{style:{margin:"0.5em 0"}},i.createElement(a.Ov,{name:"Preamble",checked:p,onChange:function(e){r((0,s.Fc)("",l)),f(e)}}),p&&i.createElement(E,{uss:n,setUss:r,typeEnvironment:o,errors:u,blockIdent:l,placeholder:"Variables here can be used by all custom expressions."}))}var B=n(99448),z=[{type:"opaque",name:"cMap",allowCustomExpression:!1},{type:"opaque",name:"cMapRGB",allowCustomExpression:!1},{type:"opaque",name:"pMap",allowCustomExpression:!1}],Z="r",V="".concat(Z,"p"),q="".concat(Z,"c"),$="".concat(Z,"o");function W(e){var t=e.uss,n=e.setUss,r=e.typeEnvironment,c=e.errors;return i.createElement("div",null,i.createElement("div",{style:{margin:"0.5em 0px"}}),i.createElement(a.Ov,{name:"Enable custom script",checked:"customNode"===t.type,onChange:function(e){e?(o()("statements"===t.type,"USS should be statements when enabling custom script"),n((0,s.Fc)((0,s.Z2)(t,{simplify:!0}),Z))):(o()("customNode"===t.type,"USS should not be a custom node when disabled"),n(Q(t.expr,r,!1)))}}),"customNode"===t.type?i.createElement(E,{uss:t,setUss:n,typeEnvironment:r,errors:c,blockIdent:Z}):i.createElement("div",null,i.createElement(T,{preamble:t.result[0].value,setPreamble:function(e){n((0,B.makeStatements)([{type:"expression",value:e},t.result[1]]))},typeEnvironment:r,errors:c,blockIdent:V}),i.createElement(R,{condition:t.result[1].condition,setCondition:function(e){var r={type:"condition",entireLoc:(0,l.x9)(e),condition:e,rest:t.result[1].rest};n((0,B.makeStatements)([t.result[0],r]))},typeEnvironment:r,errors:c,blockIdent:q}),i.createElement(C,{uss:t.result[1].rest[0].value,setUss:function(e){var r={type:"condition",entireLoc:t.result[1].entireLoc,condition:t.result[1].condition,rest:[{type:"expression",value:e}]};n((0,B.makeStatements)([t.result[0],r]))},typeEnvironment:r,errors:c,blockIdent:$,type:z,labelWidth:"0px"})),i.createElement(u.SA,{editor:!1,results:c.filter(function(e){return"multi"===e.location.start.block.type})}))}function Q(e,t,n){if("customNode"===e.type)return e;var r="statements"===e.type?e.result:[e],o={type:"statements",result:r.slice(0,-1),entireLoc:(0,l.x9)(e)},i=function(e){var t=void 0!==e?[e]:[];if((null==e?void 0:e.type)==="condition"){var n=(0,s.Z2)(e.condition,{simplify:!0});if("true"!==n.trim())return{conditionExpr:(0,s.Fc)(n,q,[{type:"vector",elementType:{type:"boolean"}}]),conditionRest:e.rest};t=e.rest}return{conditionExpr:{type:"identifier",name:{node:"true",location:(0,c.PS)(q)}},conditionRest:t}}(r.length>0?r[r.length-1]:void 0),a=i.conditionRest,u=i.conditionExpr,p=(0,x.S2)((0,B.makeStatements)(a,$),$,z,t,s.Fc,n),f={type:"condition",entireLoc:(0,l.x9)(u),condition:u,rest:[{type:"expression",value:p}]};return{type:"statements",result:[{type:"expression",value:(0,s.Fc)((0,s.Z2)(o,{simplify:!0}),V)},f],entireLoc:(0,l.x9)(e)}}function K(){return(0,s.Fc)("cMap(data=density_pw_1km, scale=linearScale(), ramp=rampUridis)",Z,z).expr}},79455:function(e,t,n){n.d(t,{$p:()=>d,KO:()=>p,S2:()=>f});var r=n(5855),o=n(27193),i=n(88452),a=n(89080);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}function p(e,t,n,r){try{return f(e,t,[n],r,function(){throw Error("parsing failed")},!1)}catch(e){}}function f(e,t,n,a,u,s){var p=function e(t,n,a,u,s,p){switch(t.type){case"condition":case"binaryOperator":case"if":case"assignment":case"parseError":case"attribute":return;case"vectorLiteral":var y=a.filter(function(e){return"vector"===e.type}).map(function(e){return e.elementType}).filter(function(e){return"elementOfEmptyVector"!==e.type});if(0===y.length)return;return{type:"vectorLiteral",entireLoc:(0,r.PS)(n),elements:t.elements.map(function(e,t){return f(e,(0,o.AY)(n,t),y,u,s,p)})};case"objectLiteral":var m=new Set(t.properties.map(function(e){return l(e,1)[0]})),v=a.filter(function(e){return!("object"!==e.type||e.properties.size!==t.properties.length||Array.from(e.properties.keys()).some(function(e){return!m.has(e)}))});if(0===v.length)return;return{type:"objectLiteral",entireLoc:(0,r.PS)(n),properties:t.properties.map(function(e){var t=l(e,2),r=t[0];return[r,f(t[1],(0,o.zt)(n,r),v.map(function(e){return e.properties.get(r)}),u,s,p)]})};case"do":var b,g={type:"statements",result:t.statements,entireLoc:t.entireLoc};return null!=(b=e(g,n,a,u,s,p))?b:s((0,i.Z2)(g),n,a);case"customNode":if(p)return(0,i.Fc)((0,i.Z2)(t,{simplify:!0}),n,a);return f(t.expr,n,a,u,s,p);case"statements":if(1===t.result.length)return f(t.result[0],n,a,u,s,p);return;case"expression":return f(t.value,n,a,u,s,p);case"identifier":if(d(a,u).filter(function(e){return"variable"===e.type}).some(function(e){return e.name===t.name.node}))return{type:"identifier",name:{node:t.name.node,location:(0,r.PS)(n)}};return;case"constant":if(a.some(function(e){return e.type===t.value.node.type}))return{type:"constant",value:{node:t.value.node,location:(0,r.PS)(n)}};return;case"unaryOperator":if("-"===t.operator.node&&"constant"===t.expr.type&&"number"===t.expr.value.node.type&&a.some(function(e){return"number"===e.type}))return{type:"constant",value:{location:(0,r.PS)(n),node:{type:"number",value:-t.expr.value.node.value}}};return;case"call":var h=t.fn;if("identifier"!==h.type||!d(a,u).filter(function(e){return"function"===e.type}).some(function(e){return e.name===h.name.node}))return;var E=u.get(h.name.node);if(!E||"function"!==E.type.type)return;var S=E.type,x=t.args.filter(function(e){return"unnamed"===e.type});if(x.length!==S.posArgs.length)return;var w=t.args.filter(function(e){return"named"===e.type}),O=new Set(w.map(function(e){return e.name.node}));if(Object.entries(S.namedArgs).filter(function(e){return void 0===l(e,2)[1].defaultValue}).some(function(e){var t=l(e,1)[0];return!O.has(t)})||S.posArgs.some(function(e){return"concrete"!==e.type})||(x=x.map(function(e,t){return{type:"unnamed",value:f(e.value,(0,o.ZM)(n,t),[S.posArgs[t].value],u,s,p)}}),Object.values(S.namedArgs).some(function(e){return"concrete"!==e.type.type})))return;return w=w.map(function(e){return{type:"named",name:e.name,value:f(e.value,(0,o.EU)(n,e.name.node),[S.namedArgs[e.name.node].type.value],u,s,p)}}),{type:"call",fn:{type:"identifier",name:{node:h.name.node,location:(0,r.PS)(n)}},args:c(x).concat(c(w)),entireLoc:(0,r.PS)(n)}}}(e,t,n,a,u,s);return null!=p?p:u((0,i.Z2)(e),t,n)}function y(e){return"number"===e.type||"string"===e.type}function d(e,t){var n=[];if(e.some(function(e){return"vector"===e.type})&&n.push({type:"vector"}),e.some(function(e){return"object"===e.type})&&n.push({type:"object"}),e.some(function(e){return"opaque"!==e.type||!1!==e.allowCustomExpression})&&n.push({type:"custom"}),e.some(y))n.push({type:"constant"});else{var r=e.map(a.wB),o=[],i=[],u=!0,s=!1,p=void 0;try{for(var f,d=t[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var m=l(f.value,2),v=m[0],b=m[1].type;r.includes((0,a.wB)(b))?o.push({type:"variable",name:v}):"function"===b.type&&"concrete"===b.returnType.type&&r.includes((0,a.wB)(b.returnType.value))&&i.push({type:"function",name:v})}}catch(e){s=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(s)throw p}}o.sort(function(e,n){var r,o,i,a,u,l;return("variable"===e.type&&null!=(u=null==(o=t.get(e.name))||null==(r=o.documentation)?void 0:r.priority)?u:1)-("variable"===n.type&&null!=(l=null==(a=t.get(n.name))||null==(i=a.documentation)?void 0:i.priority)?l:1)}),i.sort(function(e,n){var r,o,i,a,u,l;return("function"===e.type&&null!=(u=null==(o=t.get(e.name))||null==(r=o.documentation)?void 0:r.priority)?u:0)-("function"===n.type&&null!=(l=null==(a=t.get(n.name))||null==(i=a.documentation)?void 0:i.priority)?l:0)}),n.push.apply(n,c(i)),n.push.apply(n,c(o))}return n}},99448:function(e,t,n){n.r(t),n.d(t,{computeUSS:()=>g,convertToMapUss:()=>w,defaultSettings:()=>h,makeStatements:()=>E,mapSettingsFromURLParam:()=>x,mapperMetaFields:()=>S});var r=n(58788),o=n(88609),i=n(21791),a=n(4050),u=n(34672),l=n(81600),c=n(5855),s=n(88452),p=n(36405),f=n(7500),y=n(52904).Buffer;function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function v(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function b(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return(0,u.qT)(e.uss)}function h(e){var t,n,r,o,i,a=(0,f.xI)(null!=(n=null==(t=e.script)?void 0:t.uss)?n:(0,f.Ll)(),(0,p.A)(null!=(r=e.universe)?r:"USA"),!0);return{geographyKind:null!=(o=e.geographyKind)?o:"Subnational Region",universe:null!=(i=e.universe)?i:"USA",script:{uss:a}}}function E(e,t){var n=b(e.map(u.x9));return void 0!==t&&n.push((0,c.PS)(t)),{type:"statements",result:e,entireLoc:u.LU.apply(void 0,b(n))}}var S=o.z.object({geographyKind:o.z.optional(o.z.enum(i.Z)).catch(void 0),universe:o.z.optional(o.z.enum(a.Z)).catch(void 0)});function x(e){var t={};if(void 0!==e){var n=(0,r.gunzipSync)(y.from(e,"base64")).toString(),i=o.z.object(v(m({},S.shape),{script:o.z.object({uss:o.z.string()})})).parse(JSON.parse(n)),a=(0,s.Qc)(i.script.uss);if("error"===a.type)throw Error(a.errors.map(function(e){return(0,l.l9)(m({kind:"error"},e),!0)}).join(", "));t=v(m({},i),{script:{uss:w(a)}})}return h(t)}function w(e){return"expression"===e.type&&"customNode"===e.value.type?e.value:"statements"===e.type&&2===e.result.length&&"expression"===e.result[0].type&&"customNode"===e.result[0].value.type&&"condition"===e.result[1].type&&1===e.result[1].rest.length&&"expression"===e.result[1].rest[0].type?v(m({},e),{result:[v(m({},e.result[0]),{value:e.result[0].value}),v(m({},e.result[1]),{rest:[e.result[1].rest[0]]})]}):(0,s.Fc)((0,s.Z2)(e),f.BE)}},73001:function(e,t,n){n.d(t,{E0:()=>M,G0:()=>b,Hw:()=>j,ID:()=>U,O7:()=>m,QU:()=>v,RE:()=>S,Rf:()=>O,Rx:()=>g,Ry:()=>h,Z_:()=>d,eP:()=>k,gh:()=>P,jt:()=>E,n0:()=>C,s2:()=>L,sS:()=>w,th:()=>A,x2:()=>D,xr:()=>x});var r=n(79455),o=n(77053),i=n(27193),a=n(88452);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||f(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}function y(e,t,n){throw Error("".concat(e,": ").concat(JSON.stringify(t)).concat(n&&"\n".concat(n.map(function(e){return"  ".concat(e.message)}).join("\n"))))}function d(){return{parse:function(e){if((null==e?void 0:e.type)==="constant"&&"string"===e.value.node.type)return e.value.node.value;y("not a string constant",e)}}}function m(){return C(b([v("true"),v("false")]),function(e){return"true"===e})}function v(e){return{parse:function(t){if((null==t?void 0:t.type)==="identifier"&&t.name.node===e)return e;y("not an identifier with the name ".concat(e),t)}}}function b(e){return{parse:function(t,n,r){var o=[],i=!0,a=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;try{return s.parse(t,n,r)}catch(e){o.push(e)}}}catch(e){a=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}y("No union schema could be parsed",t,o)}}}function g(){return{parse:function(e,t){return(null==e?void 0:e.type)==="unaryOperator"&&"-"===e.operator.node?-this.parse(e.expr,t):(null==e?void 0:e.type)==="constant"&&"number"===e.value.node.type?e.value.node.value:void y("not a number",e)}}}function h(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="objectLiteral"){var o={},i=!0,a=!1,u=void 0;try{for(var f,d=Object.keys(e)[Symbol.iterator]();!(i=(f=d.next()).done);i=!0)!function(){var i=f.value,a=t.properties.find(function(e){return s(e,1)[0]===i});o[i]=e[i].parse(null==a?void 0:a[1],n,function(e){return r(c(l({},t),{properties:void 0===e?t.properties.filter(function(e){return e[0]!==i}):a?t.properties.map(function(t){return t===a?[t[0],e]:t}):p(t.properties).concat([[i,e]])}))})}()}catch(e){a=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw u}}return o}y("not an object literal",t)}}}function E(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if(void 0!==t)return e.parse(t,n,r)}}}function S(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="call"){var a=e.fn.parse(t.fn,n,function(e){return(0,o.h)(void 0!==e,"cannot remove just the callee"),r(c(l({},t),{fn:e}))}),u={},f=!0,d=!1,m=void 0;try{for(var v,b=Object.keys(e.namedArgs)[Symbol.iterator]();!(f=(v=b.next()).done);f=!0)!function(){var o=v.value,a=t.args.find(function(e){return"named"===e.type&&e.name.node===o});u[o]=e.namedArgs[o].parse(null==a?void 0:a.value,n,function(e){return r(c(l({},t),{args:a?void 0===e?t.args.filter(function(e){return e!==a}):t.args.map(function(t){return t===a?c(l({},t),{value:e}):t}):void 0===e?t.args:p(t.args).concat([{type:"named",name:{node:o,location:i.tU},value:e}])}))})}()}catch(e){d=!0,m=e}finally{try{f||null==b.return||b.return()}finally{if(d)throw m}}var g=[],h=!0,E=!1,S=void 0;try{e:for(var x,w=e.unnamedArgs.entries()[Symbol.iterator]();!(h=(x=w.next()).done);h=!0){var O=s(x.value,2),k=O[0],j=O[1],A=0,I=!0,P=!1,U=void 0;try{for(var L,C=t.args[Symbol.iterator]();!(I=(L=C.next()).done);I=!0)if("continue|argSchemas"===function(){var e=L.value;return"named"===e.type?"continue":A===k?(g[k]=j.parse(e.value,n,function(n){return r(c(l({},t),{args:void 0===n?t.args.filter(function(t){return t!==e}):t.args.map(function(t){return t===e?c(l({},t),{value:n}):t})}))}),"continue|argSchemas"):void A++}())continue e}catch(e){P=!0,U=e}finally{try{I||null==C.return||C.return()}finally{if(P)throw U}}y("not enough named args",t)}}catch(e){E=!0,S=e}finally{try{h||null==w.return||w.return()}finally{if(E)throw S}}return{namedArgs:u,unnamedArgs:g,fn:a}}y("not a call expression",t)}}}function x(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return w(e).parse(t,n,r).currentValue}}}function w(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="vectorLiteral")return{currentValue:t.elements.map(function(o){return e.parse(o,n,function(e){return r(c(l({},t),{elements:void 0===e?t.elements.filter(function(e){return e!==o}):t.elements.map(function(t){return t===o?e:t})}))})}),edit:function(e){return r(c(l({},t),{elements:e(t.elements)}))}};y("not a vector literal",t)}}}function O(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="identifier"){var o=n.get(t.name.node);if((null==o||null==(l=o.documentation)?void 0:l.equivalentExpressions)!==void 0&&o.documentation.equivalentExpressions.length>0){var i=!0,a=!1,u=void 0;try{for(var l,c,s=o.documentation.equivalentExpressions[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var p=c.value;try{return e.parse(p,n,r)}catch(e){}}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}}}return e.parse(t,n,r)}}}function k(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return{currentValue:e.parse(t,n,r),edit:r,expr:t}}}}function j(e,t,n){return{parse:function(o,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return n.parse(o,i,function(n){return a(void 0===n?void 0:(0,r.S2)(n,e,t,i,function(){throw Error("should not happen")},!0))})}}}function A(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="expression")return e.parse(t.value,n,function(e){return void 0===e?void 0:r(c(l({},t),{value:e}))});y("not an expression",t)}}}function I(e,t,n,r){var o=[],i=!0,a=!1,u=void 0;try{for(var l,c=e.entries()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=s(l.value,2),i=e[0],a=e[1];i>=t.length&&y("not enough statements",t),o[i]=a.parse(t[i],n,function(e){return r(p(t.slice(0,i)).concat([e],p(t.slice(i+1))))})}()}catch(e){a=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}return o}function P(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="statements")return I(e,t.result,n,function(e){return r(c(l({},t),{result:e}))});y("not a statements list",t)}}}function U(){return{parse:function(){}}}function L(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="condition")return{condition:e.condition.parse(t.condition,n,function(e){return(0,o.h)(void 0!==e,"cannot remove just the condition from a condition statement"),r(c(l({},t),{condition:e}))}),rest:I(e.rest,t.rest,n,function(e){return r(c(l({},t),{rest:e}))})};y("not a condition",t)}}}function C(e,t){return{parse:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t(e.parse(n,r,o))}}}function D(e,t){return{parse:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t(e.parse(n,r,o))}}}function M(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="customNode"&&"expression"===t.expr.type){var o=t.expr;return e.parse(t.expr.value,n,function(e){return void 0===e?void 0:r(c(l({},t),{expr:c(l({},o),{value:e}),originalCode:(0,a.Z2)(e)}))})}return e.parse(t,n,r)}}}}}]);
//# sourceMappingURL=191.js.map