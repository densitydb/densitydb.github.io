(self.webpackChunkassets=self.webpackChunkassets||[]).push([["582"],{23509:function(e,t,n){"use strict";var r=("undefined"!=typeof JSON?JSON:n(62078)).stringify,o=n(70867),i=n(59025),a=n(2705),u=n(76580),l=u("Array.prototype.join"),c=u("Array.prototype.indexOf"),s=u("Array.prototype.splice"),f=u("Array.prototype.sort"),p=function(e,t){for(var n="",r=0;r<e;r+=1)n+=t;return n},y=function(e,t,n){return n};e.exports=function(e){var t=arguments.length>1?arguments[1]:void 0,n=t&&t.space||"";"number"==typeof n&&(n=p(n," "));var u=!!t&&"boolean"==typeof t.cycles&&t.cycles,d=t&&t.replacer?a(t.replacer):y;if(t&&void 0!==t.collapseEmpty&&"boolean"!=typeof t.collapseEmpty)throw TypeError("`collapseEmpty` must be a boolean, if provided");var v=!!t&&t.collapseEmpty,m="function"==typeof t?t:t&&t.cmp,b=m&&function(e){var t=m.length>2&&function(t){return e[t]};return function(n,r){return m({key:n,value:e[n]},{key:r,value:e[r]},t?{__proto__:null,get:t}:void 0)}},g=[];return function e(t,a,y,m){var h=n?"\n"+p(m,n):"",E=n?": ":":";if(y&&y.toJSON&&"function"==typeof y.toJSON&&(y=y.toJSON()),void 0!==(y=d(t,a,y))){if((void 0===y?"undefined":(x=y)&&"undefined"!=typeof Symbol&&x.constructor===Symbol?"symbol":typeof x)!="object"||null===y)return r(y);var x,S=function(e,t){return v&&0===e.length?t:("[]"===t?"[":"{")+l(e,",")+h+("[]"===t?"]":"}")};if(o(y)){for(var w=[],O=0;O<y.length;O++){var j=e(y,O,y[O],m+1)||r(null);w[w.length]=h+n+j}return S(w,"[]")}if(-1!==c(g,y)){if(u)return r("__cycle__");throw TypeError("Converting circular structure to JSON")}g[g.length]=y;for(var A=f(i(y),b&&b(y)),w=[],O=0;O<A.length;O++){var a=A[O],k=e(y,a,y[a],m+1);if(k){var I=r(a)+E+k;w[w.length]=h+n+I}}return s(g,c(g,y),1),S(w,"{}")}}({"":e},"",e,0)}},70867:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},62078:function(e,t,n){"use strict";t.parse=n(3991),t.stringify=n(4969)},3991:function(e){"use strict";var t,n,r,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function i(e){throw{name:"SyntaxError",message:e,at:t,text:r}}function a(e){return e&&e!==n&&i("Expected '"+e+"' instead of '"+n+"'"),n=r.charAt(t),t+=1,n}function u(){var e,t="";for("-"===n&&(t="-",a("-"));n>="0"&&n<="9";)t+=n,a();if("."===n)for(t+=".";a()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,a(),("-"===n||"+"===n)&&(t+=n,a());n>="0"&&n<="9";)t+=n,a();return isFinite(e=Number(t))||i("Bad number"),e}function l(){var e,t,r,u="";if('"'===n)for(;a();)if('"'===n)return a(),u;else if("\\"===n)if(a(),"u"===n){for(t=0,r=0;t<4&&isFinite(e=parseInt(a(),16));t+=1)r=16*r+e;u+=String.fromCharCode(r)}else if("string"==typeof o[n])u+=o[n];else break;else u+=n;i("Bad string")}function c(){for(;n&&n<=" ";)a()}function s(){switch(c(),n){case"{":var e,t={};if("{"===n){if(a("{"),c(),"}"===n)return a("}"),t;for(;n;){if(e=l(),c(),a(":"),Object.prototype.hasOwnProperty.call(t,e)&&i('Duplicate key "'+e+'"'),t[e]=s(),c(),"}"===n)return a("}"),t;a(","),c()}}i("Bad object");return;case"[":var r=[];if("["===n){if(a("["),c(),"]"===n)return a("]"),r;for(;n;){if(r.push(s()),c(),"]"===n)return a("]"),r;a(","),c()}}i("Bad array");return;case'"':return l();case"-":return u();default:return n>="0"&&n<="9"?u():function(){switch(n){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null;default:i("Unexpected '"+n+"'")}}()}}e.exports=function(e,o){var a;return r=e,t=0,n=" ",a=s(),c(),n&&i("Syntax error"),"function"==typeof o?function e(t,n){var r,i,a=t[n];if(a&&(void 0===a?"undefined":a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)=="object")for(r in s)Object.prototype.hasOwnProperty.call(a,r)&&(void 0===(i=e(a,r))?delete a[r]:a[r]=i);return o.call(t,n,a)}({"":a},""):a}},4969:function(e){"use strict";function t(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var n,r,o,i=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function u(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=a[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}e.exports=function(e,i,a){var l;if(n="",r="","number"==typeof a)for(l=0;l<a;l+=1)r+=" ";else"string"==typeof a&&(r=a);if(o=i,i&&"function"!=typeof i&&((void 0===i?"undefined":t(i))!=="object"||"number"!=typeof i.length))throw Error("JSON.stringify");return function e(i,a){var l,c,s,f,p,y=n,d=a[i];switch(d&&(void 0===d?"undefined":t(d))==="object"&&"function"==typeof d.toJSON&&(d=d.toJSON(i)),"function"==typeof o&&(d=o.call(a,i,d)),void 0===d?"undefined":t(d)){case"string":return u(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(n+=r,p=[],"[object Array]"===Object.prototype.toString.apply(d)){for(l=0,f=d.length;l<f;l+=1)p[l]=e(l,d)||"null";return s=0===p.length?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+y+"]":"["+p.join(",")+"]",n=y,s}if(o&&(void 0===o?"undefined":t(o))==="object")for(l=0,f=o.length;l<f;l+=1)"string"==typeof(c=o[l])&&(s=e(c,d))&&p.push(u(c)+(n?": ":":")+s);else for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(s=e(c,d))&&p.push(u(c)+(n?": ":":")+s);return s=0===p.length?"{}":n?"{\n"+n+p.join(",\n"+n)+"\n"+y+"}":"{"+p.join(",")+"}",n=y,s}}("",{"":e})}},30444:function(e,t,n){"use strict";n.d(t,{S:()=>y});var r=n(23509),o=n.n(r),i=n(72668),a=n(66547),u=n(77053);function l(e,t,n,r){for(var o=0;o<=n;o++)r[o].fill(0),r[o][0]=(1<<o)-1;var i=1<<t.length-1;e:for(var a=1;a<=t.length+e.length;a++){var u=void 0;u=a-1<e.length?t.alphabet[e.charCodeAt(a-1)]:0;for(var l=0;l<=n;l++)if(0===l?r[0][a]=(r[0][a-1]<<1|1)&u:r[l][a]=(r[l][a-1]<<1|1)&u|((r[l-1][a-1]|r[l-1][a])<<1|1)|r[l-1][a-1],(r[l][a]&i)!=0&&(n=l-1,0===l))break e}return n+1}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){var t=e.onEdit,n={width:"20px",height:"20px"},r=(0,a.cI)();return i.createElement("button",{style:s({border:"none",cursor:"pointer",padding:"0 0",marginLeft:"4px",opacity:.7,display:"flex",alignItems:"center",justifyContent:"center"},n),onClick:function(e){e.preventDefault(),e.stopPropagation(),t()},title:"Edit"},i.createElement("img",{src:r.pencilIcon,alt:"Edit",style:s({},n)}))}function y(e){var t=e.value,n=e.onChange,r=e.possibleValues,c=e.renderValue,s=e.onEdit,y=(0,a.cI)(),v=c(t),m=f((0,i.useState)(v.text),2),b=m[0],g=m[1],h=f((0,i.useState)(!1),2),E=h[0],x=h[1],S=f((0,i.useState)(0),2),w=S[0],O=S[1],j=(0,i.useRef)(null),A=(0,i.useRef)(null);(0,i.useEffect)(function(){g(v.text)},[v.text]);var k=(0,i.useMemo)(function(){var e=r.map(function(e,t){return{renderedChoice:c(e),index:t}}),t=e.reduce(function(e,t){return Math.max(e,t.renderedChoice.text.toLowerCase().length)},0);return{options:e,bitapBuffers:Array.from({length:32},function(){return new Uint32Array(31+t+1)})}},[r,c]),I=k.bitapBuffers,P=k.options,C=(0,i.useMemo)(function(){var e,t={alphabet:function(e){(0,u.h)(e.length<=31,"Max bitap token length is 31");for(var t=new Uint32Array(65535).fill(0),n=0;n<e.length;n++){var r=e.charCodeAt(n);t[r]=t[r]|1<<n}return t}(e=b.toLowerCase().slice(0,31)),length:e.length,signature:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>=97&&r<=122){var o=1<<(r-97)*2;(t&o)!=0?t|=o<<1:t|=o}}return t}(e)};return P.sort(function(e,n){var r=l(e.renderedChoice.text.toLowerCase(),t,31,I),o=l(n.renderedChoice.text.toLowerCase(),t,31,I);return r===o?e.renderedChoice.text.length-n.renderedChoice.text.length:r-o})},[I,b,P]),U=function(e){var i=r[e.index];o()(i)!==o()(t)&&n(i),g(e.renderedChoice.text),x(!1),O(0)};return i.createElement("div",{style:{position:"relative",flex:1,display:"flex",alignItems:"center"}},i.createElement("input",{ref:j,type:"text",value:b,onChange:function(e){g(e.target.value),x(!0),O(0),A.current&&(A.current.scrollTop=0)},onKeyDown:function(e){if(E&&0!==C.length)switch(e.key){case"ArrowDown":e.preventDefault(),O(function(e){return e<C.length-1?e+1:0});break;case"ArrowUp":e.preventDefault(),O(function(e){return e>0?e-1:C.length-1});break;case"Enter":e.preventDefault(),w>=0&&w<C.length&&U(C[w]);break;case"Escape":e.preventDefault(),x(!1),O(0)}},onClick:function(e){e.target.select()},onFocus:function(){x(!0),O(0)},onBlur:function(){setTimeout(function(){x(!1),O(0)},150)},placeholder:"Search options...",style:{flex:1,padding:"".concat("4px"," 8px"),border:"1px solid ".concat(y.ordinalTextColor),borderRadius:"4px",fontSize:"14px"}}),s&&i.createElement(p,{onEdit:s}),E&&C.length>0&&i.createElement("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:y.background,border:"1px solid #ccc",borderRadius:"4px",maxHeight:"200px",overflowY:"auto",zIndex:1e3,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},ref:A},C.map(function(e,t){var n,r,o;return i.createElement("div",{key:t,onMouseDown:function(){U(e)},onMouseUp:function(){var t;U(e),null==(t=j.current)||t.blur()},style:{cursor:"pointer",borderBottom:t<C.length-1?"1px solid #eee":"none"},onMouseEnter:function(){O(t)}},null!=(o=null==(n=(r=e.renderedChoice).node)?void 0:n.call(r,t===w))?o:i.createElement(d,{text:e.renderedChoice.text,highlighted:t===w}))})))}function d(e){var t=(0,a.cI)();return i.createElement("div",{style:{padding:"8px 12px",background:e.highlighted?t.slightlyDifferentBackgroundFocused:t.slightlyDifferentBackground,color:""===e.text?t.ordinalTextColor:t.textMain}},""===e.text?"No Selection":e.text)}n(71540)},65344:function(e,t,n){"use strict";n.d(t,{I:()=>i});var r=n(72668),o=n(89147),i=(0,r.createContext)(new o.Z(void 0))},78233:function(e,t,n){"use strict";n.d(t,{xI:()=>ea,BE:()=>et,Qc:()=>eo,ag:()=>ei,Ll:()=>eu,Py:()=>ee});var r=n(39343),o=n.n(r),i=n(72668),a=n(98234),u=n(23529),l=n(34672),c=n(5855),s=n(88452),f=n(23509),p=n.n(f),y=n(24714),d=n(27193),v=n(89080),m=n(79074),b=n(77053),g=n(36195),h=n(65344);function E(e){var t=e.uss,n=e.setUss,r=e.typeEnvironment,o=e.errors,a=e.blockIdent,l=e.placeholder,c=(0,i.useMemo)(function(){return o.filter(function(e){return"single"===e.location.start.block.type&&e.location.start.block.ident===a})},[o,a]),f=(0,i.useContext)(h.I),p=f.use();return i.createElement(u.ML,{uss:t.originalCode,setUss:function(e){n((0,s.Fc)(e,a,t.expectedType))},typeEnvironment:r,results:c,placeholder:l,selection:(null==p?void 0:p.blockIdent)===a?p.range:null,setSelection:function(e){var t;null!==e?f.value={blockIdent:a,range:e}:(null==(t=f.value)?void 0:t.blockIdent)===a&&(f.value=void 0)}})}var x=n(78970),S=n(37014),w=n(66547),O=n(54509),j=n(73001),A=n(30444),k=n(79455);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n,r;return"function"===e.type&&(null==(r=t.get(e.name))||null==(n=r.documentation)?void 0:n.customConstructor)===!0}function C(e){var t=e.setSelection,n=e.typeEnvironment,r=U(e.uss),o=(0,i.useMemo)(function(){var t=new Set;return e.type.forEach(function(n){(0,k.$p)([n],e.typeEnvironment).forEach(function(e){return t.add(e)})}),Array.from(t)},[p()(e.type),e.typeEnvironment]),a=(0,i.useMemo)(function(){return o.some(function(t){return P(t,e.typeEnvironment)})&&!P(r,e.typeEnvironment)},[o,e.typeEnvironment,r]),l=(0,i.useCallback)(function(t){return function(e,t){if("custom"===t.type)return{text:"Custom Expression"};if("constant"===t.type)return{text:"Constant"};if("vector"===t.type)return{text:"Manual List"};if("object"===t.type)return{text:"Properties"};var n,r,o,a,u=null==(n=e.get(t.name))?void 0:n.documentation;if((null==u||null==(r=u.selectorRendering)?void 0:r.kind)==="subtitleLongDescription")return{text:u.humanReadableName,node:function(e){return i.createElement(D,{doc:u,highlighted:e})}};if((null==u||null==(o=u.selectorRendering)?void 0:o.kind)!=="gradientBackground")return{text:null!=(a=null==u?void 0:u.humanReadableName)?a:t.name};var l=u.selectorRendering.ramp;return{text:u.humanReadableName,node:function(e){return i.createElement(M,{name:u.humanReadableName,ramp:l,highlighted:e})}}}(e.typeEnvironment,t)},[e.typeEnvironment]),f=(0,i.useCallback)(function(){var e=o.find(function(e){return P(e,n)});e&&t(e)},[o,n,t]);if(!(o.length<2)){var d,v,m=e.type.some(function(e){return"number"===e.type}),b=e.type.some(function(e){return"string"===e.type}),g="constant"===r.type&&(m||b),h="constant"===e.uss.type?e.uss.value.node.value.toString():"",E=e.errors.filter(function(t){return"single"===t.location.start.block.type&&t.location.start.block.ident===e.blockIdent}),x=i.createElement(u.SA,{results:E,editor:!1}),S=e.type.some(function(e){return"opaque"===e.type&&"color"===e.name})?(d=e.uss,v=e.typeEnvironment,L.parse(d,v)):void 0,w=i.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",gap:"0.5em"}},i.createElement(A.S,{value:r,possibleValues:o,renderValue:l,onChange:e.setSelection,onEdit:a?f:void 0}),g&&i.createElement("input",{type:"text",value:h,onChange:function(t){var n,r,o=t.target.value,i={type:"constant",value:{node:m&&void 0!==(r=(0,c.p3)(o))?{type:"number",value:r}:{type:"string",value:o},location:(0,c.PS)(e.blockIdent)}};e.setUss(i)},style:{width:"200px",fontSize:"14px",padding:"4px 8px"},placeholder:m?"Enter number":"Enter string"}),void 0!==S&&i.createElement("input",{type:"color",value:(0,y.XF)(S.color,!0),style:{width:"200px",height:"30.5px"},onChange:function(t){var n,r=(0,O.u)(t.target.value),o="hsv"===S.kind?(0,y.v1)(r,{forceAlpha:S.color.a}):(0,y.io)(r,{forceAlpha:S.color.a});switch(e.uss.type){case"customNode":n=(0,s.Fc)(o,e.blockIdent,e.type);break;case"identifier":case"call":n=(0,s.hc)(o,e.blockIdent)}void 0!==n&&(n=(0,k.S2)(n,e.blockIdent,e.type,e.typeEnvironment,function(){throw Error("Should not happen")},!0),e.setUss(n))}}));return i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5em"}},w,x)}}function U(e){if("customNode"===e.type)return{type:"custom"};if("constant"===e.type)return{type:"constant"};if("identifier"===e.type)return{type:"variable",name:e.name.node};if("call"===e.type){var t=U(e.fn);return(0,b.h)("variable"===t.type,"Function must be a variable or another function"),{type:"function",name:t.name}}if("vectorLiteral"===e.type)return{type:"vector"};if("objectLiteral"===e.type)return{type:"object"};throw Error("Unsupported USS expression type: ".concat(e.type))}var L=j.n0(j.E0(j.Rf(j.RE({fn:j.G0([j.QU("rgb"),j.QU("hsv")]),unnamedArgs:[j.Rx(),j.Rx(),j.Rx()],namedArgs:{a:j.jt(j.Rx())}}))),function(e){var t,n,r;switch(e.fn){case"rgb":t=(0,y._l)(e.unnamedArgs[0],e.unnamedArgs[1],e.unnamedArgs[2],null!=(n=e.namedArgs.a)?n:1,!0);break;case"hsv":t=(0,y.De)(e.unnamedArgs[0],e.unnamedArgs[1],e.unnamedArgs[2],null!=(r=e.namedArgs.a)?r:1,!0)}if(void 0!==t)return{color:t,kind:e.fn}});function D(e){var t=(0,w.cI)();return i.createElement("div",{style:{padding:"8px 12px",background:e.highlighted?t.slightlyDifferentBackgroundFocused:t.slightlyDifferentBackground}},i.createElement("div",null,e.doc.humanReadableName),i.createElement("div",{style:{fontSize:"smaller",color:t.ordinalTextColor}},e.doc.longDescription))}function M(e){var t=(0,w.cI)(),n=(0,x.Z)(e.ramp[0][1]),r="rgb(from ".concat(t.slightlyDifferentBackgroundFocused," r g b / 1)");return i.createElement("div",{style:{padding:"8px 12px",color:S.J[n.isLight()?"Light Mode":"Dark Mode"].textMain,background:e.highlighted?"".concat(F(r,"bottom"),", ").concat(F(r,"right"),", ").concat(N(e.ramp)):N(e.ramp)}},e.name)}function N(e){return"linear-gradient(to right, ".concat(e.map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return I(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],r=t[1];return"".concat(r," ").concat(Math.round(100*n),"%")}).join(", "),")")}function F(e,t){return"linear-gradient(to ".concat(t,", ").concat(e," ").concat("5px",", transparent ").concat("5px",", transparent calc(100% - ").concat("5px","), ").concat(e," calc(100% - ").concat("5px","))")}var T=n(20110);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function Z(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||q(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}}function V(e,t,n){if("number"===e.type)return{type:"constant",value:{node:{type:"number",value:0},location:(0,c.PS)(t)}};if("string"===e.type)return{type:"constant",value:{node:{type:"string",value:""},location:(0,c.PS)(t)}};var r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l,f=z(a.value,2),p=f[0],y=f[1];if(null==(l=y.documentation)?void 0:l.isDefault){if((0,v.wB)(y.type)===(0,v.wB)(e))return W({type:"variable",name:p},n,t);if("function"===y.type.type&&"inferFromPrimitive"!==y.type.returnType.type&&(0,v.wB)(y.type.returnType.value)===(0,v.wB)(e))return K({type:"function",name:p},n,t)}}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return"vector"===e.type?{type:"vectorLiteral",entireLoc:(0,c.PS)(t),elements:[]}:(0,s.Fc)("",t,[e])}function J(e){var t,n,r,o=e.argWDefault.type;(0,b.h)("concrete"===o.type,"Named argument ".concat(e.name," must be concrete"));var u=e.uss,l=u.args.find(function(t){return"named"===t.type&&t.name.node===e.name}),s=void 0!==e.argWDefault.defaultValue,f=void 0!==l,p=(0,d.EU)(e.blockIdent,e.name),y=e.typeEnvironment.get(u.fn.name.node),v=null!=(r=null==y||null==(n=y.documentation)||null==(t=n.namedArgs)?void 0:t[e.name])?r:e.name;return i.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.25em",width:"100%",margin:"0.25em 0"}},i.createElement("div",{style:{flex:1}},i.createElement("div",null,s?i.createElement(a.Ov,{name:v,checked:f,onChange:function(t){if(t){var n,r=e.argWDefault.defaultValue,i=void 0===r||"identifier"===r.type&&"null"===r.name.node?V(o.value,p,e.typeEnvironment):r;i=null!=(n=Q(i,e.typeEnvironment,p,o.value))?n:(0,k.S2)(i,p,[o.value],e.typeEnvironment,function(){throw Error("Should not happen")},!0);var a={type:"named",name:{node:e.name,location:(0,c.PS)(p)},value:i},l=_(u.args).concat([a]);e.setUss(Z(R({},u),{args:l}))}else{var s=u.args.filter(function(t){return"named"!==t.type||t.name.node!==e.name});e.setUss(Z(R({},u),{args:s}))}}}):i.createElement("span",null,v)),f&&i.createElement($,{uss:l.value,setUss:function(t){var n=u.args.map(function(n){return"named"===n.type&&n.name.node===e.name?Z(R({},n),{value:t}):n});e.setUss(Z(R({},u),{args:n}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:p,type:[o.value]})))}function $(e){var t,n,r,o,a,u,f=(0,l.x9)(e.uss).start;("single"!==f.block.type||f.block.ident!==e.blockIdent)&&(T.warn("USS: ",e.uss),T.warn("USS Location: ",f),T.warn("Editor blockIdent: ",e.blockIdent),T.error("[failtest] USS expression location does not match block identifier",e.uss,"single"===f.block.type?f.block.ident:"(multi)",e.blockIdent));var y=null!=(a=e.labelWidth)?a:"5%",v=z((n=(t=z(function(){if("constant"===e.uss.type)return[void 0,"does-not-consume-errors"];var t=e.uss;if("customNode"===t.type)return[i.createElement(E,{key:"custom",uss:t,setUss:e.setUss,typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:e.blockIdent}),"consumes-errors"];if("identifier"===t.type)return[void 0,"does-not-consume-errors"];if("call"===t.type){(0,b.h)("identifier"===t.fn.type,"Function must be an identifier");var n=e.typeEnvironment.get(t.fn.name.node);(0,b.h)(void 0!==n,"Function ".concat(t.fn.name.node," not found in type environment"));var r=n.type;(0,b.h)("function"===r.type,"Function ".concat(t.fn.name.node," must be a function type"));var o=[];return r.posArgs.forEach(function(n,r){(0,b.h)("concrete"===n.type,"Positional argument must be concrete"),o.push(i.createElement($,{key:"pos-".concat(r),uss:t.args[r].value,setUss:function(n){var o=_(t.args);o[r]=Z(R({},o[r]),{value:n}),e.setUss(Z(R({},t),{args:o}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:(0,d.ZM)(e.blockIdent,r),type:[n.value]}))}),Object.entries(r.namedArgs).forEach(function(n){var r,a=z(n,2),u=a[0],l=a[1];(null==(r=l.documentation)?void 0:r.hide)!==!0&&o.push(i.createElement(J,{key:"named-".concat(u),name:u,argWDefault:l,uss:t,setUss:e.setUss,typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:e.blockIdent}))}),[i.createElement.apply(i,["div",{key:"subselectors"}].concat(_(o))),"does-not-consume-errors"]}if("vectorLiteral"===t.type){var a={type:"number"};return"vector"===e.type[0].type&&(a=e.type[0].elementType),[i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5em",width:"100%"}},t.elements.map(function(n,r){return i.createElement("div",{key:r,style:{display:"flex",alignItems:"center",gap:"0.5em",width:"100%"}},i.createElement($,{uss:n,setUss:function(n){var o=_(t.elements);o[r]=n,e.setUss(Z(R({},t),{elements:o}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:(0,d.AY)(e.blockIdent,r),type:[a],label:"".concat(r+1)}),i.createElement("button",{style:{flexShrink:0},onClick:function(){var n=t.elements.filter(function(e,t){return t!==r});e.setUss(Z(R({},t),{elements:n}))},title:"Remove element"},"â€“"))}),i.createElement("button",{style:{alignSelf:"flex-start",marginTop:4},onClick:function(){var n=_(t.elements).concat([t.elements.length>0?t.elements[t.elements.length-1]:V(a,(0,d.AY)(e.blockIdent,t.elements.length),e.typeEnvironment)]);e.setUss(Z(R({},t),{elements:n}))}},"+ Add element")),"does-not-consume-errors"]}if("objectLiteral"===t.type){var u=new m.G(function(){return{type:"number"}});return"object"===e.type[0].type&&(u=e.type[0].properties),[i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.5em",width:"100%"}},Array.from(u.keys()).sort().map(function(n){var r,o,a=u.get(n);return i.createElement($,{key:n,uss:null!=(o=null==(r=t.properties.find(function(e){return z(e,1)[0]===n}))?void 0:r[1])?o:V(a,(0,d.zt)(e.blockIdent,n),e.typeEnvironment),setUss:function(r){e.setUss(Z(R({},t),{properties:t.properties.map(function(e){var t=z(e,2),o=t[0],i=t[1];return[o,o===n?r:i]})}))},typeEnvironment:e.typeEnvironment,errors:e.errors,blockIdent:(0,d.zt)(e.blockIdent,n),type:[a],label:n})})),"does-not-consume-errors"]}throw Error("Unsupported USS expression type: ".concat(e.uss.type))}(),2))[0],r=t[1],void 0===n?[void 0,r]:[i.createElement("div",{style:{width:"100%",flex:1}},i.createElement("div",{style:{display:"flex",gap:"1em",marginLeft:y}},e.label&&i.createElement("span",{style:{minWidth:"fit-content"}}),i.createElement("div",{style:{flex:1}},n))),r]),2),h=v[0],x=v[1],S=void 0===e.label?void 0:i.createElement("div",{style:{padding:"".concat("4px"," 0px")}},i.createElement("span",{style:{minWidth:"fit-content"}},e.label)),w=(0,k.$p)(e.type,e.typeEnvironment).length<2?void 0:i.createElement("div",{style:{width:"calc(100% - ".concat(y,")")}},i.createElement(C,{uss:e.uss,setSelection:function(t){e.setUss(function(e,t,n,r,o){var i=Q(t,n,r,o,e);if(void 0!==i)return i;var a=(0,k.KO)(t,r,o,n);if(void 0!==a&&p()(U(a))===p()(e))return a;switch(e.type){case"custom":return(0,s.Fc)((0,s.Z2)(t),r,[o]);case"constant":return V(o,r,n);case"variable":return W(e,n,r);case"function":return K(e,n,r,t);case"vector":return{type:"vectorLiteral",entireLoc:(0,c.PS)(r),elements:[]};case"object":return{type:"objectLiteral",entireLoc:(0,c.PS)(r),properties:[]}}}(t,e.uss,e.typeEnvironment,e.blockIdent,e.type[0]))},setUss:e.setUss,typeEnvironment:e.typeEnvironment,type:e.type,blockIdent:e.blockIdent,errors:"consumes-errors"===x?[]:e.errors})),O=(0,g.wd)()||(null!=(u=null==(o=e.label)?void 0:o.length)?u:0)>5;return i.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",flex:1,margin:"0.25em 0",gap:"0.25em"},id:"auto-ux-editor-".concat(e.blockIdent)},void 0!==S||void 0!==w?i.createElement("div",{style:{width:"100%",flex:1}},O?i.createElement(i.Fragment,null,i.createElement("div",{style:{display:"flex",alignItems:"top"}},S),i.createElement("div",{style:{display:"flex",alignItems:"top"}},i.createElement("div",{style:{width:y}}),w)):i.createElement("div",{style:{display:"flex",alignItems:"top"}},i.createElement("div",{style:{width:y}},S),w)):void 0,h)}function W(e,t,n){var r,o=null==(r=t.get(e.name))?void 0:r.type;return(0,b.h)(void 0!==o,"Variable ".concat(e.name," not found in type environment")),{type:"identifier",name:{node:e.name,location:(0,c.PS)(n)}}}function K(e,t,n,r){var o=t.get(e.name);(0,b.h)(void 0!==o&&"function"===o.type.type,"Function ".concat(e.name," not found or not a function"));for(var i=r?function(e,t){var n;if("call"===e.type&&"identifier"===e.fn.type&&(n=t.get(e.fn.name.node))&&"function"===n.type.type){var r=n.type;return function(t,n){var o,i;return"number"==typeof t&&t<r.posArgs.length&&"concrete"===r.posArgs[t].type&&(0,v.wB)(n)===(0,v.wB)(r.posArgs[t].value)?null==(o=e.args.filter(function(e){return"unnamed"===e.type})[t])?void 0:o.value:"string"==typeof t&&t in r.namedArgs&&"concrete"===r.namedArgs[t].type.type&&(0,v.wB)(n)===(0,v.wB)(r.namedArgs[t].type.value)?null==(i=e.args.find(function(e){return"named"===e.type&&e.name.node===t}))?void 0:i.value:void 0}}return function(){}}(r,t):void 0,a=[],u=0;u<o.type.posArgs.length;u++){var l,s=o.type.posArgs[u];(0,b.h)("concrete"===s.type,"Positional argument must be concrete"),a.push({type:"unnamed",value:null!=(l=null==i?void 0:i(u,s.value))?l:V(s.value,(0,d.ZM)(n,u),t)})}var f=!0,p=!1,y=void 0;try{for(var m,g=Object.entries(o.type.namedArgs)[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var h=z(m.value,2),E=h[0],x=h[1],S=x.type;(0,b.h)("concrete"===S.type,"Named argument ".concat(E," must be concrete"));var w=null==i?void 0:i(E,S.value);(w||void 0===x.defaultValue)&&a.push({type:"named",name:{node:E,location:(0,c.PS)(n)},value:null!=w?w:V(S.value,(0,d.EU)(n,E),t)})}}catch(e){p=!0,y=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw y}}return{type:"call",fn:{type:"identifier",name:{node:e.name,location:(0,c.PS)(n)}},args:a,entireLoc:(0,c.PS)(n)}}function Q(e,t,n,r,o){switch(e.type){case"identifier":var i=t.get(e.name.node);if(void 0===i||(null==(c=i.documentation)?void 0:c.equivalentExpressions)===void 0)return;var a=!0,u=!1,l=void 0;try{for(var c,f,d=i.documentation.equivalentExpressions[Symbol.iterator]();!(a=(f=d.next()).done);a=!0){var v=f.value,m=(0,k.KO)(v,n,r,t);if(void 0!==m&&(void 0===o||p()(U(m))===p()(o)))return m}}catch(e){u=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(u)throw l}}return;case"customNode":if("expression"===e.expr.type)return Q(e.expr.value,t,n,r,o);return;case"call":if("opaque"===r.type&&"color"===r.name&&(null==o?void 0:o.type)==="function"){var b=L.parse(e,t);switch(!0){case(null==b?void 0:b.kind)==="rgb"&&"hsv"===o.name:return(0,s.hc)((0,y.v1)(b.color),n);case(null==b?void 0:b.kind)==="hsv"&&"rgb"===o.name:return(0,s.hc)((0,y.io)(b.color),n)}}return;default:return}}function G(e){var t=e.condition,n=e.setCondition,r=e.typeEnvironment,o=e.errors,u=e.blockIdent,l="customNode"===t.type;return i.createElement("div",{style:{margin:"0.5em 0"}},i.createElement(a.Ov,{name:"Filter?",checked:l,onChange:function(e){if(e){var r=(0,s.Z2)(t)||"true";n((0,s.Fc)(r,u,[{type:"vector",elementType:{type:"boolean"}}]))}else n({type:"identifier",name:{node:"true",location:(0,c.PS)(u)}})}}),l&&i.createElement(E,{uss:t,setUss:n,typeEnvironment:r,errors:o,blockIdent:u}))}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function H(e){var t,n=e.preamble,r=e.setPreamble,o=e.typeEnvironment,u=e.errors,l=e.blockIdent,c=(t=(0,i.useState)(""!==n.originalCode.trim()),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Y(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=c[0],p=c[1];return i.createElement("div",{style:{margin:"0.5em 0"}},i.createElement(a.Ov,{name:"Preamble",checked:f,onChange:function(e){r((0,s.Fc)("",l)),p(e)}}),f&&i.createElement(E,{uss:n,setUss:r,typeEnvironment:o,errors:u,blockIdent:l,placeholder:"Variables here can be used by all custom expressions."}))}var X=n(99448),ee=[{type:"opaque",name:"cMap",allowCustomExpression:!1},{type:"opaque",name:"cMapRGB",allowCustomExpression:!1},{type:"opaque",name:"pMap",allowCustomExpression:!1}],et="r",en="".concat(et,"p"),er="".concat(et,"c"),eo="".concat(et,"o");function ei(e){var t=e.uss,n=e.setUss,r=e.typeEnvironment,c=e.errors;return i.createElement("div",null,i.createElement("div",{style:{margin:"0.5em 0px"}}),i.createElement(a.Ov,{name:"Enable custom script",checked:"customNode"===t.type,onChange:function(e){e?(o()("statements"===t.type,"USS should be statements when enabling custom script"),n((0,s.Fc)((0,s.Z2)(t,{simplify:!0}),et))):(o()("customNode"===t.type,"USS should not be a custom node when disabled"),n(ea(t.expr,r,!1)))}}),"customNode"===t.type?i.createElement(E,{uss:t,setUss:n,typeEnvironment:r,errors:c,blockIdent:et}):i.createElement("div",null,i.createElement(H,{preamble:t.result[0].value,setPreamble:function(e){n((0,X.makeStatements)([{type:"expression",value:e},t.result[1]]))},typeEnvironment:r,errors:c,blockIdent:en}),i.createElement(G,{condition:t.result[1].condition,setCondition:function(e){var r={type:"condition",entireLoc:(0,l.x9)(e),condition:e,rest:t.result[1].rest};n((0,X.makeStatements)([t.result[0],r]))},typeEnvironment:r,errors:c,blockIdent:er}),i.createElement($,{uss:t.result[1].rest[0].value,setUss:function(e){var r={type:"condition",entireLoc:t.result[1].entireLoc,condition:t.result[1].condition,rest:[{type:"expression",value:e}]};n((0,X.makeStatements)([t.result[0],r]))},typeEnvironment:r,errors:c,blockIdent:eo,type:ee,labelWidth:"0px"})),i.createElement(u.SA,{editor:!1,results:c.filter(function(e){return"multi"===e.location.start.block.type})}))}function ea(e,t,n){if("customNode"===e.type)return e;var r="statements"===e.type?e.result:[e],o={type:"statements",result:r.slice(0,-1),entireLoc:(0,l.x9)(e)},i=function(e){var t=void 0!==e?[e]:[];if((null==e?void 0:e.type)==="condition"){var n=(0,s.Z2)(e.condition,{simplify:!0});if("true"!==n.trim())return{conditionExpr:(0,s.Fc)(n,er,[{type:"vector",elementType:{type:"boolean"}}]),conditionRest:e.rest};t=e.rest}return{conditionExpr:{type:"identifier",name:{node:"true",location:(0,c.PS)(er)}},conditionRest:t}}(r.length>0?r[r.length-1]:void 0),a=i.conditionRest,u=i.conditionExpr,f=(0,k.S2)((0,X.makeStatements)(a,eo),eo,ee,t,s.Fc,n),p={type:"condition",entireLoc:(0,l.x9)(u),condition:u,rest:[{type:"expression",value:f}]};return{type:"statements",result:[{type:"expression",value:(0,s.Fc)((0,s.Z2)(o,{simplify:!0}),en)},p],entireLoc:(0,l.x9)(e)}}function eu(){return(0,s.Fc)("cMap(data=density_pw_1km, scale=linearScale(), ramp=rampUridis)",et,ee).expr}},79455:function(e,t,n){"use strict";n.d(t,{$p:()=>d,KO:()=>f,S2:()=>p});var r=n(5855),o=n(27193),i=n(88452),a=n(89080);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}function f(e,t,n,r){try{return p(e,t,[n],r,function(){throw Error("parsing failed")},!1)}catch(e){}}function p(e,t,n,a,u,s){var f=function e(t,n,a,u,s,f){switch(t.type){case"condition":case"binaryOperator":case"if":case"assignment":case"parseError":case"attribute":return;case"vectorLiteral":var y=a.filter(function(e){return"vector"===e.type}).map(function(e){return e.elementType}).filter(function(e){return"elementOfEmptyVector"!==e.type});if(0===y.length)return;return{type:"vectorLiteral",entireLoc:(0,r.PS)(n),elements:t.elements.map(function(e,t){return p(e,(0,o.AY)(n,t),y,u,s,f)})};case"objectLiteral":var v=new Set(t.properties.map(function(e){return l(e,1)[0]})),m=a.filter(function(e){return!("object"!==e.type||e.properties.size!==t.properties.length||Array.from(e.properties.keys()).some(function(e){return!v.has(e)}))});if(0===m.length)return;return{type:"objectLiteral",entireLoc:(0,r.PS)(n),properties:t.properties.map(function(e){var t=l(e,2),r=t[0];return[r,p(t[1],(0,o.zt)(n,r),m.map(function(e){return e.properties.get(r)}),u,s,f)]})};case"do":var b,g={type:"statements",result:t.statements,entireLoc:t.entireLoc};return null!=(b=e(g,n,a,u,s,f))?b:s((0,i.Z2)(g),n,a);case"customNode":if(f)return(0,i.Fc)((0,i.Z2)(t,{simplify:!0}),n,a);return p(t.expr,n,a,u,s,f);case"statements":if(1===t.result.length)return p(t.result[0],n,a,u,s,f);return;case"expression":return p(t.value,n,a,u,s,f);case"identifier":if(d(a,u).filter(function(e){return"variable"===e.type}).some(function(e){return e.name===t.name.node}))return{type:"identifier",name:{node:t.name.node,location:(0,r.PS)(n)}};return;case"constant":if(a.some(function(e){return e.type===t.value.node.type}))return{type:"constant",value:{node:t.value.node,location:(0,r.PS)(n)}};return;case"unaryOperator":if("-"===t.operator.node&&"constant"===t.expr.type&&"number"===t.expr.value.node.type&&a.some(function(e){return"number"===e.type}))return{type:"constant",value:{location:(0,r.PS)(n),node:{type:"number",value:-t.expr.value.node.value}}};return;case"call":var h=t.fn;if("identifier"!==h.type||!d(a,u).filter(function(e){return"function"===e.type}).some(function(e){return e.name===h.name.node}))return;var E=u.get(h.name.node);if(!E||"function"!==E.type.type)return;var x=E.type,S=t.args.filter(function(e){return"unnamed"===e.type});if(S.length!==x.posArgs.length)return;var w=t.args.filter(function(e){return"named"===e.type}),O=new Set(w.map(function(e){return e.name.node}));if(Object.entries(x.namedArgs).filter(function(e){return void 0===l(e,2)[1].defaultValue}).some(function(e){var t=l(e,1)[0];return!O.has(t)})||x.posArgs.some(function(e){return"concrete"!==e.type})||(S=S.map(function(e,t){return{type:"unnamed",value:p(e.value,(0,o.ZM)(n,t),[x.posArgs[t].value],u,s,f)}}),Object.values(x.namedArgs).some(function(e){return"concrete"!==e.type.type})))return;return w=w.map(function(e){return{type:"named",name:e.name,value:p(e.value,(0,o.EU)(n,e.name.node),[x.namedArgs[e.name.node].type.value],u,s,f)}}),{type:"call",fn:{type:"identifier",name:{node:h.name.node,location:(0,r.PS)(n)}},args:c(S).concat(c(w)),entireLoc:(0,r.PS)(n)}}}(e,t,n,a,u,s);return null!=f?f:u((0,i.Z2)(e),t,n)}function y(e){return"number"===e.type||"string"===e.type}function d(e,t){var n=[];if(e.some(function(e){return"vector"===e.type})&&n.push({type:"vector"}),e.some(function(e){return"object"===e.type})&&n.push({type:"object"}),e.some(function(e){return"opaque"!==e.type||!1!==e.allowCustomExpression})&&n.push({type:"custom"}),e.some(y))n.push({type:"constant"});else{var r=e.map(a.wB),o=[],i=[],u=!0,s=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var v=l(p.value,2),m=v[0],b=v[1].type;r.includes((0,a.wB)(b))?o.push({type:"variable",name:m}):"function"===b.type&&"concrete"===b.returnType.type&&r.includes((0,a.wB)(b.returnType.value))&&i.push({type:"function",name:m})}}catch(e){s=!0,f=e}finally{try{u||null==d.return||d.return()}finally{if(s)throw f}}o.sort(function(e,n){var r,o,i,a,u,l;return("variable"===e.type&&null!=(u=null==(o=t.get(e.name))||null==(r=o.documentation)?void 0:r.priority)?u:1)-("variable"===n.type&&null!=(l=null==(a=t.get(n.name))||null==(i=a.documentation)?void 0:i.priority)?l:1)}),i.sort(function(e,n){var r,o,i,a,u,l;return("function"===e.type&&null!=(u=null==(o=t.get(e.name))||null==(r=o.documentation)?void 0:r.priority)?u:0)-("function"===n.type&&null!=(l=null==(a=t.get(n.name))||null==(i=a.documentation)?void 0:i.priority)?l:0)}),n.push.apply(n,c(i)),n.push.apply(n,c(o))}return n}},99448:function(e,t,n){"use strict";n.r(t),n.d(t,{computeUSS:()=>g,convertToMapUss:()=>w,defaultSettings:()=>h,makeStatements:()=>E,mapSettingsFromURLParam:()=>S,mapperMetaFields:()=>x});var r=n(58788),o=n(88609),i=n(21791),a=n(4050),u=n(34672),l=n(81600),c=n(5855),s=n(88452),f=n(36405),p=n(78233),y=n(52904).Buffer;function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function b(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return(0,u.qT)(e.uss)}function h(e){var t,n,r,o,i,a=(0,p.xI)(null!=(n=null==(t=e.script)?void 0:t.uss)?n:(0,p.Ll)(),(0,f.A)(null!=(r=e.universe)?r:"USA"),!0);return{geographyKind:null!=(o=e.geographyKind)?o:"Subnational Region",universe:null!=(i=e.universe)?i:"USA",script:{uss:a}}}function E(e,t){var n=b(e.map(u.x9));return void 0!==t&&n.push((0,c.PS)(t)),{type:"statements",result:e,entireLoc:u.LU.apply(void 0,b(n))}}var x=o.z.object({geographyKind:o.z.optional(o.z.enum(i.Z)).catch(void 0),universe:o.z.optional(o.z.enum(a.Z)).catch(void 0)});function S(e){var t={};if(void 0!==e){var n=(0,r.gunzipSync)(y.from(e,"base64")).toString(),i=o.z.object(m(v({},x.shape),{script:o.z.object({uss:o.z.string()})})).parse(JSON.parse(n)),a=(0,s.Qc)(i.script.uss);if("error"===a.type)throw Error(a.errors.map(function(e){return(0,l.l9)(v({kind:"error"},e),!0)}).join(", "));t=m(v({},i),{script:{uss:w(a)}})}return h(t)}function w(e){return"expression"===e.type&&"customNode"===e.value.type?e.value:"statements"===e.type&&2===e.result.length&&"expression"===e.result[0].type&&"customNode"===e.result[0].value.type&&"condition"===e.result[1].type&&1===e.result[1].rest.length&&"expression"===e.result[1].rest[0].type?m(v({},e),{result:[m(v({},e.result[0]),{value:e.result[0].value}),m(v({},e.result[1]),{rest:[e.result[1].rest[0]]})]}):(0,s.Fc)((0,s.Z2)(e),p.BE)}},73001:function(e,t,n){"use strict";n.d(t,{E0:()=>L,G0:()=>m,Hw:()=>O,ID:()=>I,O7:()=>d,QU:()=>v,RE:()=>E,Rf:()=>S,Rx:()=>b,Ry:()=>g,Z_:()=>y,eP:()=>w,gh:()=>k,jt:()=>h,n0:()=>C,s2:()=>P,th:()=>j,x2:()=>U,xr:()=>x});var r=n(79455),o=n(27193),i=n(88452);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,t)||p(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function p(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}function y(){return{parse:function(e){if((null==e?void 0:e.type)==="constant"&&"string"===e.value.node.type)return e.value.node.value}}}function d(){return C(m([v("true"),v("false")]),function(e){return"true"===e})}function v(e){return{parse:function(t){if((null==t?void 0:t.type)==="identifier"&&t.name.node===e)return e}}}function m(e){return{parse:function(t,n,r){var o=!0,i=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value.parse(t,n,r);if(void 0!==c)return c}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}}}function b(){return{parse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==e?void 0:e.type)==="unaryOperator"&&"-"===e.operator.node){var r=this.parse(e.expr,t,function(t){return n(l(u({},e),{expr:t}))});if(void 0===r)return;return-r}if((null==e?void 0:e.type)==="constant"&&"number"===e.value.node.type)return e.value.node.value}}}function g(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="objectLiteral"){var o={},i=!0,a=!1,p=void 0;try{for(var y,d=Object.keys(e)[Symbol.iterator]();!(i=(y=d.next()).done);i=!0){var v=function(){var i=y.value,a=t.properties.find(function(e){return c(e,1)[0]===i}),f=e[i].parse(null==a?void 0:a[1],n,function(e){return r(l(u({},t),{properties:a?t.properties.map(function(t){return t===a?[t[0],e]:t}):s(t.properties).concat([[i,e]])}))});if(void 0===f)return{v:void 0};o[i]=f}();if("object"===f(v))return v.v}}catch(e){a=!0,p=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw p}}return o}}}}function h(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return void 0===t?null:e.parse(t,n,r)}}}function E(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="call"){var i=e.fn.parse(t.fn,n,function(e){return r(l(u({},t),{fn:e}))});if(void 0===i)return;var a={},p=!0,y=!1,d=void 0;try{for(var v,m=Object.keys(e.namedArgs)[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var b=function(){var i=v.value,c=t.args.find(function(e){return"named"===e.type&&e.name.node===i}),f=e.namedArgs[i].parse(null==c?void 0:c.value,n,function(e){return r(l(u({},t),{args:c?t.args.map(function(t){return t===c?l(u({},t),{value:e}):t}):s(t.args).concat([{type:"named",name:{node:i,location:o.tU},value:e}])}))});if(void 0===f)return{v:void 0};a[i]=f}();if("object"===f(b))return b.v}}catch(e){y=!0,d=e}finally{try{p||null==m.return||m.return()}finally{if(y)throw d}}var g=[],h=!0,E=!1,x=void 0;try{t:for(var S,w=e.unnamedArgs.entries()[Symbol.iterator]();!(h=(S=w.next()).done);h=!0){var O=c(S.value,2),j=O[0],A=O[1],k=0,I=!0,P=!1,C=void 0;try{for(var U,L=t.args[Symbol.iterator]();!(I=(U=L.next()).done);I=!0){var D=function(){var e=U.value;if("named"===e.type)return"continue";if(k===j){var o=A.parse(e.value,n,function(n){return r(l(u({},t),{args:t.args.map(function(t){return t===e?l(u({},t),{value:n}):t})}))});return void 0===o?{v:void 0}:(g[j]=o,"continue|argSchemas")}k++}();if("object"===f(D))return D.v;if("continue|argSchemas"===D)continue t}}catch(e){P=!0,C=e}finally{try{I||null==L.return||L.return()}finally{if(P)throw C}}return}}catch(e){E=!0,x=e}finally{try{h||null==w.return||w.return()}finally{if(E)throw x}}return{namedArgs:a,unnamedArgs:g,fn:i}}}}}function x(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="vectorLiteral"){var o=[],i=!0,a=!1,c=void 0;try{for(var s,p=t.elements[Symbol.iterator]();!(i=(s=p.next()).done);i=!0){var y=function(){var i=s.value,a=e.parse(i,n,function(e){return r(l(u({},t),{elements:t.elements.map(function(t){return t===i?e:t})}))});if(void 0===a)return{v:void 0};o.push(a)}();if("object"===f(y))return y.v}}catch(e){a=!0,c=e}finally{try{i||null==p.return||p.return()}finally{if(a)throw c}}return o}}}}function S(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="identifier"){var o=n.get(t.name.node);if((null==o||null==(l=o.documentation)?void 0:l.equivalentExpressions)!==void 0&&o.documentation.equivalentExpressions.length>0){var i=!0,a=!1,u=void 0;try{for(var l,c,s=o.documentation.equivalentExpressions[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value,p=e.parse(f,n,r);if(void 0!==p)return p}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}}}return e.parse(t,n,r)}}}function w(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},o=e.parse(t,n,r);if(void 0!==o)return{currentValue:o,edit:r,expr:t}}}}function O(e,t,n){return{parse:function(o,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return n.parse(o,i,function(n){return a((0,r.S2)(n,e,t,i,function(){throw Error("should not happen")},!0))})}}}function j(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="expression"){var o=e.parse(t.value,n,function(e){return r(l(u({},t),{value:e}))});if(void 0!==o)return o}}}}function A(e,t,n,r){var o=[],i=!0,a=!1,u=void 0;try{for(var l,p=e.entries()[Symbol.iterator]();!(i=(l=p.next()).done);i=!0){var y=function(){var e=c(l.value,2),i=e[0],a=e[1];if(i>=t.length)return{v:void 0};var u=a.parse(t[i],n,function(e){return r(s(t.slice(0,i)).concat([e],s(t.slice(i+1))))});if(void 0===u)return{v:void 0};o[i]=u}();if("object"===f(y))return y.v}}catch(e){a=!0,u=e}finally{try{i||null==p.return||p.return()}finally{if(a)throw u}}return o}function k(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="statements")return A(e,t.result,n,function(e){return r(l(u({},t),{result:e}))})}}}function I(){return{parse:function(){return null}}}function P(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="condition"){var o=e.condition.parse(t.condition,n,function(e){return r(l(u({},t),{condition:e}))});if(void 0===o)return;var i=A(e.rest,t.rest,n,function(e){return r(l(u({},t),{rest:e}))});if(void 0===i)return;return{condition:o,rest:i}}}}}function C(e,t){return{parse:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=e.parse(n,r,o);if(void 0!==i)return t(i)}}}function U(e,t){return{parse:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=e.parse(n,r,o);if(void 0!==i)return t(i)}}}function L(e){return{parse:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};if((null==t?void 0:t.type)==="customNode"&&"expression"===t.expr.type){var o=t.expr;return e.parse(t.expr.value,n,function(e){return r(l(u({},t),{expr:l(u({},o),{value:e}),originalCode:(0,i.Z2)(e)}))})}return e.parse(t,n,r)}}}},89147:function(e,t,n){"use strict";n.d(t,{Z:()=>a});var r=n(72668);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){var e;function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");i(this,"_value",void 0),i(this,"observers",new Set),this._value=e}return e=[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.observers.forEach(function(e){e()})}},{key:"use",value:function(){var e,t=this,n=(e=(0,r.useState)(0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,u=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),i.length!==t);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(u)throw r}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];return(0,r.useEffect)(function(){var e=function(){n(function(e){return e+1})};return t.observers.add(e),function(){t.observers.delete(e)}},[]),this.value}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()}}]);
//# sourceMappingURL=582.js.map