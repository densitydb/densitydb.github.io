"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["144"],{89533:function(e,r,n){n.r(r),n.d(r,{addFriend:()=>d,addFriendFromLink:()=>function e(r,n){return l(function(){var t,a;return f(this,function(o){switch(o.label){case 0:return[4,d(r,n)];case 1:if(void 0!==(t=o.sent()))return[3,2];return alert("Friend added: ".concat(n," !")),[3,6];case 2:if("friendName"!==t.problemDomain)return[3,5];if(null===(a=prompt("Could not add friend: ".concat(t.errorMessage,"\n\nPlease correct the friend name:"),n)))return[3,4];return[4,e(r,a.trim())];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:alert("Could not add friend: ".concat(t.errorMessage)),o.label=6;case 6:return[2]}})})()}});var t=n(4334),a=n(62473),o=n(65438);function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}function u(e,r,n,t,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?r(l):Promise.resolve(l).then(t,a)}function l(e){return function(){var r=this,n=arguments;return new Promise(function(t,a){var o=e.apply(r,n);function i(e){u(o,t,a,i,l,"next",e)}function l(e){u(o,t,a,i,l,"throw",e)}i(void 0)})}}function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n,t,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,u=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){u=!0,t=e}finally{try{i||null==a.return||a.return()}finally{if(u)throw t}}return o}}(e,r)||c(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,r){if(e){if("string"==typeof e)return i(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,r)}}function f(e,r){var n,t,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(l){var s=[u,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,t&&(a=2&s[0]?t.return:s[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,s[1])).done)return a;switch(t=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,t=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=r.call(e,o)}catch(e){s=[6,e],t=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}function d(e,r){return l(function(){var n,u,l,d,m,b,p;return f(this,function(f){switch(f.label){case 0:if(n=o.QuizModel.shared.uniquePersistentId.value,u=a.AuthenticationStateMachine.shared.state.email,l="Friend ID or Email",""===e)return[2,{errorMessage:"".concat(l," cannot be empty"),problemDomain:"friendID"}];if(e===n)return[2,{errorMessage:"Friend ID cannot be your own ID",problemDomain:"friendID"}];if(e===u)return[2,{errorMessage:"Friend Email cannot be your own Email",problemDomain:"friendID"}];if(d=o.QuizModel.shared.friends.value.find(function(r){var n=s(r,2),t=n[0],a=n[1];return null!==t&&a===e}))return[2,{errorMessage:"".concat(l," ").concat(e," already exists as ").concat(d[0]),problemDomain:"friendID"}];if(""===r)return[2,{errorMessage:"Friend name cannot be empty",problemDomain:"friendName"}];if(o.QuizModel.shared.friends.value.map(function(e){return e[0]}).includes(r))return[2,{errorMessage:"Friend name already exists",problemDomain:"friendName"}];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t.G.POST("/juxtastat/friend_request",{body:{requestee:e},params:{header:o.QuizModel.shared.userHeaders()}})];case 2:var y;if(b=(m=f.sent()).response,p=m.error,422===b.status)return[2,{errorMessage:"Invalid ".concat(l),problemDomain:"friendID"}];if(void 0!==p)return[2,{errorMessage:"Unknown Error",problemDomain:"other"}];return o.QuizModel.shared.friends.value=((function(e){if(Array.isArray(e))return i(e)})(y=o.QuizModel.shared.friends.value.filter(function(r){return s(r,2)[1]!==e}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||c(y)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([[r,e,Date.now()]]),[2,void 0];case 3:return f.sent(),[2,{errorMessage:"Network Error",problemDomain:"other"}];case 4:return[2]}})})()}}}]);
//# sourceMappingURL=144.js.map