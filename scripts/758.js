"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["758"],{2680:function(e,t,n){n.d(t,{_:()=>h});var r=n(39343),a=n.n(r);function o(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function i(e,t){var n=o(e,t,"get");return n.get?n.get.call(e):n.value}function u(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function c(e,t,n){var r=o(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}var s=new WeakMap,l=new WeakMap,f=new WeakMap,p=new WeakMap,h=function(){var e;function t(e,n,r,o){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");u(this,s,{writable:!0,value:void 0}),u(this,l,{writable:!0,value:void 0}),u(this,f,{writable:!0,value:void 0}),u(this,p,{writable:!0,value:void 0}),c(this,s,e),c(this,l,n),c(this,f,r),c(this,p,o);var i=!0,h=!1,v=void 0;try{for(var y,d=o.keys()[Symbol.iterator]();!(i=(y=d.next()).done);i=!0){var b=y.value;a()(!r.has(b),'Variable name "'.concat(b,'" conflicts with a constant'))}}catch(e){h=!0,v=e}finally{try{i||null==d.return||d.return()}finally{if(h)throw v}}}return e=[{key:"effect",value:function(e){i(this,s).call(this,e)}},{key:"error",value:function(e,t){return i(this,l).call(this,e,t)}},{key:"getVariable",value:function(e){return i(this,f).has(e)?i(this,f).get(e):i(this,p).get(e)}},{key:"assignVariable",value:function(e,t){if(i(this,f).has(e))return'Cannot assign to constant "'.concat(e,'"');i(this,p).set(e,t)}},{key:"variableEntries",value:function(){return i(this,p).entries()}},{key:"evolveVariables",value:function(e){return new t(i(this,s),i(this,l),i(this,f),e)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},39517:function(e,t,n){n.d(t,{U:()=>I,z:()=>x});var r,a=n(84962),o=n(51859),i=n(21791),u=n(18848),c=n(22379),s=n(45375),l=n(36405),f=n(45437),p=n(77053),h=n(34672),v=n(44640),y=n(52594),d=n(27193),b=n(89080),m=n(20110);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){w(o,r,a,i,u,"next",e)}function u(e){w(o,r,a,i,u,"throw",e)}i(void 0)})}}function A(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,u=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(u)throw r}}return o}}(e,t)||C(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}function T(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){var s=[u,c];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}function x(e){var t=o.Z[e];return(0,p.h)(t.length>0,"No insets for universe ".concat(e)),(0,p.h)(t[0].mainMap,"No main map for universe ".concat(e)),t.map(function(e){return{bottomLeft:[e.bottomLeft[0],e.bottomLeft[1]],topRight:[e.topRight[0],e.topRight[1]],coordBox:S(e.coordBox),mainMap:e.mainMap}})}function I(e){var t=o.Z[e].map(function(e){return e.name}).map(function(e){var t=v.F6.get(e);return(0,p.h)(void 0!==t,"No inset constant for ".concat(e)),{type:"identifier",name:{node:t,location:d.tU}}});return{type:"call",fn:{type:"identifier",name:{node:"constructInsets",location:d.tU}},args:[{type:"unnamed",value:{type:"vectorLiteral",elements:t,entireLoc:d.tU}}],entireLoc:d.tU}}onmessage=function(e){return k(function(){return T(this,function(t){switch(t.label){case 0:var n;if(!("request"in e.data))return[2];return[4,(n=e.data.request,k(function(){var e,t,o,v,g,w,C;return T(this,function(I){switch(I.label){case 0:var E;return I.trys.push([0,2,,3]),[4,(E=n,k(function(){var e,t;return T(this,function(n){switch(n.label){case 0:switch(e=[],t=function(){return e.filter(function(e){return"warning"===e.type}).map(function(e){return{type:"error",value:e.message,location:e.location,kind:"warning"}})},E.descriptor.kind){case"generic":return[3,1];case"mapper":return[3,2]}return[3,4];case 1:return[2,[(0,a.Vh)(e),t]];case 2:var o,h;return[4,(o=E,h=e,k(function(){var e,t,n,a,v,y;return T(this,function(d){switch(d.label){case 0:if(e=o.descriptor.geographyKind,t=o.descriptor.universe,n=(0,l.A)(t),!i.Z.includes(e))throw Error("invalid geography");if((null==r?void 0:r.geographyKind)!==e||r.universe!==t)return[3,1];return a=r.longnames,[3,3];case 1:return[4,(0,s.gi)((0,f.Tw)(t,e),"ArticleOrderingList")];case 2:a=d.sent().longnames,r={universe:t,geographyKind:e,longnames:a,dataCache:new Map},d.label=3;case 3:return v=function(e,t){var r=n.get(e);return(0,p.h)(void 0!==r,"Type info for ".concat(e," not found")),{type:r.type,documentation:r.documentation,value:t}},y=function(n){return k(function(){var i,l,f,h,y;return T(this,function(d){switch(d.label){case 0:if((0,p.h)(void 0!==r,"mapperCache was initialized above and is never undefined after that"),"geo"===n)return[2,v("geo",a.map(function(e){return{type:"opaque",opaqueType:"geoFeatureHandle",value:e}}))];if("geoCentroid"===n)return[2,v("geoCentroid",a.map(function(e){return{type:"opaque",opaqueType:"geoCentroidHandle",value:e}}))];if("defaultInsets"===n)return[2,v("defaultInsets",{type:"opaque",opaqueType:"insets",value:x(o.descriptor.universe)})];if(!(i=c.Z.variableNames.find(function(e){return e.varName===n})))return[2,void 0];if(l=i.index,void 0!==(f=r.dataCache.get(n)))return[2,v(n,f)];return h=u.Z[l],[4,(0,s.aK)(t,h,e)];case 1:return y=d.sent(),(0,p.h)(Array.isArray(y),"Expected variable data for ".concat(n," to be an array")),r.dataCache.set(n,y),[2,v(n,y)]}})})()},[4,(0,l.l)(o.stmts,y,h,t)];case 4:return[2,d.sent()]}})})())];case 3:return[2,[n.sent(),t]];case 4:return[2]}})})())];case 1:switch(e=(o=M.apply(void 0,[I.sent(),2]))[0],t=o[1],v=(0,y.ht)(n.stmts,e),n.descriptor.kind){case"generic":break;case"mapper":if("cMap"!==(0,b.wB)(v.type)&&"pMap"!==(0,b.wB)(v.type))throw new y.Lv("USS expression did not return a cMap or pMap type, got: ".concat((0,b.wB)(v.type)),(0,h._x)(n.stmts))}return[2,{resultingValue:{type:v.type,value:function e(t){return A(t,Function)?null:Array.isArray(t)?t.map(e):A(t,Map)?new Map(Array.from(t.entries()).map(function(t){var n=M(t,2);return[n[0],e(n[1])]})):A(t,Object)&&A(t.value,Function)?((0,p.h)("scale"===t.opaqueType,"only scales can have functions in their value"),null):t}(v.value)},error:t()}];case 2:return A(g=I.sent(),y.Lv)?w=g:(m.error("Unknown interpretation error",g),w=new y.Lv("Unknown interpretation error",d.tU)),[2,{error:[{type:"error",value:w.value,location:w.location,kind:"error"}].concat(S(null!=(C=null==t?void 0:t())?C:[]))}];case 3:return[2]}})})())];case 1:return postMessage({result:t.sent(),id:e.data.id}),[2]}})})()}}}]);
//# sourceMappingURL=758.js.map