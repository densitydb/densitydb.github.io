{"version":3,"file":"327.js","sources":["webpack://assets/./src/components/quiz.css","webpack://assets/./node_modules/fast-deep-equal/index.js","webpack://assets/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://assets/./node_modules/prop-types/index.js","webpack://assets/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://assets/./node_modules/react-contenteditable/lib/react-contenteditable.js","webpack://assets/./src/components/GenericShareButton.tsx","webpack://assets/./src/components/Icon.tsx","webpack://assets/./src/components/display-stats.tsx","webpack://assets/./src/components/unit-display.tsx","webpack://assets/./src/components/editable-field.tsx","webpack://assets/./src/components/quiz.css?1e07","webpack://assets/./src/quiz/SignedOutPanel.tsx","webpack://assets/./src/quiz/quiz-components.tsx","webpack://assets/./src/quiz/quiz-question.tsx","webpack://assets/./node_modules/react-spinners/esm/GridLoader.js","webpack://assets/./src/quiz/quiz-friends.tsx","webpack://assets/./src/quiz/quiz-statistics.tsx","webpack://assets/./src/quiz/quiz-result.tsx","webpack://assets/./src/components/quiz-panel.tsx","webpack://assets/./src/quiz/dates.ts","webpack://assets/./src/quiz/friends.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.quiz_clickable {\n  display: block;\n  border-radius: 1em;\n  background-color: var(--quiz-plain-bg);\n  margin: 0.25em;\n  height: 100%;\n}\n\n@media (hover: hover) and (pointer: fine) {\n  .quiz_clickable:hover {\n    background-color: var(--quiz-selected-bg);\n    color: var(--text-main-opposite);\n  }\n}\n\n.quiz_correct {\n  background-color: var(--quiz-correct);\n  color: #000;\n}\n\n.quiz_correct:hover {\n  background-color: var(--quiz-correct);\n  color: #000;\n}\n\n.quiz_incorrect {\n  background-color: var(--quiz-incorrect);\n  color: #000;\n}\n\n.quiz_incorrect:hover {\n  background-color: var(--quiz-incorrect);\n  color: #000;\n}\n\n.quiz_results_question {\n  text-align: center;\n  display: table;\n  margin: 0 auto;\n  font-size: 1.25em;\n}\n\n.quiz_result_name_left {\n  width: 35%;\n  text-align: right;\n  vertical-align: middle;\n}\n\n.quiz_result_value_left {\n  width: 10%;\n  text-align: right;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_symbol {\n  width: 5%;\n  text-align: center;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_value_right {\n  width: 10%;\n  text-align: left;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_name_right {\n  width: 35%;\n  text-align: left;\n  vertical-align: middle;\n}\n\n.quiz_summary {\n  text-align: center;\n  font-size: 2em;\n  display: table;\n  margin: 0 auto;\n}\n\n.quiz_footer {\n  table-layout: fixed;\n  width: 40%;\n  margin-left: 30%;\n  margin-right: 30%;\n  height: 3em;\n}\n\n.quiz_barchart {\n  margin: 0 auto;\n}\n\n.quiz_bar_td {\n  height: 1.5em;\n  vertical-align: middle;\n  font-size: 1em;\n}\n\n.quiz_bar {\n  padding-left: 0.5em;\n  float: left;\n  vertical-align: middle;\n  height: 1.5em;\n  font-size: 1em;\n}\n\n.quiz_stat {\n  padding-left: 0.5em;\n  float: left;\n  vertical-align: middle;\n  height: 1.5em;\n  line-height: 1.5em;\n  font-size: 1em;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/quiz.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,cAAc;EACd,kBAAkB;EAClB,sCAAsC;EACtC,cAAc;EACd,YAAY;AACd;;AAEA;EACE;IACE,yCAAyC;IACzC,gCAAgC;EAClC;AACF;;AAEA;EACE,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,uCAAuC;EACvC,WAAW;AACb;;AAEA;EACE,uCAAuC;EACvC,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,cAAc;EACd,iBAAiB;AACnB;;AAEA;EACE,UAAU;EACV,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,iBAAiB;EACjB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,SAAS;EACT,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,UAAU;EACV,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,kBAAkB;EAClB,cAAc;AAChB\",\"sourcesContent\":[\".quiz_clickable {\\n  display: block;\\n  border-radius: 1em;\\n  background-color: var(--quiz-plain-bg);\\n  margin: 0.25em;\\n  height: 100%;\\n}\\n\\n@media (hover: hover) and (pointer: fine) {\\n  .quiz_clickable:hover {\\n    background-color: var(--quiz-selected-bg);\\n    color: var(--text-main-opposite);\\n  }\\n}\\n\\n.quiz_correct {\\n  background-color: var(--quiz-correct);\\n  color: #000;\\n}\\n\\n.quiz_correct:hover {\\n  background-color: var(--quiz-correct);\\n  color: #000;\\n}\\n\\n.quiz_incorrect {\\n  background-color: var(--quiz-incorrect);\\n  color: #000;\\n}\\n\\n.quiz_incorrect:hover {\\n  background-color: var(--quiz-incorrect);\\n  color: #000;\\n}\\n\\n.quiz_results_question {\\n  text-align: center;\\n  display: table;\\n  margin: 0 auto;\\n  font-size: 1.25em;\\n}\\n\\n.quiz_result_name_left {\\n  width: 35%;\\n  text-align: right;\\n  vertical-align: middle;\\n}\\n\\n.quiz_result_value_left {\\n  width: 10%;\\n  text-align: right;\\n  font-weight: 500;\\n  vertical-align: middle;\\n}\\n\\n.quiz_result_symbol {\\n  width: 5%;\\n  text-align: center;\\n  font-weight: 500;\\n  vertical-align: middle;\\n}\\n\\n.quiz_result_value_right {\\n  width: 10%;\\n  text-align: left;\\n  font-weight: 500;\\n  vertical-align: middle;\\n}\\n\\n.quiz_result_name_right {\\n  width: 35%;\\n  text-align: left;\\n  vertical-align: middle;\\n}\\n\\n.quiz_summary {\\n  text-align: center;\\n  font-size: 2em;\\n  display: table;\\n  margin: 0 auto;\\n}\\n\\n.quiz_footer {\\n  table-layout: fixed;\\n  width: 40%;\\n  margin-left: 30%;\\n  margin-right: 30%;\\n  height: 3em;\\n}\\n\\n.quiz_barchart {\\n  margin: 0 auto;\\n}\\n\\n.quiz_bar_td {\\n  height: 1.5em;\\n  vertical-align: middle;\\n  font-size: 1em;\\n}\\n\\n.quiz_bar {\\n  padding-left: 0.5em;\\n  float: left;\\n  vertical-align: middle;\\n  height: 1.5em;\\n  font-size: 1em;\\n}\\n\\n.quiz_stat {\\n  padding-left: 0.5em;\\n  float: left;\\n  vertical-align: middle;\\n  height: 1.5em;\\n  line-height: 1.5em;\\n  font-size: 1em;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar fast_deep_equal_1 = __importDefault(require(\"fast-deep-equal\"));\nvar PropTypes = __importStar(require(\"prop-types\"));\nfunction normalizeHtml(str) {\n    return str && str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ').replace(/<br \\/>/g, '<br>');\n}\nfunction replaceCaret(el) {\n    // Place the caret at the end of the element\n    var target = document.createTextNode('');\n    el.appendChild(target);\n    // do not move caret if element was not focused\n    var isTargetFocused = document.activeElement === el;\n    if (target !== null && target.nodeValue !== null && isTargetFocused) {\n        var sel = window.getSelection();\n        if (sel !== null) {\n            var range = document.createRange();\n            range.setStart(target, target.nodeValue.length);\n            range.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(range);\n        }\n        if (el instanceof HTMLElement)\n            el.focus();\n    }\n}\n/**\n * A simple component for an html element with editable contents.\n */\nvar ContentEditable = /** @class */ (function (_super) {\n    __extends(ContentEditable, _super);\n    function ContentEditable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.lastHtml = _this.props.html;\n        _this.el = typeof _this.props.innerRef === 'function' ? { current: null } : React.createRef();\n        _this.getEl = function () { return (_this.props.innerRef && typeof _this.props.innerRef !== 'function' ? _this.props.innerRef : _this.el).current; };\n        _this.emitChange = function (originalEvt) {\n            var el = _this.getEl();\n            if (!el)\n                return;\n            var html = el.innerHTML;\n            if (_this.props.onChange && html !== _this.lastHtml) {\n                // Clone event with Object.assign to avoid\n                // \"Cannot assign to read only property 'target' of object\"\n                var evt = Object.assign({}, originalEvt, {\n                    target: {\n                        value: html\n                    }\n                });\n                _this.props.onChange(evt);\n            }\n            _this.lastHtml = html;\n        };\n        return _this;\n    }\n    ContentEditable.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, tagName = _a.tagName, html = _a.html, innerRef = _a.innerRef, props = __rest(_a, [\"tagName\", \"html\", \"innerRef\"]);\n        return React.createElement(tagName || 'div', __assign(__assign({}, props), { ref: typeof innerRef === 'function' ? function (current) {\n                innerRef(current);\n                _this.el.current = current;\n            } : innerRef || this.el, onInput: this.emitChange, onBlur: this.props.onBlur || this.emitChange, onKeyUp: this.props.onKeyUp || this.emitChange, onKeyDown: this.props.onKeyDown || this.emitChange, contentEditable: !this.props.disabled, dangerouslySetInnerHTML: { __html: html } }), this.props.children);\n    };\n    ContentEditable.prototype.shouldComponentUpdate = function (nextProps) {\n        var props = this.props;\n        var el = this.getEl();\n        // We need not rerender if the change of props simply reflects the user's edits.\n        // Rerendering in this case would make the cursor/caret jump\n        // Rerender if there is no element yet... (somehow?)\n        if (!el)\n            return true;\n        // ...or if html really changed... (programmatically, not by user edit)\n        if (normalizeHtml(nextProps.html) !== normalizeHtml(el.innerHTML)) {\n            return true;\n        }\n        // Handle additional properties\n        return props.disabled !== nextProps.disabled ||\n            props.tagName !== nextProps.tagName ||\n            props.className !== nextProps.className ||\n            props.innerRef !== nextProps.innerRef ||\n            props.placeholder !== nextProps.placeholder ||\n            !(0, fast_deep_equal_1.default)(props.style, nextProps.style);\n    };\n    ContentEditable.prototype.componentDidUpdate = function () {\n        var el = this.getEl();\n        if (!el)\n            return;\n        // Perhaps React (whose VDOM gets outdated because we often prevent\n        // rerendering) did not update the DOM. So we update it manually now.\n        if (this.props.html !== el.innerHTML) {\n            el.innerHTML = this.props.html;\n        }\n        this.lastHtml = this.props.html;\n        replaceCaret(el);\n    };\n    ContentEditable.propTypes = {\n        html: PropTypes.string.isRequired,\n        onChange: PropTypes.func,\n        disabled: PropTypes.bool,\n        tagName: PropTypes.string,\n        className: PropTypes.string,\n        style: PropTypes.object,\n        innerRef: PropTypes.oneOfType([\n            PropTypes.object,\n            PropTypes.func,\n        ])\n    };\n    return ContentEditable;\n}(React.Component));\nexports.default = ContentEditable;\n","import React, { CSSProperties, ReactNode } from 'react'\nimport { isFirefox, isMobile } from 'react-device-detect'\n\nimport { useColors } from '../page_template/colors'\n\nexport function GenericShareButton(props: {\n    buttonRef: React.RefObject<HTMLButtonElement>\n    produceSummary: () => Promise<[string, string]>\n}): ReactNode {\n    const colors = useColors()\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- We need to check the condition for browser compatibility.\n    const canShare = navigator.canShare?.({ url: 'https://juxtastat.org', text: 'test' }) ?? false\n    const isShare = isMobile && canShare && !isFirefox\n\n    return (\n        <button\n            className=\"serif\"\n            style={buttonStyle(colors.hueColors.green, colors.buttonTextWhite)}\n            ref={props.buttonRef}\n            onClick={async () => {\n                const [text, url] = await props.produceSummary()\n\n                async function copyToClipboard(): Promise<void> {\n                    await navigator.clipboard.writeText(`${text}\\n${url}`)\n                    props.buttonRef.current!.textContent = 'Copied!'\n                }\n\n                if (isShare) {\n                    try {\n                        await navigator.share({\n                            url,\n                            text: `${text}\\n`,\n                        })\n                    }\n                    catch {\n                        await copyToClipboard()\n                    }\n                }\n                else {\n                    await copyToClipboard()\n                }\n            }}\n        >\n            <div>{isShare ? 'Share' : 'Copy'}</div>\n            <div style={{ marginInline: '0.25em' }}></div>\n            <img src=\"/share.png\" className=\"icon\" style={{ width: '1em', height: '1em' }} />\n        </button>\n    )\n}\n\nexport function buttonStyle(color: string, textColor: string): CSSProperties {\n    return {\n        textAlign: 'center',\n        fontSize: '2em',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'row',\n        margin: '0 auto',\n        padding: '0.25em 1em',\n        backgroundColor: color,\n        borderRadius: '0.25em',\n        border: 'none',\n        color: textColor,\n    }\n}\n","/**\n * This only uses the transparency of the icon image to display the specified color.\n */\n\nimport React, { CSSProperties, ReactNode } from 'react'\n\nexport function Icon({ size, color, src, style }: { size: string, color: string, src: string, style?: Partial<CSSProperties> }): ReactNode {\n    return (\n        <div style={{ backgroundColor: color, width: size, height: size, maskImage: `url(${src})`, maskRepeat: 'no-repeat', maskSize: 'contain', maskPosition: 'center', ...style }} />\n    )\n}\n","import React, { CSSProperties, ReactNode } from 'react'\n\nimport { useColors } from '../page_template/colors'\nimport { useSetting } from '../page_template/settings'\nimport { UnitType } from '../utils/unit'\n\nimport { classifyStatistic, getUnitDisplay } from './unit-display'\n\nexport function Statistic(props: { style?: React.CSSProperties, statname: string, value: number, isUnit: boolean, unit?: UnitType }): ReactNode {\n    const [useImperial] = useSetting('use_imperial')\n    const [temperatureUnit] = useSetting('temperature_unit')\n\n    const statisticType = props.unit ?? classifyStatistic(props.statname)\n    const unitDisplay = getUnitDisplay(statisticType)\n    const { value, unit } = unitDisplay.renderValue(props.value, useImperial, temperatureUnit)\n\n    return (\n        <span style={props.style}>\n            {props.isUnit ? unit : value}\n        </span>\n    )\n}\n\nexport function ElectionResult(props: { value: number }): ReactNode {\n    const colors = useColors()\n    // check if value is NaN\n    if (props.value !== props.value) {\n        return <span>N/A</span>\n    }\n    const value = Math.abs(props.value) * 100\n    const places = value > 10 ? 1 : value > 1 ? 2 : value > 0.1 ? 3 : 4\n    const text = value.toFixed(places)\n    const party = props.value > 0 ? 'D' : 'R'\n    const partyColor = props.value > 0 ? colors.hueColors.blue : colors.hueColors.red\n    const spanStyle: CSSProperties = {\n        color: partyColor,\n        // So that on 4 digits, we overflow left\n        display: 'flex',\n        justifyContent: 'flex-end',\n    }\n    return (\n        <span style={spanStyle}>\n            {party}\n            +\n            {text}\n        </span>\n    )\n}\n\nexport function Percentile(props: {\n    ordinal: number\n    total: number\n    percentileByPopulation: number\n    simpleOrdinals: boolean\n}): ReactNode {\n    const ordinal = props.ordinal\n    const total = props.total\n    if (ordinal > total) {\n        return <span></span>\n    }\n    // percentile as an integer\n    // used to be keyed by a setting, but now we always use percentile_by_population\n    const percentile = props.percentileByPopulation\n    // something like Xth percentile\n    let text = `${percentile}th percentile`\n    if (props.simpleOrdinals) {\n        text = `${percentile.toString()}%`\n    }\n    else if (percentile % 10 === 1 && percentile % 100 !== 11) {\n        text = `${percentile}st percentile`\n    }\n    else if (percentile % 10 === 2 && percentile % 100 !== 12) {\n        text = `${percentile}nd percentile`\n    }\n    else if (percentile % 10 === 3 && percentile % 100 !== 13) {\n        text = `${percentile}rd percentile`\n    }\n    return <div className=\"serif\" style={{ textAlign: 'right', marginRight: props.simpleOrdinals ? '5px' : undefined }}>{text}</div>\n}\n","import React, { ReactNode } from 'react'\n\nimport { separateNumber } from '../utils/text'\nimport { UnitType } from '../utils/unit'\n\nimport { ElectionResult } from './display-stats'\n\nexport interface UnitDisplay {\n    renderValue: (value: number, useImperial?: boolean, temperatureUnit?: string) => {\n        value: ReactNode\n        unit: ReactNode\n    }\n}\n\nexport function getUnitDisplay(unitType: UnitType): UnitDisplay {\n    switch (unitType) {\n        case 'percentage':\n            return {\n                renderValue: (value: number) => {\n                    return {\n                        value: <span>{(value * 100).toFixed(2)}</span>,\n                        unit: <span>%</span>,\n                    }\n                },\n            }\n        case 'fatalities':\n            return {\n                renderValue: (value: number) => {\n                    return {\n                        value: <span>{separateNumber(value.toFixed(0))}</span>,\n                        unit: <span>&nbsp;</span>,\n                    }\n                },\n            }\n        case 'fatalitiesPerCapita':\n            return {\n                renderValue: (value: number) => {\n                    return {\n                        value: <span>{(100_000 * value).toFixed(2)}</span>,\n                        unit: <span>/100k</span>,\n                    }\n                },\n            }\n        case 'density':\n            return {\n                renderValue: (value: number, useImperial?: boolean) => {\n                    let unitName = 'km'\n                    let adjustedValue = value\n                    if (useImperial) {\n                        unitName = 'mi'\n                        adjustedValue *= 1.60934 * 1.60934\n                    }\n                    let places = 2\n                    if (adjustedValue > 10) {\n                        places = 0\n                    }\n                    else if (adjustedValue > 1) {\n                        places = 1\n                    }\n                    return {\n                        value: <span>{separateNumber(adjustedValue.toFixed(places))}</span>,\n                        unit: (\n                            <span>\n                                /&nbsp;\n                                {unitName}\n                                <sup>2</sup>\n                            </span>\n                        ),\n                    }\n                },\n            }\n        case 'population':\n            return {\n                renderValue: (value: number) => {\n                    if (value > 1e9) {\n                        return {\n                            value: <span>{(value / 1e9).toPrecision(3)}</span>,\n                            unit: <span>B</span>,\n                        }\n                    }\n                    if (value > 1e6) {\n                        return {\n                            value: <span>{(value / 1e6).toPrecision(3)}</span>,\n                            unit: <span>m</span>,\n                        }\n                    }\n                    else if (value > 1e4) {\n                        return {\n                            value: <span>{(value / 1e3).toPrecision(3)}</span>,\n                            unit: <span>k</span>,\n                        }\n                    }\n                    else {\n                        return {\n                            value: <span>{separateNumber(value.toFixed(0))}</span>,\n                            unit: <span>&nbsp;</span>,\n                        }\n                    }\n                },\n            }\n        case 'area':\n            return {\n                renderValue: (value: number, useImperial?: boolean) => {\n                    let adjustedValue = value\n                    let unit: React.ReactElement\n                    if (useImperial) {\n                        adjustedValue /= 1.60934 * 1.60934\n                        if (adjustedValue < 1) {\n                            unit = <span>acres</span>\n                            adjustedValue *= 640\n                        }\n                        else {\n                            unit = (\n                                <span>\n                                    mi\n                                    <sup>2</sup>\n                                </span>\n                            )\n                        }\n                    }\n                    else {\n                        if (adjustedValue < 0.01) {\n                            adjustedValue *= 1000 * 1000\n                            unit = (\n                                <span>\n                                    m\n                                    <sup>2</sup>\n                                </span>\n                            )\n                        }\n                        else {\n                            unit = (\n                                <span>\n                                    km\n                                    <sup>2</sup>\n                                </span>\n                            )\n                        }\n                    }\n                    let places = 3\n                    if (adjustedValue > 100) {\n                        places = 0\n                    }\n                    else if (adjustedValue > 10) {\n                        places = 1\n                    }\n                    else if (adjustedValue > 1) {\n                        places = 2\n                    }\n                    let rendered = adjustedValue.toFixed(places)\n                    if (places === 0) {\n                        rendered = separateNumber(rendered)\n                    }\n                    return {\n                        value: <span>{rendered}</span>,\n                        unit,\n                    }\n                },\n            }\n        case 'distanceInKm':\n            return {\n                renderValue: (value: number, useImperial?: boolean) => {\n                    let unit = <span>km</span>\n                    let adjustedValue = value\n                    if (useImperial) {\n                        unit = <span>mi</span>\n                        adjustedValue /= 1.60934\n                    }\n                    return {\n                        value: <span>{adjustedValue.toFixed(2)}</span>,\n                        unit,\n                    }\n                },\n            }\n        case 'distanceInM':\n            return {\n                renderValue: (value: number, useImperial?: boolean) => {\n                    let unitName = 'm'\n                    let adjustedValue = value\n                    if (useImperial) {\n                        unitName = 'ft'\n                        adjustedValue *= 3.28084\n                    }\n                    return {\n                        value: <span>{separateNumber(adjustedValue.toFixed(0))}</span>,\n                        unit: <span>{unitName}</span>,\n                    }\n                },\n            }\n        case 'democraticMargin':\n            return {\n                renderValue: (value: number) => {\n                    return {\n                        value: <ElectionResult value={value} />,\n                        unit: <span>%</span>,\n                    }\n                },\n            }\n        case 'temperature':\n            return {\n                renderValue: (value: number, useImperial?: boolean, temperatureUnit?: string) => {\n                    let unit = <span>&deg;F</span>\n                    let adjustedValue = value\n                    if (temperatureUnit === 'celsius') {\n                        unit = <span>&deg;C</span>\n                        adjustedValue = (value - 32) * (5 / 9)\n                    }\n                    return {\n                        value: <span>{adjustedValue.toFixed(1)}</span>,\n                        unit,\n                    }\n                },\n            }\n        case 'time':\n            return {\n                renderValue: (value: number) => {\n                    const hours = Math.floor(value)\n                    const minutes = Math.floor((value - hours) * 60)\n                    return {\n                        value: (\n                            <span>\n                                {hours}\n                                :\n                                {minutes.toString().padStart(2, '0')}\n                            </span>\n                        ),\n                        unit: <span>&nbsp;</span>,\n                    }\n                },\n            }\n        case 'distancePerYear':\n            return {\n                renderValue: (value: number, useImperial?: boolean) => {\n                    let adjustedValue = value * 100\n                    let unit = 'cm'\n                    if (useImperial) {\n                        unit = 'in'\n                        adjustedValue /= 2.54\n                    }\n                    return {\n                        value: <span>{adjustedValue.toFixed(1)}</span>,\n                        unit: (\n                            <span>\n                                {unit}\n                                /yr\n                            </span>\n                        ),\n                    }\n                },\n            }\n        case 'contaminantLevel':\n            return {\n                renderValue: (value: number) => {\n                    return {\n                        value: <span>{value.toFixed(2)}</span>,\n                        unit: (\n                            <span>\n                                &mu;g/m\n                                <sup>3</sup>\n                            </span>\n                        ),\n                    }\n                },\n            }\n        case 'number':\n            return {\n                renderValue: (value: number) => {\n                    return {\n                        value: <span>{value.toFixed(3)}</span>,\n                        unit: <span>&nbsp;</span>,\n                    }\n                },\n            }\n        case 'usd':\n            return {\n                renderValue: (value: number) => {\n                    if (value > 1e9) {\n                        return {\n                            value: (\n                                <span>\n                                    $\n                                    {(value / 1e9).toPrecision(3)}\n                                </span>\n                            ),\n                            unit: <span>B</span>,\n                        }\n                    }\n                    if (value > 1e6) {\n                        return {\n                            value: (\n                                <span>\n                                    $\n                                    {(value / 1e6).toPrecision(3)}\n                                </span>\n                            ),\n                            unit: <span>m</span>,\n                        }\n                    }\n                    else if (value > 1e3) {\n                        return {\n                            value: (\n                                <span>\n                                    $\n                                    {(value / 1e3).toPrecision(3)}\n                                </span>\n                            ),\n                            unit: <span>k</span>,\n                        }\n                    }\n                    else {\n                        return {\n                            value: (\n                                <span>\n                                    $\n                                    {separateNumber(value.toFixed(0))}\n                                </span>\n                            ),\n                            unit: <span>&nbsp;</span>,\n                        }\n                    }\n                },\n            }\n        case 'minutes':\n            return {\n                renderValue: (value: number) => {\n                    const hours = Math.floor(value / 60)\n                    const minutes = Math.floor(value % 60)\n\n                    if (hours > 0) {\n                        return {\n                            value: (\n                                <span>\n                                    {hours}\n                                    :\n                                    {minutes.toString().padStart(2, '0')}\n                                </span>\n                            ),\n                            unit: <span>&nbsp;</span>,\n                        }\n                    }\n                    else {\n                        return {\n                            value: <span>{minutes}</span>,\n                            unit: <span>&nbsp;</span>,\n                        }\n                    }\n                },\n            }\n    }\n}\n\nexport function classifyStatistic(statname: string): UnitType {\n    if (statname.includes('%') || statname.includes('Change') || statname.includes('(Grade)')) {\n        return 'percentage'\n    }\n    if (statname.includes('Total') && statname.includes('Fatalities')) {\n        return 'fatalities'\n    }\n    if (statname.includes('Fatalities Per Capita')) {\n        return 'fatalitiesPerCapita'\n    }\n    if (statname.includes('Density')) {\n        return 'density'\n    }\n    if (statname.includes('Elevation')) {\n        return 'distanceInM'\n    }\n    if (statname.startsWith('Population')) {\n        return 'population'\n    }\n    if (statname === 'Area') {\n        return 'area'\n    }\n    if (statname.includes('Mean distance')) {\n        return 'distanceInKm'\n    }\n    if (statname.includes('Election') || statname.includes('Swing')) {\n        return 'democraticMargin'\n    }\n    if (statname.includes('high temp') || statname.includes('low temp') || statname.includes('high heat index') || statname.includes('dewpt')) {\n        return 'temperature'\n    }\n    if (statname === 'Mean sunny hours') {\n        return 'time'\n    }\n    if (statname === 'Rainfall' || statname === 'Snowfall [rain-equivalent]') {\n        return 'distancePerYear'\n    }\n    if (statname.includes('Pollution')) {\n        return 'contaminantLevel'\n    }\n    if (statname.includes('(USD)')) {\n        return 'usd'\n    }\n    if (statname.includes('(min)')) {\n        return 'minutes'\n    }\n    return 'number'\n}\n","import React, { CSSProperties, ReactNode, useRef, useState, useEffect } from 'react'\nimport ContentEditable, { ContentEditableEvent } from 'react-contenteditable'\n\nexport function EditableString(props: { content: string, onNewContent: (content: string) => void, style: CSSProperties, inputMode: 'text' | 'decimal' }): ReactNode {\n    /*\n     * This code is weird because the `ContentEditable` needs to use refs.\n     * See https://www.npmjs.com/package/react-contenteditable\n     */\n    const contentEditable: React.Ref<HTMLElement> = useRef(null)\n    const html = useRef(props.content.toString())\n    const [, setCounter] = useState(0)\n\n    // Otherwise, this component can display the wrong number when props change\n    useEffect(() => {\n        html.current = props.content.toString()\n        setCounter(count => count + 1)\n    }, [props.content])\n\n    const handleChange = (evt: ContentEditableEvent): void => {\n        html.current = evt.target.value\n    }\n\n    const handleSubmit = (): void => {\n        const content = contentEditable.current!.innerText\n        if (content !== props.content) {\n            props.onNewContent(content)\n        }\n    }\n\n    const selectAll = (): void => {\n        setTimeout(() => {\n            const range = document.createRange()\n            range.selectNodeContents(contentEditable.current!)\n            const selection = window.getSelection()\n            selection?.removeAllRanges()\n            selection?.addRange(range)\n        }, 0)\n    }\n\n    return (\n        <ContentEditable\n            className=\"editable_content\"\n            style={props.style}\n            innerRef={contentEditable}\n            html={html.current}\n            disabled={false}\n            onChange={handleChange}\n            onKeyDown={(e: React.KeyboardEvent) => {\n                if (e.key === 'Enter') {\n                    handleSubmit()\n                    e.preventDefault()\n                }\n            }}\n            onBlur={handleSubmit}\n            tagName=\"span\" // Use a custom HTML tag (uses a div by default)\n            inputMode={props.inputMode}\n            onFocus={selectAll}\n        />\n    )\n}\n\nexport function EditableNumber(props: { number: number, onNewNumber: (number: number) => void }): ReactNode {\n    const onNewContent = (content: string): void => {\n        const number = parseInt(content)\n        if (!Number.isNaN(number) && number !== props.number) {\n            props.onNewNumber(number)\n        }\n    }\n    return (\n        <EditableString\n            content={props.number.toString()}\n            onNewContent={onNewContent}\n            style={{ minWidth: '2em', display: 'inline-block' }}\n            inputMode=\"decimal\"\n        />\n    )\n}\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./quiz.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./quiz.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { ReactNode } from 'react'\n\nimport { ErrorBox } from '../ErrorBox'\n\nimport { AuthenticationStateMachine } from './AuthenticationStateMachine'\n\nexport function SignedOutPanel(): ReactNode {\n    const startSignIn = AuthenticationStateMachine.shared.useStartSignIn()\n    const authState = AuthenticationStateMachine.shared.useState()\n\n    return (\n        <ErrorBox>\n            <h1>You were signed out</h1>\n            <p>\n                Sign back in to\n                {' '}\n                <b>{authState.email}</b>\n                {' '}\n                ensure your quiz progress continues syncing.\n            </p>\n            <button style={{ margin: '1em', padding: '0.5em 1em' }} onClick={() => { startSignIn?.() }}>\n                Sign In\n            </button>\n            <button style={{ margin: '1em', padding: '0.5em 1em' }} onClick={() => { void AuthenticationStateMachine.shared.userSignOut() }}>\n                Sign Out\n            </button>\n        </ErrorBox>\n    )\n}\n","import React, { ReactNode } from 'react'\n\nimport '../common.css'\nimport '../components/quiz.css'\nimport { useColors, useJuxtastatColors } from '../page_template/colors'\nimport { useHeaderTextClass } from '../utils/responsive'\n\nimport { AuthenticationStateMachine } from './AuthenticationStateMachine'\nimport { juxtaInfiniteCorrectForBonus } from './infinite'\nimport { nameOfQuizKind, QuizHistory, QuizKind, QuizModel } from './quiz'\n\nexport function Header({ quiz }: { quiz: { kind: QuizKind, name: string | number } }): ReactNode {\n    let text = nameOfQuizKind(quiz.kind)\n    if (typeof quiz.name !== 'number' && quiz.kind !== 'infinite') {\n        text += ` ${quiz.name}`\n    }\n    return (<div className={useHeaderTextClass()}>{text}</div>)\n}\n\nexport function Footer(props: { length: number, history: QuizHistory[string] }): ReactNode {\n    const colors = useColors()\n    const juxtaColors = useJuxtastatColors()\n    const footerColors: string[] = props.history.correct_pattern.map(\n        correct => correct ? juxtaColors.correct : juxtaColors.incorrect,\n    )\n    while (footerColors.length < props.length) {\n        footerColors.push(colors.unselectedButton)\n    }\n    return (\n        <table className=\"quiz_footer\">\n            <tbody>\n                <tr>\n                    {footerColors.map((x, i) =>\n                        <td key={i} style={{ backgroundColor: x }}></td>,\n                    )}\n                </tr>\n            </tbody>\n        </table>\n    )\n}\n\nexport function Help(props: { quizKind: QuizKind }): ReactNode {\n    const text = (): string => {\n        switch (props.quizKind) {\n            case 'juxtastat':\n                return 'Select the geographical region answering the question. The questions get harder as you go on.'\n            case 'retrostat':\n                return 'Select the easier question. A question is considered easier if more people got it right.'\n            case 'custom':\n                return 'Select the geographical region answering the question.'\n            case 'infinite':\n                return `Select the geographical region answering the question. You lose when you run out of lives.`\n                    + ` You gain lives by getting ${juxtaInfiniteCorrectForBonus} questions right in a row.`\n        }\n    }\n    return (\n        <div className=\"centered_text serif\">\n            {text()}\n            {' '}\n            {UserId()}\n            {ExportImport()}\n        </div>\n    )\n}\n\nexport function UserId(): ReactNode {\n    const user = QuizModel.shared.uniquePersistentId.use()\n    return (\n        <div>\n            {'Your user id is '}\n            <span className=\"juxtastat-user-id\">{user}</span>\n            {'. '}\n            <QuizAuthStatus />\n        </div>\n    )\n}\n\nexport function QuizAuthStatus(): ReactNode {\n    const state = AuthenticationStateMachine.shared.useState()\n\n    const startSignIn = AuthenticationStateMachine.shared.useStartSignIn()\n\n    if (state.state === 'signedOut') {\n        const signIn = (e: React.MouseEvent): void => {\n            e.preventDefault()\n            startSignIn?.()\n        }\n        return (\n            <>\n                <a href=\"\" data-test=\"googleSignIn\" onClick={signIn}>Sign In with Google</a>\n                {' to sync your quiz history across devices.'}\n            </>\n        )\n    }\n    else {\n        const signOut = (e: React.MouseEvent): void => {\n            e.preventDefault()\n            void AuthenticationStateMachine.shared.userSignOut()\n        }\n\n        return (\n            <>\n                {`Signed in with ${state.email}. `}\n                <a href=\"\" onClick={signOut}>Sign Out</a>\n            </>\n        )\n    }\n}\n\nexport function ExportImport(): ReactNode {\n    return (\n        <div style={{ marginTop: '5px' }}>\n            <button onClick={() => { QuizModel.shared.exportQuizPersona() }}>\n                Export Quiz History\n            </button>\n            {' '}\n            <button onClick={() => { void QuizModel.shared.importQuizPersona() }}>\n                Import Quiz History\n            </button>\n        </div>\n    )\n}\n","import '../common.css'\nimport '../components/quiz.css'\n\nimport React, { ReactNode } from 'react'\nimport { isFirefox } from 'react-device-detect'\n\nimport { MapGeneric, MapGenericProps, ShapeRenderingSpec } from '../components/map'\nimport { useColors } from '../page_template/colors'\nimport { useMobileLayout } from '../utils/responsive'\n\nimport { JuxtastatLivesDisplay } from './infinite'\nimport { JuxtaQuestion, QuizHistory, QuizKind, RetroQuestion, aCorrect } from './quiz'\nimport { Footer, Header, Help } from './quiz-components'\n\ninterface MapProps extends MapGenericProps {\n    longname: string\n    color: string\n}\n\nclass Map extends MapGeneric<MapProps> {\n    override computeShapesToRender(): Promise<ShapeRenderingSpec> {\n        return Promise.resolve({\n            shapes: [\n                {\n                    name: this.props.longname,\n                    spec: { type: 'polygon', style: { fillOpacity: 0.5, weight: 1, color: this.props.color, fillColor: this.props.color } },\n                    meta: {},\n                    notClickable: true,\n                },\n            ],\n            zoomIndex: 0,\n        })\n    }\n}\n\nexport function QuizQuestionDispatch(props: QuizQuestionProps & (\n    { question: JuxtaQuestion | RetroQuestion }\n)): ReactNode {\n    switch (props.question.kind) {\n        case 'retrostat':\n            return <RetroQuizQuestion {...props} question={props.question} />\n        case 'juxtastat':\n            return <JuxtastatQuizQuestion {...props} question={props.question} />\n        default:\n            throw new Error('Invalid question kind')\n    }\n}\n\ninterface QuizQuestionProps {\n    waiting: boolean\n    history: QuizHistory[string]\n    nested: boolean\n    noHeader: boolean\n    noFooter: boolean\n    quiz: { kind: QuizKind, name: number | string }\n    onSelect: (letter: 'A' | 'B') => void\n    length: number\n}\n\nfunction QuizQuestion(props: QuizQuestionProps & {\n    getQuestion: () => ReactNode\n    getOption: (letter: 'a' | 'b') => ReactNode\n    getDemo: (letter: 'a' | 'b') => ReactNode\n}): ReactNode {\n    let buttonA = 'quiz_clickable'\n    let buttonB = 'quiz_clickable'\n    if (props.waiting) {\n        const choices = props.history.choices\n        const pattern = props.history.correct_pattern\n        const choice = choices[choices.length - 1]\n        const correct = pattern[pattern.length - 1]\n        const cssClass = correct ? ' quiz_correct' : ' quiz_incorrect'\n        if (choice === 'A') {\n            buttonA += cssClass\n        }\n        else {\n            buttonB += cssClass\n        }\n    }\n\n    const question = props.getQuestion()\n\n    const buttonStyle: React.CSSProperties = {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'column',\n        padding: '0.5em',\n    }\n\n    const rowStyle = { display: 'flex', justifyContent: 'center', width: '90%', margin: 'auto' }\n\n    let quizTextCSS = useMobileLayout() ? 'quiztext_mobile' : 'quiztext'\n    if (props.nested) {\n        quizTextCSS += '_nested'\n    }\n\n    return (\n        <div>\n            {props.noHeader ? undefined : <Header quiz={props.quiz} />}\n            <div className={`centered_text ${quizTextCSS}`}>\n                {question}\n            </div>\n            <div className=\"gap\"></div>\n            <div style={rowStyle}>\n                <div style={{ width: '50%', padding: '0.5em' }}>\n                    <div role=\"button\" id=\"quiz-answer-button-a\" className={buttonA} onClick={() => { props.onSelect('A') }} style={buttonStyle}>\n                        <span style={{ margin: 'auto' }}>\n                            <div className={`centered_text ${quizTextCSS}`}>\n                                {props.getOption('a')}\n                            </div>\n                        </span>\n                    </div>\n                </div>\n                <div style={{ width: '50%', padding: '0.5em' }}>\n                    <div role=\"button\" id=\"quiz-answer-button-b\" className={buttonB} onClick={() => { props.onSelect('B') }} style={buttonStyle}>\n                        <span style={{ margin: 'auto' }}>\n                            <div className={`centered_text ${quizTextCSS}`}>\n                                {props.getOption('b')}\n                            </div>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div style={rowStyle}>\n                <div style={{ width: '50%', padding: '0.5em' }}>\n                    {props.getDemo('a')}\n                </div>\n                <div style={{ width: '50%', padding: '0.5em' }}>\n                    {props.getDemo('b')}\n                </div>\n            </div>\n            {props.noFooter\n                ? undefined\n                : (\n                        <>\n                            {props.quiz.kind === 'infinite'\n                                ? <JuxtastatLivesDisplay correctPattern={props.history.correct_pattern.map(x => x ? true : false)} />\n                                : undefined}\n                            <Footer history={props.history} length={props.length} />\n                            <Help quizKind={props.quiz.kind} />\n                        </>\n                    )}\n        </div>\n    )\n}\n\nfunction RetroQuizQuestion(props: QuizQuestionProps & { question: RetroQuestion }): ReactNode {\n    const getDemo = (key: 'a' | 'b'): ReactNode => {\n        const keyUpper = aCorrect(props.question[key]) ? 'A' : 'B'\n        return (\n            <div style={{ zoom: 0.5 }}>\n                <JuxtastatQuizQuestion\n                    question={props.question[key]}\n                    history={{ choices: [keyUpper], correct_pattern: [true] }}\n                    length={5}\n                    onSelect={() => undefined}\n                    waiting={true}\n                    quiz={{ kind: 'juxtastat', name: 'demo' }}\n                    noHeader={true}\n                    noFooter={true}\n                    nested={isFirefox} // Firefox doesn't support zoom so we use special CSS for nested questions\n                />\n            </div>\n        )\n    }\n\n    return (\n        <QuizQuestion\n            {...props}\n            getQuestion={() => 'Which question was easier?'}\n            getOption={letter => `Question ${letter.toUpperCase()}`}\n            getDemo={getDemo}\n        />\n    )\n}\n\nfunction JuxtastatQuizQuestion(props: QuizQuestionProps & {\n    question: JuxtaQuestion\n}): ReactNode {\n    const colors = useColors()\n    return (\n        <QuizQuestion\n            {...props}\n            getQuestion={() => renderQuestion(props.question.question)}\n            getOption={letter => props.question[`longname_${letter}`]}\n            getDemo={letter => (\n                <Map\n                    longname={props.question[`longname_${letter}`]}\n                    basemap={{ type: 'osm' }}\n                    color={colors.hueColors.blue}\n                    attribution={letter === 'b' ? 'startHidden' : 'none'}\n                />\n            )}\n        />\n    )\n}\n\nexport function questionString(question: string): string {\n    if (question.startsWith('!FULL ')) {\n        return question.slice(6)\n    }\n    return `Which has a ${question}?`\n}\n\nexport function renderQuestion(questionText: string): ReactNode {\n    if (questionText.includes('!TOOLTIP')) {\n        const [question, tooltip] = questionText.split('!TOOLTIP ')\n        return (\n            <span>\n                {questionString(question)}\n                <Tooltip content={tooltip} />\n            </span>\n        )\n    }\n    const q = questionString(questionText)\n    return q\n}\n\nexport function Tooltip(props: { content: ReactNode }): ReactNode {\n    // create an image that looks like a little [?] text superscript that when you click on it\n    // shows the tooltip\n    const [show, setShow] = React.useState(false)\n    return (\n        <span>\n            <sup>\n                <div\n                    style={{\n                        cursor: 'pointer',\n                        fontSize: 'smaller',\n                        margin: '5px',\n                        fontWeight: 'bold',\n                        border: 'none',\n                        display: 'unset',\n                        height: 'unset',\n                        padding: '0px 5px',\n                    }}\n                    onClick={() => { setShow(!show) }}\n                    className=\"quiz_clickable\"\n                    role=\"button\"\n                >\n                    {'\\ufe0e'}\n                </div>\n            </sup>\n            {show\n                ? (\n                        <div style={{ fontSize: '20px' }}>\n                            (\n                            {props.content}\n                            )\n                        </div>\n                    )\n                : undefined}\n        </span>\n    )\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from \"react\";\nimport { cssValue, parseLengthAndUnit } from \"./helpers/unitConverter\";\nimport { createAnimation } from \"./helpers/animation\";\nvar grid = createAnimation(\"GridLoader\", \"0% {transform: scale(1)} 50% {transform: scale(0.5); opacity: 0.7} 100% {transform: scale(1); opacity: 1}\", \"grid\");\nvar random = function (top) { return Math.random() * top; };\nfunction GridLoader(_a) {\n    var _b = _a.loading, loading = _b === void 0 ? true : _b, _c = _a.color, color = _c === void 0 ? \"#000000\" : _c, _d = _a.speedMultiplier, speedMultiplier = _d === void 0 ? 1 : _d, _e = _a.cssOverride, cssOverride = _e === void 0 ? {} : _e, _f = _a.size, size = _f === void 0 ? 15 : _f, _g = _a.margin, margin = _g === void 0 ? 2 : _g, additionalprops = __rest(_a, [\"loading\", \"color\", \"speedMultiplier\", \"cssOverride\", \"size\", \"margin\"]);\n    var sizeWithUnit = parseLengthAndUnit(size);\n    var marginWithUnit = parseLengthAndUnit(margin);\n    var width = parseFloat(sizeWithUnit.value.toString()) * 3 + parseFloat(marginWithUnit.value.toString()) * 6;\n    var wrapper = __assign({ width: \"\".concat(width).concat(sizeWithUnit.unit), fontSize: 0, display: \"inline-block\" }, cssOverride);\n    var style = function (rand) {\n        return {\n            display: \"inline-block\",\n            backgroundColor: color,\n            width: \"\".concat(cssValue(size)),\n            height: \"\".concat(cssValue(size)),\n            margin: cssValue(margin),\n            borderRadius: \"100%\",\n            animationFillMode: \"both\",\n            animation: \"\".concat(grid, \" \").concat((rand / 100 + 0.6) / speedMultiplier, \"s \").concat(rand / 100 - 0.2, \"s infinite ease\"),\n        };\n    };\n    if (!loading) {\n        return null;\n    }\n    return (React.createElement(\"span\", __assign({ style: wrapper }, additionalprops, { ref: function (node) {\n            if (node) {\n                node.style.setProperty(\"width\", \"\".concat(width).concat(sizeWithUnit.unit), \"important\");\n            }\n        } }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) }),\n        React.createElement(\"span\", { style: style(random(100)) })));\n}\nexport default GridLoader;\n","import React, { CSSProperties, ReactNode, useContext, useEffect, useState } from 'react'\nimport { GridLoader, MoonLoader } from 'react-spinners'\n\nimport { EditableString } from '../components/editable-field'\nimport { Navigator } from '../navigation/Navigator'\nimport { urlFromPageDescriptor } from '../navigation/PageDescriptor'\nimport { useColors, useJuxtastatColors } from '../page_template/colors'\nimport { mixWithBackground } from '../utils/color'\nimport { persistentClient } from '../utils/urbanstats-persistent-client'\n\nimport { AuthenticationStateMachine } from './AuthenticationStateMachine'\nimport { addFriend } from './friends'\nimport { QuizDescriptorWithTime, QuizDescriptorWithStats, QuizFriends, QuizModel, QuizDescriptor } from './quiz'\nimport { CorrectPattern } from './quiz-result'\nimport { parseTimeIdentifier } from './statistics'\n\nexport type ResultToDisplayForFriends = { corrects: CorrectPattern | null } | { forThisSeed: number | null, maxScore: number | null, maxScoreSeed: string | null, maxScoreVersion: number | null }\n\ntype FriendResponse = { result: ResultToDisplayForFriends, friends: true } | { friends: false }\ntype FriendScore = { name?: string } & FriendResponse\n\nasync function juxtaRetroResponse(\n    quizDescriptor: QuizDescriptorWithTime,\n    requesters: string[],\n): Promise<FriendResponse[] | undefined> {\n    const date = parseTimeIdentifier(quizDescriptor.kind, quizDescriptor.name.toString())\n    const { data: friendScoresResponse } = await persistentClient.POST('/juxtastat/todays_score_for', {\n        params: {\n            header: QuizModel.shared.userHeaders(),\n        },\n        body: {\n            date,\n            requesters,\n            quiz_kind: quizDescriptor.kind,\n        },\n    })\n    if (friendScoresResponse === undefined) {\n        return undefined // Probably some sort of auth error, handled elsewhere\n    }\n    return friendScoresResponse.results.map(x => x.friends ? { friends: true, result: x } : { friends: false })\n}\n\nasync function infiniteResponse(\n    quizDescriptor: QuizDescriptor & { kind: 'infinite' },\n    requesters: string[],\n): Promise<FriendResponse[] | undefined> {\n    const { data: friendScoresResponse } = await persistentClient.POST('/juxtastat/infinite_results', {\n        params: {\n            header: QuizModel.shared.userHeaders(),\n        },\n        body: {\n            requesters, seed: quizDescriptor.seed, version: quizDescriptor.version,\n        },\n    })\n    if (friendScoresResponse === undefined) {\n        return undefined // Probably some sort of auth error, handled elsewhere\n    }\n    return friendScoresResponse.results.map(x => x.friends ? { friends: true, result: x } : { friends: false })\n}\n\nexport function QuizFriendsPanel(props: {\n    quizFriends: QuizFriends\n    setQuizFriends: (quizFriends: QuizFriends) => void\n    quizDescriptor: QuizDescriptorWithStats\n    myResult: ResultToDisplayForFriends\n}): ReactNode {\n    const colors = useColors()\n\n    const [friendScores, setFriendScores] = useState([] as FriendScore[])\n    const [isLoading, setIsLoading] = useState(false)\n    const [error, setError] = useState<string | undefined>(undefined)\n\n    const user = QuizModel.shared.uniquePersistentId.use()\n    const secureID = QuizModel.shared.uniqueSecureId.use()\n\n    useEffect(() => {\n        void (async () => {\n            setIsLoading(true)\n            setError(undefined)\n            try {\n                const friends = props.quizFriends.filter(([name]) => name !== null) as [string, string, number | undefined][]\n                // map name to id for quizFriends\n                const quizIDtoName = Object.fromEntries(friends.map(([name, id]) => [id, name]))\n                const requesters = friends.map(x => x[1])\n                const friendScoresResponse\n                    = props.quizDescriptor.kind === 'infinite'\n                        ? await infiniteResponse(props.quizDescriptor, requesters)\n                        : await juxtaRetroResponse(props.quizDescriptor, requesters)\n                if (friendScoresResponse === undefined) {\n                    return\n                }\n                setFriendScores(friendScoresResponse.map(\n                    (x, idx) => ({ name: quizIDtoName[requesters[idx]], ...x }),\n                ))\n            }\n            catch {\n                setError('Network Error')\n            }\n            finally {\n                setIsLoading(false)\n            }\n        })()\n    }, [props.quizDescriptor, props.quizFriends, user, secureID])\n\n    const allResults = [props.myResult, ...friendScores.flatMap(x => x.friends ? [x.result] : [])]\n\n    const content = (\n        <div>\n            <div style={{ margin: 'auto', width: '100%' }}>\n                <div className=\"quiz_summary\">Friends</div>\n            </div>\n            <>\n                {props.quizDescriptor.kind === 'infinite' ? <InfiniteHeader /> : undefined}\n                <PlayerScore result={props.myResult} otherResults={allResults} />\n\n                {\n                    friendScores.map((friendScore, idx) => (\n                        <FriendScore\n                            key={idx}\n                            index={idx}\n                            friendScore={friendScore}\n                            removeFriend={async () => {\n                                await persistentClient.POST('/juxtastat/unfriend', {\n                                    params: {\n                                        header: QuizModel.shared.userHeaders(),\n                                    },\n                                    body: {\n                                        requestee: props.quizFriends[idx][1],\n                                    },\n                                })\n                                const newQuizFriends = props.quizFriends.map<[string | null, string, number] | [string, string]>(tuple => tuple[0] === friendScore.name ? [null, tuple[1], Date.now()] : tuple)\n                                props.setQuizFriends(newQuizFriends)\n                            }}\n                            quizFriends={props.quizFriends}\n                            setQuizFriends={props.setQuizFriends}\n                            otherResults={allResults}\n                        />\n                    ),\n                    )\n                }\n            </>\n            <div style={{ height: '1em' }} />\n            <AddFriend />\n        </div>\n    )\n\n    const spinnerSize = '78px'\n    const spinnerStyle: CSSProperties = {\n        position: 'absolute',\n        left: `calc(50% - ${spinnerSize} / 2)`,\n        top: `calc(50% - ${spinnerSize} / 2)`,\n    }\n\n    return (\n        <div style={{ position: 'relative' }}>\n            <div style={{ opacity: isLoading ? 0.5 : 1, pointerEvents: isLoading ? 'none' : undefined }}>\n                <WithError content={content} error={error} />\n            </div>\n            {isLoading ? <MoonLoader size={spinnerSize} color={colors.textMain} cssOverride={spinnerStyle} /> : null}\n        </div>\n    )\n}\n\nfunction InfiniteHeader(): ReactNode {\n    return (\n        <div\n            style={{ display: 'flex', flexDirection: 'row', height: scoreCorrectHeight, alignItems: 'center' }}\n            className=\"testing-friends-section\"\n        >\n            <div style={{ width: '25%' }} />\n            <div style={{ width: '50%', display: 'flex', flexDirection: 'row' }}>\n                <div style={{ width: '50%', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                    On This Seed\n                </div>\n                <div style={{ width: '50%', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                    Overall Best\n                </div>\n            </div>\n            <div style={{ width: '25%' }} />\n        </div>\n    )\n}\n\nconst scoreCorrectHeight = '2em'\nconst addFriendHeight = '1.5em'\n\nfunction PlayerScore(props: { result: ResultToDisplayForFriends, otherResults: ResultToDisplayForFriends[] }): ReactNode {\n    const copyFriendLink = async (): Promise<void> => {\n        const playerName = prompt('Enter your name:')\n\n        if (playerName === null) {\n            return\n        }\n\n        const hash = urlFromPageDescriptor({ kind: 'quiz', id: AuthenticationStateMachine.shared.state.email ?? QuizModel.shared.uniquePersistentId.value, name: playerName }).hash\n        const url = `https://juxtastat.org/${hash}`\n\n        await navigator.clipboard.writeText(url)\n\n        alert('Link copied to clipboard!')\n    }\n\n    return (\n        <div\n            style={{ display: 'flex', flexDirection: 'row', height: scoreCorrectHeight, alignItems: 'center' }}\n            className=\"testing-friends-section\"\n        >\n            <div style={{ width: '25%' }}>\n                You\n            </div>\n            <div style={{ width: '50%' }}>\n                <FriendScoreCorrects result={props.result} friends={true} otherResults={props.otherResults} />\n            </div>\n            <div style={{ width: '25%', display: 'flex', height: addFriendHeight }}>\n                <button\n                    onClick={copyFriendLink}\n                    style={{ marginLeft: '1em' }}\n                    data-test-id=\"friend-link-button\"\n                >\n                    Copy Link\n                </button>\n            </div>\n        </div>\n    )\n}\n\nfunction FriendScore(props: {\n    index: number\n    friendScore: FriendScore\n    removeFriend: () => Promise<void>\n    quizFriends: QuizFriends\n    setQuizFriends: (x: QuizFriends) => void\n    otherResults: ResultToDisplayForFriends[]\n}): ReactNode {\n    const colors = useColors()\n\n    const [error, setError] = useState<string | undefined>(undefined)\n    const [loading, setLoading] = useState(false)\n\n    const renameFriend = (name: string): void => {\n        if (name === '') {\n            setError('Friend name cannot be empty')\n            return\n        }\n        if (props.quizFriends.map(x => x[0]).includes(name)) {\n            setError('Friend name already exists')\n            return\n        }\n        const newQuizFriends = [...props.quizFriends]\n        newQuizFriends[props.index] = [name, props.quizFriends[props.index][1], Date.now()]\n        props.setQuizFriends(newQuizFriends)\n        setError(undefined)\n    }\n\n    const removeFriend = async (): Promise<void> => {\n        setLoading(true)\n        try {\n            await props.removeFriend()\n        }\n        catch {\n            setError('Network Error')\n        }\n        finally {\n            setLoading(false)\n        }\n    }\n\n    const row = (\n        <div\n            style={{ display: 'flex', flexDirection: 'row', height: scoreCorrectHeight, alignItems: 'center' }}\n            className=\"testing-friends-section\"\n        >\n            <div style={{ width: '25%' }}>\n                <EditableString\n                    content={props.friendScore.name ?? 'Unknown'}\n                    onNewContent={renameFriend}\n                    style={{ width: '100%', height: '100%' }}\n                    inputMode=\"text\"\n                />\n            </div>\n            <div style={{ width: '50%' }}>\n                <FriendScoreCorrects {...props.friendScore} otherResults={props.otherResults} />\n            </div>\n            <div style={{ width: '25%', display: 'flex', height: addFriendHeight }}>\n                <button\n                    onClick={removeFriend}\n                    style={{ marginLeft: '1em' }}\n                    disabled={loading}\n                >\n                    Remove\n                </button>\n                {loading ? <GridLoader color={colors.textMain} size=\"4px\" cssOverride={{ marginLeft: '10px' }} /> : null}\n\n            </div>\n        </div>\n    )\n    return <WithError error={error} content={row} />\n}\n\nfunction FriendScoreCorrects(props: FriendScore & { otherResults: ResultToDisplayForFriends[] }): ReactNode {\n    const colors = useColors()\n    const juxtaColors = useJuxtastatColors()\n    const navContext = useContext(Navigator.Context)\n    const border = `1px solid ${colors.background}`\n    const greyedOut = {\n        backgroundColor: mixWithBackground(colors.hueColors.orange, 0.5, colors.background),\n        width: '100%',\n        height: scoreCorrectHeight,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        border,\n    }\n    if (!props.friends) {\n        return (\n            <div style={greyedOut}>\n                Ask&nbsp;\n                <b>\n                    {props.name}\n                </b>\n                &nbsp;to add you\n            </div>\n        )\n    }\n    if ('forThisSeed' in props.result) {\n        const link\n            = props.result.maxScoreSeed === null || props.result.maxScoreVersion === null\n                // eslint-disable-next-line @typescript-eslint/no-empty-function -- this is a dummy onClick function for when there is no link\n                ? { href: undefined, onClick: () => { } }\n                : navContext.link({\n                    kind: 'quiz', mode: 'infinite', seed: props.result.maxScoreSeed, v: props.result.maxScoreVersion,\n                }, { scroll: { kind: 'position', top: 0 } })\n        const relevantOtherResults = props.otherResults.filter(\n            x => 'forThisSeed' in x,\n        )\n        const baseStyle = { width: '50%', border, display: 'flex', justifyContent: 'center', alignItems: 'center', color: colors.buttonTextWhite, fontWeight: 'bold' }\n        const maxMaxScore = Math.max(...relevantOtherResults.map(x => x.maxScore ?? 0)) === props.result.maxScore\n        const maxForThisSeed = Math.max(...relevantOtherResults.map(x => x.forThisSeed ?? 0)) === props.result.forThisSeed\n        return (\n            <div style={{ display: 'flex', flexDirection: 'row', height: scoreCorrectHeight }}>\n                <div style={{ ...baseStyle, backgroundColor: maxForThisSeed ? colors.hueColors.green : colors.hueColors.blue }}>\n                    {props.result.forThisSeed ?? '-'}\n                </div>\n                <div\n                    style={{ ...baseStyle, backgroundColor: maxMaxScore ? colors.hueColors.green : colors.hueColors.blue }}\n                    onClick={link.onClick}\n                >\n                    <a style={{ textDecoration: 'none', color: colors.buttonTextWhite }} href={link.href}>{props.result.maxScore ?? '-'}</a>\n                </div>\n            </div>\n        )\n    }\n    if (props.result.corrects === null) {\n        return (\n            <div style={greyedOut}>Not Done Yet</div>\n        )\n    }\n    const corrects = props.result.corrects\n    return (\n        <div\n            className=\"testing-friend-score\"\n            style={{ display: 'flex', flexDirection: 'row', height: scoreCorrectHeight }}\n        >\n            {corrects.map((correct, idx) => {\n                const color = correct ? juxtaColors.correct : juxtaColors.incorrect\n                return (\n                    <div\n                        className={correct ? 'testing-friend-score-correct' : 'testing-friend-score-incorrect'}\n                        key={idx}\n                        style={{\n                            backgroundColor: color,\n                            color,\n                            width: `${100 / corrects.length}%`,\n                            border,\n                        }}\n                    >\n                        {correct ? 'y' : 'n'}\n                    </div>\n                )\n            })}\n        </div>\n    )\n}\n\nfunction AddFriend(): ReactNode {\n    const colors = useColors()\n\n    const [friendNameField, setFriendNameField] = useState('')\n    const [friendIDField, setFriendIDField] = useState('')\n    const [error, setError] = useState<string | undefined>(undefined)\n    const [loading, setLoading] = useState(false)\n\n    const addFriendClick = async (): Promise<void> => {\n        const friendID = friendIDField.trim()\n        const friendName = friendNameField.trim()\n        setLoading(true)\n        const result = await addFriend(friendID, friendName)\n        setLoading(false)\n        if (result !== undefined) {\n            setError(result.errorMessage)\n        }\n        else {\n            setError(undefined)\n            setFriendNameField('')\n            setFriendIDField('')\n        }\n    }\n\n    const form = (\n        <div style={{ display: 'flex', flexDirection: 'row', height: addFriendHeight, alignItems: 'center' }}>\n            <div\n                style={{ width: '37.5%', padding: '0 0.2em' }}\n            >\n                <input\n                    type=\"text\"\n                    placeholder=\"Friend Name\"\n                    value={friendNameField}\n                    style={{ width: '100%', height: '100%' }}\n                    onChange={(e) => { setFriendNameField(e.target.value) }}\n                    disabled={loading}\n                />\n            </div>\n            <div\n                style={{ width: '37.5%', padding: '0 0.2em', height: addFriendHeight }}\n            >\n                <input\n                    type=\"text\"\n                    placeholder=\"Friend ID or Email\"\n                    value={friendIDField}\n                    style={{ width: '100%', height: '100%' }}\n                    onChange={(e) => { setFriendIDField(e.target.value) }}\n                    disabled={loading}\n                />\n            </div>\n            <div style={{ width: '25%', display: 'flex', height: addFriendHeight }}>\n                <button\n                    onClick={addFriendClick}\n                    style={{ marginLeft: '1em', height: '100%' }}\n                    disabled={loading}\n                >\n                    Add\n                </button>\n                {loading ? <GridLoader color={colors.textMain} size=\"4px\" cssOverride={{ marginLeft: '10px' }} /> : null}\n            </div>\n        </div>\n    )\n    return <WithError error={error} content={form} />\n}\n\nfunction WithError(props: { error?: string, content: ReactNode }): ReactNode {\n    const colors = useColors()\n    if (props.error !== undefined) {\n        return (\n            <div>\n                {props.content}\n                <div style={{ backgroundColor: colors.slightlyDifferentBackgroundFocused, padding: '0 0.5em', marginRight: '25%' }}>\n                    {props.error}\n                </div>\n            </div>\n        )\n    }\n    return props.content\n}\n","import React, { ReactNode, useContext } from 'react'\n\nimport { Navigator } from '../navigation/Navigator'\nimport { useColors, useJuxtastatColors } from '../page_template/colors'\n\nimport { QuizDescriptor, QuizDescriptorWithTime, QuizHistory } from './quiz'\nimport { ResultToDisplayForFriends } from './quiz-friends'\nimport { getInfiniteQuizzes, parseTimeIdentifier } from './statistics'\n\nexport function QuizStatistics(\n    props: {\n        quiz: QuizDescriptor\n        wholeHistory: QuizHistory\n    },\n): ReactNode | undefined {\n    switch (props.quiz.kind) {\n        case 'juxtastat':\n        case 'retrostat':\n            return <QuizStatisticsForTimedStatistics quiz={props.quiz} wholeHistory={props.wholeHistory} />\n        case 'infinite':\n            return <QuizStatisticsForInfinite quiz={props.quiz} wholeHistory={props.wholeHistory} />\n        case 'custom':\n            return undefined\n    }\n}\n\nexport function QuizStatisticsForTimedStatistics(\n    props: {\n        quiz: QuizDescriptorWithTime\n        wholeHistory: QuizHistory\n    },\n): ReactNode {\n    const colors = useColors()\n    const history = (i: number): QuizHistory[string] | undefined => {\n        switch (props.quiz.kind) {\n            case 'juxtastat':\n                return props.wholeHistory[i]\n            case 'retrostat':\n                return props.wholeHistory[`W${i}`]\n        }\n    }\n\n    const today = parseTimeIdentifier(props.quiz.kind, props.quiz.name.toString())\n    const historicalCorrect = new Array(today + 1).fill(-1)\n    const frequencies = new Array<number>(6).fill(0)\n    const playedGames = []\n    for (let i = 0; i <= today; i++) {\n        const histI = history(i)\n        if (histI === undefined) {\n            continue\n        }\n        else {\n            const amount = histI.correct_pattern.reduce((partialSum: number, a) => partialSum + (a ? 1 : 0), 0)\n            historicalCorrect[i] = amount\n            frequencies[amount] += 1\n            playedGames.push(amount)\n        }\n    }\n    const maxStreaks = new Array<number>(historicalCorrect.length).fill(0)\n    for (let val = 0; val < maxStreaks.length; val++) {\n        if (historicalCorrect[val] >= 3) {\n            maxStreaks[val] = (val > 0 ? maxStreaks[val - 1] : 0) + 1\n        }\n    }\n    const maxStreak = Math.max(...maxStreaks)\n    const currentStreak = maxStreaks[today]\n    const totalFreq = frequencies.reduce((partialSum, a) => partialSum + a, 0)\n    const statistics = [\n        {\n            name: 'Played',\n            value: playedGames.length.toString(),\n        },\n        {\n            name: 'Mean score',\n            value: (\n                playedGames.reduce((partialSum, a) => partialSum + a, 0)\n                / playedGames.length\n            ).toFixed(2),\n        },\n        {\n            name: 'Win Rate (3+)',\n            value: `${(\n                playedGames.filter(x => x >= 3).length\n                / playedGames.length * 100\n            ).toFixed(0)}%`,\n        },\n        {\n            name: 'Current Streak (3+)',\n            value: currentStreak.toString(),\n        },\n        {\n            name: 'Max Streak (3+)',\n            value: maxStreak.toString(),\n        },\n    ]\n    return (\n        <div>\n            <div className=\"serif quiz_summary\">Your Statistics</div>\n            <DisplayedStats statistics={statistics} />\n            <div className=\"gap_small\" />\n            <table className=\"quiz_barchart\">\n                <tbody>\n                    {frequencies.map((amt, i) => (\n                        <tr key={i}>\n                            <td className=\"quiz_bar_td serif\" style={{ color: colors.textMain }}>\n                                {i}\n                                /5\n                            </td>\n                            <td className=\"quiz_bar_td serif\">\n                                <span className=\"quiz_bar\" style={{ width: `${amt / totalFreq * 20}em`, backgroundColor: colors.hueColors.blue }}>\n                                </span>\n                                {amt > 0\n                                    ? (\n                                            <span className=\"quiz_stat\" style={{ color: colors.textMain }}>\n                                                {amt}\n                                                {' '}\n                                                (\n                                                {(amt / totalFreq * 100).toFixed(1)}\n                                                %)\n                                            </span>\n                                        )\n                                    : undefined}\n                            </td>\n                        </tr>\n                    ),\n                    )}\n                </tbody>\n            </table>\n        </div>\n    )\n}\nexport function AudienceStatistics({ total, perQuestion }: { total: number, perQuestion: number[] }): ReactNode {\n    const juxtaColors = useJuxtastatColors()\n    // two flexboxes of the scores for each\n    return (\n        <div id=\"quiz-audience-statistics\">\n            <div className=\"serif quiz_summary\">Question Difficulty</div>\n            <DisplayedStats statistics={perQuestion.map((x, i) => {\n                return {\n                    name: `Q${i + 1} Correct`,\n                    value: `${(x / total * 100).toFixed(0)}%`,\n                    addtl_class: 'quiz-audience-statistics-displayed',\n                    color: x / total > 0.5 ? juxtaColors.correct : juxtaColors.incorrect,\n                }\n            },\n            )}\n            />\n        </div>\n    )\n}\nexport function DisplayedStats({ statistics }: {\n    statistics: {\n        value: string\n        name: string\n        additionalClass?: string\n        color?: string\n        onClick?: () => void\n    }[]\n}): ReactNode {\n    return (\n        <div\n            className=\"serif\"\n            style={{\n                textAlign: 'center', width: '100%', margin: 'auto', fontSize: '1.5em',\n                display: 'flex', flexWrap: 'wrap', justifyContent: 'center',\n            }}\n        >\n            {statistics.map((stat, i) => (\n                <DisplayedStat\n                    key={i}\n                    number={stat.value}\n                    name={stat.name}\n                    additionalClass={stat.additionalClass}\n                    color={stat.color}\n                    onClick={stat.onClick}\n                />\n            ),\n            )}\n        </div>\n    )\n}\nexport function DisplayedStat({ number, name, additionalClass, color, onClick }: {\n    number: string\n    name: string\n    additionalClass?: string\n    color?: string\n    onClick?: () => void\n}): ReactNode {\n    // large font for numbers, small for names. Center-aligned using flexbox\n    return (\n        <div\n            style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', padding: '0.3em' }}\n            onClick={onClick}\n        >\n            <div className={`serif ${additionalClass ?? ''}`} style={{ fontSize: '1.5em', color }}>{number}</div>\n            <div className=\"serif\" style={{ fontSize: '0.5em' }}>{name}</div>\n        </div>\n    )\n}\n\nfunction computeOrdinalsAndIndices(numCorrects: number[], keepNumber: number, saveIndex: number): [number[], number[]] {\n    /**\n     * Given an array of numbers, returns two arrays:\n     * 1. An array of ordinals, where the ith element is the rank of the ith element in the input array\n     *      Note that for duplicates, the ordinal is duplicated, and that the ordinals are 1-indexed\n     * 2. An array of indices, where the ith element is the index of the ith element in the input array\n     */\n    const sortedIndicesAll = Array.from(Array(numCorrects.length).keys())\n    sortedIndicesAll.sort((a, b) => numCorrects[b] - numCorrects[a])\n    let currentOrdinal = 1\n    let currentVal = numCorrects[sortedIndicesAll[0]]\n    const ordinals = sortedIndicesAll.map((index) => {\n        if (numCorrects[index] !== currentVal) {\n            currentVal = numCorrects[index]\n            currentOrdinal += 1\n        }\n        return currentOrdinal\n    })\n    const mask = ordinals.map((x, i) => x <= keepNumber || sortedIndicesAll[i] === saveIndex)\n\n    const sortedIndicesFilt = sortedIndicesAll.filter((_, i) => mask[i])\n    const ordinalsFilt = ordinals.filter((_, i) => mask[i])\n\n    return [ordinalsFilt, sortedIndicesFilt]\n}\n\ninterface InfiniteDisplay {\n    ordinals: number[]\n    sortedIndices: number[]\n    seedVersions: [string, number][]\n    numCorrects: number[]\n}\n\nfunction juxtastatInfiniteDisplay(quiz: QuizDescriptor & { kind: 'infinite' }, wholeHistory: QuizHistory): InfiniteDisplay {\n    const [seedVersions, keys] = getInfiniteQuizzes(wholeHistory, true)\n    const numCorrects = keys.map(\n        key => wholeHistory[key].correct_pattern.reduce((partialSum: number, a) => partialSum + (a ? 1 : 0), 0),\n    )\n    const thisIndex = seedVersions.findIndex(([seed, version]) => seed === quiz.seed && version === quiz.version)\n\n    const [ordinals, sortedIndices] = computeOrdinalsAndIndices(numCorrects, 3, thisIndex)\n\n    return { ordinals, sortedIndices, seedVersions, numCorrects }\n}\n\nexport type Medal = 1 | 2 | 3\n\nexport function ordinalThis(quiz: QuizDescriptor & { kind: 'infinite' }, wholeHistory: QuizHistory): Medal | undefined {\n    const { ordinals, sortedIndices, seedVersions } = juxtastatInfiniteDisplay(quiz, wholeHistory)\n    const thisIndex = seedVersions.findIndex(([seed, version]) => seed === quiz.seed && version === quiz.version)\n    const thisOrdinal = ordinals[sortedIndices.indexOf(thisIndex)]\n    switch (thisOrdinal) {\n        case 1:\n        case 2:\n        case 3:\n            return thisOrdinal\n        default:\n            return undefined\n    }\n}\n\nexport function ourResultToDisplayForFriends(quiz: QuizDescriptor & { kind: 'infinite' }, wholeHistory: QuizHistory): ResultToDisplayForFriends {\n    const { sortedIndices, seedVersions, numCorrects } = juxtastatInfiniteDisplay(quiz, wholeHistory)\n    const thisIndex = seedVersions.findIndex(([seed, version]) => seed === quiz.seed && version === quiz.version)\n    const thisNumCorrect = numCorrects[thisIndex]\n    const bestIndex = sortedIndices[0]\n\n    return {\n        forThisSeed: thisNumCorrect,\n        maxScore: numCorrects[bestIndex],\n        maxScoreSeed: seedVersions[bestIndex][0],\n        maxScoreVersion: seedVersions[bestIndex][1],\n    }\n}\n\nexport function QuizStatisticsForInfinite(\n    props: {\n        quiz: QuizDescriptor & { kind: 'infinite' }\n        wholeHistory: QuizHistory\n    },\n): ReactNode | undefined {\n    const colors = useColors()\n    const navContext = useContext(Navigator.Context)\n\n    const { ordinals, sortedIndices, seedVersions, numCorrects } = juxtastatInfiniteDisplay(props.quiz, props.wholeHistory)\n\n    return (\n        <div id=\"your-best-scores\">\n            <div className=\"serif quiz_summary\">Your Best Scores</div>\n            <DisplayedStats\n                statistics={sortedIndices.map((idx, i) => {\n                    return {\n                        name: `#${ordinals[i]}`,\n                        value: numCorrects[idx].toString(),\n                        additionalClass: 'quiz-audience-statistics-displayed',\n                        color: seedVersions[idx][0] === props.quiz.seed ? colors.hueColors.green : colors.hueColors.blue,\n                        onClick: () => {\n                            void navContext.navigate({\n                                kind: 'quiz',\n                                mode: 'infinite',\n                                seed: seedVersions[idx][0],\n                                v: seedVersions[idx][1],\n                            },\n                            { history: 'push', scroll: { kind: 'none' } })\n                        },\n                    }\n                },\n                )}\n            />\n        </div>\n\n    )\n}\n","import React, { CSSProperties, ReactNode, useContext, useEffect, useRef, useState } from 'react'\n\nimport { GenericShareButton } from '../components/GenericShareButton'\nimport { Icon } from '../components/Icon'\nimport { Statistic } from '../components/display-stats'\nimport { JuxtastatInfiniteButton, OtherQuizzesButtons } from '../components/quiz-panel'\nimport { CheckboxSetting } from '../components/sidebar'\nimport { Navigator } from '../navigation/Navigator'\nimport { JuxtastatColors } from '../page_template/color-themes'\nimport { useColors, useJuxtastatColors } from '../page_template/colors'\nimport { Settings, useSetting } from '../page_template/settings'\nimport { getVector, VectorSettingsDictionary } from '../page_template/settings-vector'\nimport { allGroups, allYears, statParents, StatPath, StatName } from '../page_template/statistic-tree'\nimport { persistentClient } from '../utils/urbanstats-persistent-client'\n\nimport { AuthenticationStateMachine } from './AuthenticationStateMachine'\nimport { msRemaining, renderTimeRemaining } from './dates'\nimport { JuxtaQuestion, QuizDescriptor, QuizHistory, QuizQuestion, RetroQuestion, aCorrect, QuizFriends, nameOfQuizKind, QuizKind, QuizModel, QuizDescriptorWithTime } from './quiz'\nimport { ExportImport, Header, QuizAuthStatus, UserId } from './quiz-components'\nimport { QuizFriendsPanel } from './quiz-friends'\nimport { renderQuestion } from './quiz-question'\nimport { AudienceStatistics, Medal, ordinalThis, ourResultToDisplayForFriends, QuizStatistics } from './quiz-statistics'\nimport { getCachedPerQuestionStats, getPerQuestionStats, PerQuestionStats, reportToServer } from './statistics'\n\nexport type CorrectPattern = (boolean | 0 | 1)[]\n\nconst maxPerLine = 10\n\nconst authNagEntries = 10\n\ninterface QuizResultProps {\n    quizDescriptor: QuizDescriptor\n    todayName?: string\n    history: {\n        // eslint-disable-next-line no-restricted-syntax -- Persistent data\n        correct_pattern: CorrectPattern\n        choices: ('A' | 'B')[]\n    }\n    wholeHistory: QuizHistory\n    quiz: QuizQuestion[]\n}\n\nexport function QuizResult(props: QuizResultProps): ReactNode {\n    const button = useRef<HTMLButtonElement>(null)\n    const [stats, setStats] = useState<PerQuestionStats>((\n        props.quizDescriptor.kind === 'custom' || props.quizDescriptor.kind === 'infinite'\n            ? undefined\n            : getCachedPerQuestionStats(props.quizDescriptor)\n    ) ?? { total: 0, per_question: [0, 0, 0, 0, 0] })\n    const quizFriends = QuizModel.shared.friends.use()\n\n    const setQuizFriends = (qf: QuizFriends): void => {\n        QuizModel.shared.friends.value = qf\n    }\n\n    useEffect(() => {\n        // TODO stats for infinite quiz\n        if (props.quizDescriptor.kind === 'custom') {\n            return\n        }\n        void reportToServer(props.wholeHistory, props.quizDescriptor.kind)\n        if (props.quizDescriptor.kind === 'infinite') {\n            return\n        }\n        void getPerQuestionStats(props.quizDescriptor).then(setStats)\n    }, [props.wholeHistory, props.quizDescriptor])\n\n    const correctPattern = props.history.correct_pattern\n\n    const authError = QuizModel.shared.authenticationError.use()\n\n    const dismiss = QuizModel.shared.dismissAuthNag.use() !== null\n\n    const authState = AuthenticationStateMachine.shared.useState()\n\n    const nagSignIn = !dismiss && authState.state === 'signedOut' && Object.keys(props.wholeHistory).length >= authNagEntries\n\n    const colors = useColors()\n\n    return (\n        <div>\n            <Header quiz={props.quizDescriptor} />\n            <div className=\"gap\"></div>\n            {authError\n                ? (\n                        <NotificationBanner>\n                            <b>\n                                Warning! Someone is possibly attempting to hijack your account.\n                                Please contact us at security@urbanstats.org, and send your persistent ID.\n                            </b>\n                        </NotificationBanner>\n                    )\n                : undefined}\n            {nagSignIn && !authError\n                ? (\n                        <NotificationBanner>\n                            <div>\n                                <QuizAuthStatus />\n                            </div>\n                            <div role=\"button\" title=\"Dismiss\" onClick={() => QuizModel.shared.dismissAuthNag.value = Date.now()}>\n                                <Icon size=\"1em\" color={colors.textMain} src=\"/close.png\" style={{ display: 'inline-block' }} />\n                            </div>\n                        </NotificationBanner>\n                    )\n                : undefined}\n            <Summary correctPattern={correctPattern} quizKind={props.quizDescriptor.kind} />\n            <div className=\"gap_small\"></div>\n            <ShareButton\n                buttonRef={button}\n                todayName={props.todayName}\n                correctPattern={correctPattern}\n                quizKind={props.quizDescriptor.kind}\n                medal={props.quizDescriptor.kind === 'infinite' ? ordinalThis(props.quizDescriptor, props.wholeHistory) : undefined}\n            />\n            <div className=\"gap\" />\n            <div className=\"gap\"></div>\n            {stats.total > 30\n                ? (\n                        <div>\n                            <AudienceStatistics total={stats.total} perQuestion={stats.per_question} />\n                            <div className=\"gap\"></div>\n                            <div className=\"gap\"></div>\n                        </div>\n                    )\n                : undefined}\n            {\n                props.quizDescriptor.kind === 'custom' || props.quizDescriptor.kind === 'infinite'\n                    ? undefined\n                    : <TimeToNextQuiz quiz={props.quizDescriptor} />\n            }\n            {\n                props.quizDescriptor.kind === 'infinite'\n                    ? <JuxtastatInfiniteButton />\n                    : undefined\n            }\n            <div className=\"gap\"></div>\n            <QuizStatistics wholeHistory={props.wholeHistory} quiz={props.quizDescriptor} />\n            <div className=\"gap\"></div>\n            <span className=\"serif quiz_summary\">Details (spoilers, don&apos;t share!)</span>\n            <div className=\"gap_small\"></div>\n            {props.quiz.map(\n                (quiz, index) => (\n                    <QuizResultRow\n                        question={quiz}\n                        key={index}\n                        index={index}\n                        choice={props.history.choices[index]}\n                        correct={correctPattern[index]}\n                    />\n                ),\n            )}\n            <div className=\"gap_small\"></div>\n            {\n                // TODO stats for infinite quiz\n                props.quizDescriptor.kind === 'custom'\n                    ? undefined\n                    : (\n                            <div style={{ margin: 'auto', width: '100%', maxWidth: '500px' }}>\n                                <QuizFriendsPanel\n                                    quizFriends={quizFriends}\n                                    quizDescriptor={props.quizDescriptor}\n                                    setQuizFriends={setQuizFriends}\n                                    myResult={\n                                        props.quizDescriptor.kind === 'infinite'\n                                            ? ourResultToDisplayForFriends(props.quizDescriptor, props.wholeHistory)\n                                            : { corrects: correctPattern }\n                                    }\n                                />\n                            </div>\n                        )\n            }\n            <div className=\"gap_small\"></div>\n            <div className=\"centered_text serif\">\n                <UserId />\n                <ExportImport />\n            </div>\n            <OtherQuizzesButtons />\n        </div>\n    )\n}\n\nfunction NotificationBanner(props: { children: ReactNode }): ReactNode {\n    const colors = useColors()\n    return (\n        <>\n            <div\n                className=\"serif\"\n                style={{\n                    backgroundColor: colors.slightlyDifferentBackgroundFocused, width: '75%', margin: 'auto',\n                    fontSize: '1.5em',\n                    padding: '0.5em',\n                    textAlign: 'center',\n                    borderRadius: '5px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-evenly',\n                }}\n            >\n                {props.children}\n            </div>\n            <div className=\"gap\" />\n        </>\n    )\n}\n\ninterface ShareButtonProps {\n    buttonRef: React.RefObject<HTMLButtonElement>\n    todayName: string | undefined\n    correctPattern: CorrectPattern\n    quizKind: QuizKind\n    medal?: Medal\n}\n\nfunction ShareButton(props: ShareButtonProps): ReactNode {\n    const [compactRepr] = useSetting('juxtastatCompactEmoji')\n    const asb = <ActualShareButton {...props} compactRepr={compactRepr} />\n    if (props.correctPattern.length <= maxPerLine) {\n        return asb\n    }\n    return (\n        <div>\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\n                <CheckboxSetting\n                    name=\"Compact emoji representation\"\n                    settingKey=\"juxtastatCompactEmoji\"\n                    testId=\"juxtastatCompactEmoji\"\n                />\n            </div>\n            <div className=\"gap_small\"></div>\n            {asb}\n        </div>\n    )\n}\n\nfunction ActualShareButton({ buttonRef, todayName, correctPattern, quizKind, medal, compactRepr }: (ShareButtonProps & { compactRepr: boolean })): ReactNode {\n    const juxtaColors = useJuxtastatColors()\n    const produceSummary = (): Promise<[string, string]> => summary(juxtaColors, todayName, correctPattern, quizKind, medal, compactRepr)\n    return <GenericShareButton buttonRef={buttonRef} produceSummary={produceSummary} />\n}\n\nfunction TimeToNextQuiz({ quiz }: { quiz: QuizDescriptorWithTime }): ReactNode {\n    const colors = useColors()\n    const [, setTime] = useState(0)\n    useEffect(() => {\n        const interval = setInterval(() => { setTime(time => time + 1) }, 1000)\n        return () => { clearInterval(interval) }\n    })\n\n    const w = quiz.kind === 'juxtastat' ? '5em' : '6.5em'\n\n    const timerStyle: CSSProperties = {\n        width: w,\n        margin: 0,\n        backgroundColor: colors.hueColors.blue,\n        textAlign: 'center',\n        fontSize: '2em',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'row',\n        padding: '0.25em 0.25em',\n        borderRadius: '0.25em',\n        border: 'none',\n        color: colors.buttonTextWhite,\n    }\n\n    const navigator = useContext(Navigator.Context)\n\n    let contents: ReactNode\n\n    if (msRemaining(quiz) < 0 && navigator.currentDescriptor.kind === 'quiz') {\n        contents = (\n            <a\n                {...navigator.link({\n                    kind: 'quiz',\n                    mode: quiz.kind === 'retrostat' ? 'retro' : undefined,\n                    date: navigator.currentDescriptor.date !== undefined ? navigator.currentDescriptor.date + 1 : undefined,\n                }, { scroll: { kind: 'position', top: 0 } })}\n                style={{ textDecoration: 'none' }}\n            >\n                <div\n                    className=\"serif\"\n                    style={{\n                        ...timerStyle,\n                        width: undefined,\n                        padding: '0.25em 1em',\n                    }}\n                >\n                    Next Quiz\n                </div>\n            </a>\n        )\n    }\n    else {\n        contents = (\n            <>\n                <div className=\"serif quiz_summary\" style={{ margin: 'auto 0' }}>Next quiz in </div>\n                <div\n                    className=\"serif\"\n                    style={timerStyle}\n                >\n                    <span>{renderTimeRemaining(quiz)}</span>\n                </div>\n            </>\n        )\n    }\n\n    return (\n        <div\n            style={{ margin: 'auto' }}\n            id=\"quiz-timer\"\n        >\n            <div style={{\n                display: 'flex',\n                flexDirection: 'row',\n                justifyContent: 'center',\n                alignItems: 'flex-center',\n                flexWrap: 'wrap',\n                gap: '1em',\n            }}\n            >\n                {contents}\n            </div>\n        </div>\n    )\n}\n\nfunction juxtaSummary(correctPattern: CorrectPattern): [string, string] {\n    let show = 'error'\n    const total = correctPattern.length\n    const correct = correctPattern.reduce((partialSum: number, a) => partialSum + (a ? 1 : 0), 0)\n    const incorrect = total - correct\n\n    if (correct === 0) {\n        show = 'Impressively Bad Job! '\n    }\n    else if (incorrect === 0) {\n        show = 'Perfect! '\n    }\n    else if (correct === 1) {\n        show = 'No! No!! '\n    }\n    else if (incorrect === 1) {\n        show = 'Excellent! '\n    }\n    else if (incorrect === 2) {\n        show = 'Good! '\n    }\n    else {\n        show = 'Better luck next time! '\n    }\n    return [show, `${correct}/${total}`]\n}\n\nfunction infiniteSummary(correctPattern: CorrectPattern): [string, string] {\n    const correct = correctPattern.reduce((partialSum: number, a) => partialSum + (a ? 1 : 0), 0)\n    const pattern = `${correct}/`\n    if (correct < 10) {\n        return ['You can do better! ', pattern]\n    }\n    if (correct < 20) {\n        return ['Not bad! ', pattern]\n    }\n    if (correct < 30) {\n        return ['Good job! ', pattern]\n    }\n    if (correct < 40) {\n        return ['Great! ', pattern]\n    }\n    return ['Amazing! ', pattern]\n}\n\nfunction summaryTexts(correctPattern: CorrectPattern, quizKind: QuizKind): [string, string] {\n    switch (quizKind) {\n        case 'juxtastat':\n        case 'retrostat':\n        case 'custom':\n            return juxtaSummary(correctPattern)\n        case 'infinite':\n            return infiniteSummary(correctPattern)\n    }\n}\n\nexport function Summary(props: { correctPattern: CorrectPattern, quizKind: QuizKind }): ReactNode {\n    const [compactRepr] = useSetting('juxtastatCompactEmoji')\n    const juxtaColors = useJuxtastatColors()\n    const [prefix, summaryText] = summaryTexts(props.correctPattern, props.quizKind)\n    const show = `${prefix} ${summaryText}`\n    return (\n        <div>\n            <span className=\"serif quiz_summary\" id=\"quiz-result-summary-words\">{show}</span>\n            <div id=\"quiz-result-summary-emoji\">\n                {\n                    redAndGreenSquares(juxtaColors, props.correctPattern, compactRepr).map((line, index) => (\n                        <div className=\"serif quiz_summary\" key={index}>{line}</div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nfunction renderMedalAsString(medal: Medal): string {\n    return [' Personal Best!', ' Personal 2nd Best!', ' Personal 3rd Best!'][medal - 1]\n}\n\nexport async function summary(juxtaColors: JuxtastatColors, todayName: string | undefined, correctPattern: CorrectPattern, quizKind: QuizKind, medal: Medal | undefined, compactRepr: boolean): Promise<[string, string]> {\n    // wordle-style summary\n    const [, summaryText] = summaryTexts(correctPattern, quizKind)\n    let text = nameOfQuizKind(quizKind)\n    if (todayName !== undefined) {\n        text += ` ${todayName}`\n    }\n    text += ` ${summaryText}`\n\n    text += '\\n'\n    text += '\\n'\n\n    text += redAndGreenSquares(juxtaColors, correctPattern, compactRepr).join('\\n')\n\n    if (medal !== undefined) {\n        text += '\\n'\n        text += '\\n'\n        text += renderMedalAsString(medal)\n    }\n\n    text += '\\n'\n\n    // eslint-disable-next-line no-restricted-syntax -- Sharing\n    const hash = window.location.hash\n    let url = `https://juxtastat.org${hash === '' ? '' : `/${hash}`}`\n    if (hash.length > 40) {\n        // current url is too long, shorten it. get the current url without the origin or slash\n        // eslint-disable-next-line no-restricted-syntax -- Sharing\n        const thisURL = window.location.href.substring(window.location.origin.length + 1)\n        const { data } = await persistentClient.POST('/shorten', {\n            body: { full_text: thisURL },\n        })\n        if (data === undefined) {\n            throw new Error('Error while shortening')\n        }\n        url = `https://s.urbanstats.org/s?c=${data.shortened}`\n    }\n    return [text, url]\n}\n\nfunction QuizResultRow(props: QuizResultRowProps & { question: QuizQuestion }): ReactNode {\n    switch (props.question.kind) {\n        case 'juxtastat':\n            return <JuxtastatQuizResultRow {...props} question={props.question} />\n        case 'retrostat':\n            return <RetrostatQuizResultRow {...props} question={props.question} />\n    }\n}\n\ninterface QuizResultRowProps {\n    question: QuizQuestion\n    choice: 'A' | 'B'\n    correct: boolean | 0 | 1\n    index: number\n}\n\ninterface GenericQuizResultRowProps extends QuizResultRowProps {\n    getLabel: () => ReactNode\n    getOption: (letter: 'a' | 'b') => ReactNode\n    getStat: (letter: 'a' | 'b') => ReactNode\n}\n\nexport function GenericQuizResultRow(props: GenericQuizResultRowProps): ReactNode {\n    const colors = useColors()\n    const juxtaColors = useJuxtastatColors()\n    const comparison = aCorrect(props.question)\n        ? (<span>&gt;</span>)\n        : (<span>&lt;</span>)\n    let firstStyle: React.CSSProperties = {}\n    let secondStyle: React.CSSProperties = {}\n\n    if (props.choice === 'A') {\n        firstStyle = { backgroundColor: colors.selectedButton, color: colors.selectedButtonText }\n    }\n    else {\n        secondStyle = { backgroundColor: colors.selectedButton, color: colors.selectedButtonText }\n    }\n    const result = props.correct ? juxtaColors.correctEmoji : juxtaColors.incorrectEmoji\n\n    return (\n        <div key={props.index}>\n            {props.getLabel()}\n            <table\n                className=\"stats_table\"\n                style={{\n                    width: '80%',\n                    marginLeft: '10%',\n                    marginRight: '10%',\n                    borderCollapse: 'separate',\n                    borderSpacing: '0.1em',\n                    fontSize: '1.25em',\n                    backgroundColor: colors.unselectedButton,\n                }}\n            >\n                <tbody style={{ color: colors.textMain }}>\n                    <tr>\n                        <td className=\"serif quiz_result_name_left\" style={firstStyle}>\n                            {props.getOption('a')}\n                        </td>\n                        <td style={{ fontWeight: 400 }} className=\"serif quiz_result_value_left\">\n                            {props.getStat('a')}\n                        </td>\n                        <td className=\"serif quiz_result_symbol quiz_result_comparison_symbol\">\n                            {comparison}\n                        </td>\n                        <td style={{ fontWeight: 400 }} className=\"serif quiz_result_value_right\">\n                            {props.getStat('b')}\n                        </td>\n                        <td className=\"serif quiz_result_name_right\" style={secondStyle}>\n                            {props.getOption('b')}\n                        </td>\n                        <td className=\"serif quiz_result_symbol\">\n                            {result}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <div className=\"gap_small\" />\n        </div>\n\n    )\n}\n\nfunction Value({ stat, statColumn }: { stat: number, statColumn: StatName | '%' }): ReactNode {\n    return (\n        <span>\n            <Statistic\n                statname={statColumn}\n                value={stat}\n                isUnit={false}\n            />\n            <Statistic\n                statname={statColumn}\n                value={stat}\n                isUnit={true}\n            />\n        </span>\n    )\n}\n\nfunction JuxtastatQuizResultRow(props: QuizResultRowProps & { question: JuxtaQuestion }): ReactNode {\n    return (\n        <ComparisonLink question={props.question}>\n            <GenericQuizResultRow\n                {...props}\n                getLabel={() => (\n                    <span className=\"serif quiz_results_question\">\n                        {props.question.stat_column}\n                    </span>\n                )}\n                getOption={letter => props.question[`longname_${letter}`]}\n                getStat={stat => <Value stat={props.question[`stat_${stat}`]} statColumn={props.question.stat_column} />}\n            />\n        </ComparisonLink>\n    )\n}\n\nfunction RetrostatQuizResultRow(props: QuizResultRowProps & { question: RetroQuestion }): ReactNode {\n    return (\n        <GenericQuizResultRow\n            {...props}\n            getLabel={() => (\n                <span className=\"serif quiz_results_question\">\n                    Juxtastat Users Who Got This Question Right %\n                </span>\n            )}\n            getOption={(letter) => {\n                const style = letter === 'a' ? { marginLeft: '20%' } : { marginRight: '20%' }\n                const q = props.question[letter]\n                return (\n                    <ComparisonLink question={q}>\n                        <div style={{ zoom: 0.5 }}>\n                            <div>{renderQuestion(q.question)}</div>\n                            <div style={style}>\n                                <div>\n                                    {q.longname_a}\n                                    {' '}\n                                    <Value stat={q.stat_a} statColumn={q.stat_column} />\n                                </div>\n                                <div>\n                                    {q.longname_b}\n                                    {' '}\n                                    <Value stat={q.stat_b} statColumn={q.stat_column} />\n                                </div>\n                            </div>\n                        </div>\n                    </ComparisonLink>\n                )\n            }}\n            getStat={stat => <Value stat={props.question[`${stat}_ease`]} statColumn=\"%\" />}\n        />\n    )\n}\n\nfunction ComparisonLink({ question, children }: { question: JuxtaQuestion, children: ReactNode }): ReactNode {\n    const navContext = useContext(Navigator.Context)\n    const settings = useContext(Settings.Context)\n    const colors = useColors()\n    return (\n        <a\n            {...navContext.link({\n                kind: 'comparison',\n                longnames: [question.longname_a, question.longname_b],\n                s: getVector(settings, settingsOverrides(question.stat_path)),\n            }, { scroll: { kind: 'position', top: 0 } })}\n            style={{ textDecoration: 'none', color: colors.textMain }}\n        >\n            {children}\n\n        </a>\n    )\n}\n\nfunction settingsOverrides(questionStatPath?: StatPath): Partial<VectorSettingsDictionary> | undefined {\n    if (questionStatPath === undefined) {\n        // Old question, doesnt' have stat path\n        return undefined\n    }\n    const parents = statParents.get(questionStatPath)\n    if (parents === undefined) {\n        // Unknown stat path, possible one that has been removed\n        return undefined\n    }\n    const categoryId = parents.group.parent.id\n    const year = parents.year\n\n    return Object.fromEntries([\n        ...allGroups.map(group => [`show_stat_group_${group.id}`, group.parent.id === categoryId] as const),\n        ...(year !== null ? allYears.map(y => [`show_stat_year_${y}`, y === year] as const) : []),\n    ])\n}\n\nfunction emojiForCount(count: number): string[] {\n    if (count >= 10) {\n        return [...emojiForCount(Math.floor(count / 10)), ...emojiForCount(count % 10)]\n    }\n    switch (count) {\n        case 0:\n            return ['0']\n        case 1:\n            return ['1']\n        case 2:\n            return ['2']\n        case 3:\n            return ['3']\n        case 4:\n            return ['4']\n        case 5:\n            return ['5']\n        case 6:\n            return ['6']\n        case 7:\n            return ['7']\n        case 8:\n            return ['8']\n        case 9:\n            return ['9']\n    }\n    throw new Error(`unexpected count ${count}`)\n}\n\nfunction toCompactRepresentation(correctPattern: CorrectPattern, correct: string, incorrect: string): string[] {\n    // RRGGG -> R<emoji 2>G<emoji 3>\n    const result: string[][] = [[]]\n    let currentSymbol: boolean | undefined = undefined\n    let currentCount = 0\n\n    const add = (symbol: boolean | undefined, count: number): void => {\n        if (symbol === undefined) {\n            return\n        }\n        const last = result[result.length - 1]\n        last.push(symbol ? correct : incorrect)\n        if (count > 1) {\n            last.push(...emojiForCount(count))\n        }\n        if (last.length >= maxPerLine) {\n            result.push([])\n        }\n    }\n\n    for (const x of correctPattern.map(t => t ? true : false)) {\n        if (x === currentSymbol) {\n            currentCount += 1\n        }\n        else {\n            add(currentSymbol, currentCount)\n            currentSymbol = x\n            currentCount = 1\n        }\n    }\n    add(currentSymbol, currentCount)\n    return result.map(line => line.join(''))\n}\n\nexport function redAndGreenSquares(juxtaColors: JuxtastatColors, correctPattern: CorrectPattern, compactRepr: boolean): string[] {\n    if (compactRepr && correctPattern.length > maxPerLine) {\n        return toCompactRepresentation(correctPattern, juxtaColors.correctEmoji, juxtaColors.incorrectEmoji)\n    }\n    if (correctPattern.length > maxPerLine) {\n        const lines = []\n        for (let i = 0; i < correctPattern.length; i += maxPerLine) {\n            lines.push(redAndGreenSquares(juxtaColors, correctPattern.slice(i, i + maxPerLine), compactRepr)[0])\n        }\n        return lines\n    }\n    return [\n        correctPattern.map(function (x) {\n            // red square emoji for wrong, green for right\n            return x ? juxtaColors.correctEmoji : juxtaColors.incorrectEmoji\n        }).join(''),\n    ]\n}\n","import React, { CSSProperties, ReactNode, useContext, useEffect, useMemo, useState } from 'react'\n\nimport { Navigator } from '../navigation/Navigator'\nimport { loadPageDescriptor, PageData, PageDescriptor } from '../navigation/PageDescriptor'\nimport { LongLoad } from '../navigation/loading'\nimport { useColors } from '../page_template/colors'\nimport { Settings } from '../page_template/settings'\nimport { PageTemplate } from '../page_template/template'\nimport '../common.css'\nimport './quiz.css'\nimport { AuthenticationStateMachine } from '../quiz/AuthenticationStateMachine'\nimport { SignedOutPanel } from '../quiz/SignedOutPanel'\nimport { validQuizInfiniteVersions } from '../quiz/infinite'\nimport { QuizDescriptor, QuizHistory, QuizModel, QuizQuestion, QuizQuestionsModel, aCorrect, getCorrectPattern, nameOfQuizKind } from '../quiz/quiz'\nimport { QuizQuestionDispatch } from '../quiz/quiz-question'\nimport { QuizResult } from '../quiz/quiz-result'\nimport { useHeaderTextClass } from '../utils/responsive'\n\nimport { buttonStyle } from './GenericShareButton'\n\nexport function QuizPanel(props: { quizDescriptor: QuizDescriptor, todayName?: string, todaysQuiz: QuizQuestionsModel }): ReactNode {\n    // set a unique key for the quiz panel so that it will re-render when the quiz changes\n    // this is necessary because the quiz panel is a stateful component with all the questions cached.\n    return (\n        <QuizPanelNoResets\n            key={props.todaysQuiz.uniqueKey}\n            quizDescriptor={props.quizDescriptor}\n            todayName={props.todayName}\n            todaysQuiz={props.todaysQuiz}\n        />\n    )\n}\n\nfunction QuizPanelNoResets(props: { quizDescriptor: QuizDescriptor, todayName?: string, todaysQuiz: QuizQuestionsModel }): ReactNode {\n    // We don't want to save certain quiz types, so bypass the persistent store for those\n    const headerClass = useHeaderTextClass()\n    const colors = useColors()\n    const persistentQuizHistory = QuizModel.shared.history.use()\n    const [transientQuizHistory, setTransientQuizHistory] = useState<QuizHistory>({})\n\n    let quizHistory: QuizHistory\n    let setQuizHistory: (newQuizHistory: QuizHistory) => void\n    switch (props.quizDescriptor.kind) {\n        case 'juxtastat':\n        case 'retrostat':\n        case 'infinite':\n            quizHistory = persistentQuizHistory\n            setQuizHistory = newHistory => QuizModel.shared.history.value = newHistory\n            break\n        case 'custom':\n            quizHistory = transientQuizHistory\n            setQuizHistory = (newHistory) => { setTransientQuizHistory(newHistory) }\n            break\n    }\n\n    const [waitingForTime, setWaitingForTime] = useState(false)\n    const [waitingForNextQuestion, setWaitingForNextQuestion] = useState(false)\n    const [questions, setQuestions] = useState<QuizQuestion[]>([])\n\n    const authState = AuthenticationStateMachine.shared.useState()\n\n    if (authState.state === 'signedOut' && authState.email !== null) {\n        return <SignedOutPanel />\n    }\n\n    if (props.quizDescriptor.kind === 'infinite' && !(validQuizInfiniteVersions satisfies number[] as number[]).includes(props.quizDescriptor.version)) {\n        // TODO this should not come up if you've already done the quiz (only relevant once we add the stats)\n        return (\n            <PageTemplate>\n                <div>\n                    <div className={headerClass}>Quiz version mismatch</div>\n                    <div style={{\n                        width: '50%',\n                        margin: 'auto',\n                        backgroundColor: colors.slightlyDifferentBackgroundFocused,\n                        padding: '1em',\n                        fontWeight: 'bold',\n                    }}\n                    >\n                        Juxtastat generation has been updated, so infinite Juxtastat you are trying to access is no longer available.\n                    </div>\n                    <div style={{ height: '1.5em' }} />\n                    <OtherQuizzesButtons />\n                </div>\n            </PageTemplate>\n        )\n    }\n\n    const todaysQuizHistory = quizHistory[props.quizDescriptor.name] ?? { choices: [], correct_pattern: [] }\n\n    const quizDone = props.todaysQuiz.isDone(getCorrectPattern(quizHistory, props.quizDescriptor.name))\n    const questionsExpected = quizDone ? todaysQuizHistory.choices.length : todaysQuizHistory.choices.length + 1\n    const missing = questionsExpected - questions.length\n    const waiting = waitingForTime || waitingForNextQuestion || missing > 0\n\n    if (!waitingForNextQuestion && missing > 0) {\n        setWaitingForNextQuestion(true)\n        const promises = Array.from({ length: missing }, (_, i) => props.todaysQuiz.questionByIndex(questions.length + i))\n        Promise.all(promises).then((newQuestions) => {\n            setWaitingForNextQuestion(false)\n            setQuestions([...questions, ...newQuestions.filter((question): question is QuizQuestion => question !== undefined)])\n        }).catch((err: unknown) => {\n            console.error('Error fetching questions', err)\n            // setWaitingForNextQuestion(false)\n        })\n    }\n\n    const setTodaysQuizHistory = (historyToday: QuizHistory[string]): void => {\n        const newHistory = { ...quizHistory, [props.quizDescriptor.name]: historyToday }\n        setWaitingForTime(true)\n        setQuizHistory(newHistory)\n    }\n\n    const onSelect = (selected: 'A' | 'B'): void => {\n        if (waiting) {\n            return\n        }\n        const history = todaysQuizHistory\n        const idx = history.correct_pattern.length\n        const question = questions[idx]\n        history.choices.push(selected)\n        history.correct_pattern.push((selected === 'A') === aCorrect(question))\n        setTodaysQuizHistory(history)\n        setTimeout(() => { setWaitingForTime(false) }, 500)\n    }\n\n    return (\n        <PageTemplate>\n            {(() => {\n                const quiz = props.todaysQuiz\n                const history = todaysQuizHistory\n\n                let index = history.choices.length\n                if (waiting) {\n                    index -= 1\n                }\n\n                if (!waiting && quizDone) {\n                    return (\n                        <QuizResult\n                            // can only show results if the quiz is done\n                            quiz={questions}\n                            wholeHistory={quizHistory}\n                            history={history}\n                            todayName={props.todayName}\n                            quizDescriptor={props.quizDescriptor}\n                        />\n                    )\n                }\n\n                if (index < 0 || index >= questions.length) {\n                    const message = index < 0 ? 'Loading quiz...' : 'Loading results...'\n                    return (\n                        <div>\n                            <input type=\"hidden\" data-test-loading-quiz={true} />\n                            <div className={headerClass}>{message}</div>\n                            <LongLoad />\n                        </div>\n                    )\n                }\n\n                return (\n                    <QuizQuestionDispatch\n                        quiz={props.quizDescriptor}\n                        question={questions[index]}\n                        history={history}\n                        length={quiz.length ?? history.choices.length}\n                        onSelect={onSelect}\n                        waiting={waiting}\n                        nested={false}\n                        noHeader={false}\n                        noFooter={false}\n                    />\n                )\n            })()}\n        </PageTemplate>\n    )\n}\n\nexport function JuxtastatInfiniteButton(): ReactNode {\n    const colors = useColors()\n    const navContext = useContext(Navigator.Context)\n\n    return (\n        <a\n            style={{\n                ...buttonStyle(colors.hueColors.blue, colors.buttonTextWhite),\n                width: '30%',\n                textDecoration: 'none',\n            }}\n            {...navContext.link({ kind: 'quiz', mode: 'infinite' }, { scroll: { kind: 'position', top: 0 } })}\n        >\n            Random Juxtastat Infinite\n        </a>\n    )\n}\ntype QuizPageDescriptor = Extract<PageDescriptor, { kind: 'quiz' }>\ninterface TodoQuiz {\n    pageData: Extract<PageData, {\n        kind: 'quiz'\n    }>\n    newPageDescriptor: QuizPageDescriptor\n}\n\nexport function OtherQuizzesButtons(): ReactNode {\n    /**\n     * Show users other quizzes they haven't completed yet (and Juxtastat Infinite)\n     */\n\n    const colors = useColors()\n    const navContext = useContext(Navigator.Context)\n\n    const { current } = navContext.usePageState()\n    const currentQuizMode = current.descriptor.kind === 'quiz' ? current.descriptor.mode : 'notAQuiz'\n\n    const otherQuizPages: QuizPageDescriptor[] = useMemo(() => ([\n        { kind: 'quiz', mode: undefined },\n        { kind: 'quiz', mode: 'retro' },\n        { kind: 'quiz', mode: 'infinite' },\n    ] as const).filter(({ mode }) => mode !== currentQuizMode), [currentQuizMode])\n\n    const [todoQuizzes, setTodoQuizzes] = useState<TodoQuiz[]>([])\n\n    useEffect(() => {\n        let cancel = false\n\n        void (async () => {\n            const quizDatas = await Promise.all(otherQuizPages.map(pageDescriptor => loadPageDescriptor(pageDescriptor, Settings.shared)))\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- Prevents races\n            if (!cancel) {\n                setTodoQuizzes(\n                    quizDatas.filter(q =>\n                        q.newPageDescriptor.mode === 'infinite'\n                        || !q.pageData.quiz.isDone(\n                            getCorrectPattern(QuizModel.shared.history.value, q.pageData.quizDescriptor.name))))\n            }\n        })()\n\n        return () => { cancel = true }\n    }, [otherQuizPages])\n\n    const otherQuizButtonStyle: CSSProperties = {\n        ...buttonStyle(colors.hueColors.blue, colors.buttonTextWhite),\n        width: '30%',\n        textDecoration: 'none',\n    }\n\n    if (todoQuizzes.length === 0) {\n        return null\n    }\n\n    return (\n        <>\n            <div className=\"gap\"></div>\n            <div style={{\n                display: 'flex',\n                flexDirection: 'row',\n                justifyContent: 'center',\n                alignItems: 'flex-center',\n                flexWrap: 'wrap',\n                gap: '1em',\n            }}\n            >\n                {todoQuizzes.map(quiz => (\n                    <a\n                        key={quiz.pageData.quizDescriptor.kind}\n                        style={otherQuizButtonStyle}\n                        {...navContext.link(quiz.newPageDescriptor, { scroll: { kind: 'position', top: 0 } })}\n                    >\n                        Play\n                        {' '}\n                        { nameOfQuizKind(quiz.pageData.quizDescriptor.kind) }\n                    </a>\n                ))}\n            </div>\n        </>\n    )\n}\n","import { QuizDescriptorWithTime } from './quiz'\n\nconst reference = new Date(2023, 8, 2) // 2023-09-02. 8 is September, since months are 0-indexed for some fucking reason\n\nlet offsetForTesting = 0\nconst debugMillis = parseInt(localStorage.getItem('debug_quiz_transition') ?? '0')\nif (debugMillis > 0) {\n    // Simulates the quiz being 10 seconds from ending\n    const startOfDay = new Date()\n    startOfDay.setHours(0, 0, 0, 0)\n    offsetForTesting = (startOfDay.valueOf() + (24 * 60 * 60 * 1000) - debugMillis) - Date.now()\n}\n\nexport function getDailyOffsetNumber(): number {\n    // fractional days since reference\n    // today's date without the time\n    const today = new Date(Date.now() + offsetForTesting)\n    today.setHours(0, 0, 0, 0)\n    let offset = (today.valueOf() - reference.valueOf()) / (1000 * 60 * 60 * 24)\n    // round to nearest day. this handles daylight savings time, since it's always a midnight-to-midnight comparison.\n    // E.g., if it's 9/3 at 1am, the offset will be 9/3 at 0am - 9/2 at 0am = 1 day, which is correct.\n    // Similarly, if it's 11/11 at 1am, the offset will be\n    //      11/11 at 0am [NO DST] - 9/2 at 0am [DST] = (30 + 31 + 9) days + 1 hour = 70 days + 1 hour\n    //      which rounded to the nearest day is 70 days, which is correct.\n    offset = Math.round(offset)\n    return offset\n}\n\nexport function getRetrostatOffsetNumber(): number {\n    const daily = getDailyOffsetNumber()\n    // 78 through 84 --> 0\n    return Math.floor((daily - 1) / 7) - 11\n}\n\nfunction dayStart(offset: number): Date {\n    const date = new Date(reference)\n    date.setDate(date.getDate() + offset)\n    return date\n}\n\nfunction dayEnd(offset: number): number {\n    const start = dayStart(offset)\n    start.setDate(start.getDate() + 1)\n    return start.valueOf()\n}\n\nfunction weekStart(weekId: string): Date {\n    // check that week_id is W + number\n    if (!weekId.startsWith('W')) {\n        throw new Error('week_id must start with W')\n    }\n    const weekNumber = parseInt(weekId.slice(1))\n    return dayStart((weekNumber + 11) * 7 + 1)\n}\n\nfunction weekEnd(weekId: string): number {\n    const start = weekStart(weekId)\n    start.setDate(start.getDate() + 7)\n    return start.valueOf()\n}\n\nfunction timeToEndOfDay(offset: number): number {\n    return dayEnd(offset) - Date.now() - offsetForTesting\n}\n\nfunction timeToEndOfWeek(weekId: string): number {\n    return weekEnd(weekId) - Date.now()\n}\n\nfunction renderTimeWithinDay(ms: number): string {\n    // render HH:MM:SS from ms. Make sure to pad with 0s.\n    const seconds = Math.floor(ms / 1000)\n    const minutes = Math.floor(seconds / 60)\n    const hours = Math.floor(minutes / 60)\n    const secondRemainder = seconds % 60\n    const minutesRemainder = minutes % 60\n    const hoursRemainder = hours % 24\n\n    const secondsString = secondRemainder.toString().padStart(2, '0')\n    const minutesString = minutesRemainder.toString().padStart(2, '0')\n    const hoursString = hoursRemainder.toString().padStart(2, '0')\n\n    return `${hoursString}:${minutesString}:${secondsString}`\n}\n\nfunction renderTimeWithinWeek(ms: number): string {\n    // render X days, HH:MM:SS from ms. Make sure to pad with 0s.\n    const msPerDay = 1000 * 60 * 60 * 24\n    const days = Math.floor(ms / msPerDay)\n    const withoutDays = ms % msPerDay\n    const timeString = renderTimeWithinDay(withoutDays)\n    // const s_if_plural = days === 1 ? '' : 's';\n    return `${days}d ${timeString}`\n}\n\nexport function msRemaining({ kind, name }: QuizDescriptorWithTime): number {\n    switch (kind) {\n        case 'juxtastat':\n            return timeToEndOfDay(name)\n        case 'retrostat':\n            return timeToEndOfWeek(name)\n    }\n}\n\nexport function renderTimeRemaining({ kind, name }: QuizDescriptorWithTime): string {\n    switch (kind) {\n        case 'juxtastat':\n            return renderTimeWithinDay(timeToEndOfDay(name))\n        case 'retrostat':\n            return renderTimeWithinWeek(timeToEndOfWeek(name))\n    }\n}\n","import { persistentClient } from '../utils/urbanstats-persistent-client'\n\nimport { AuthenticationStateMachine } from './AuthenticationStateMachine'\nimport { QuizModel } from './quiz'\n\nexport async function addFriend(friendID: string, friendName: string): Promise<undefined | { errorMessage: string, problemDomain: 'friendID' | 'friendName' | 'other' }> {\n    const user = QuizModel.shared.uniquePersistentId.value\n    const email = AuthenticationStateMachine.shared.state.email\n    const idOrEmail = 'Friend ID or Email'\n    if (friendID === '') {\n        return { errorMessage: `${idOrEmail} cannot be empty`, problemDomain: 'friendID' }\n    }\n    if (friendID === user) {\n        return { errorMessage: 'Friend ID cannot be your own ID', problemDomain: 'friendID' }\n    }\n    if (friendID === email) {\n        return { errorMessage: 'Friend Email cannot be your own Email', problemDomain: 'friendID' }\n    }\n    let dupFriend\n    if ((dupFriend = QuizModel.shared.friends.value.find(([name, id]) => name !== null && id === friendID))) {\n        return { errorMessage: `${idOrEmail} ${friendID} already exists as ${dupFriend[0]}`, problemDomain: 'friendID' }\n    }\n    if (friendName === '') {\n        return { errorMessage: 'Friend name cannot be empty', problemDomain: 'friendName' }\n    }\n    if (QuizModel.shared.friends.value.map(x => x[0]).includes(friendName)) {\n        return { errorMessage: 'Friend name already exists', problemDomain: 'friendName' }\n    }\n    try {\n        const { response, error } = await persistentClient.POST('/juxtastat/friend_request', {\n            body: { requestee: friendID },\n            params: {\n                header: QuizModel.shared.userHeaders(),\n            },\n        })\n\n        if (response.status === 422) {\n            return { errorMessage: `Invalid ${idOrEmail}`, problemDomain: 'friendID' }\n        }\n        if (error !== undefined) {\n            return { errorMessage: 'Unknown Error', problemDomain: 'other' }\n        }\n\n        QuizModel.shared.friends.value = [...QuizModel.shared.friends.value.filter(([,id]) => id !== friendID), [friendName, friendID, Date.now()]]\n        return undefined\n    }\n    catch {\n        return { errorMessage: 'Network Error', problemDomain: 'other' }\n    }\n}\n\nexport async function addFriendFromLink(friendID: string, friendName: string): Promise<void> {\n    const result = await addFriend(friendID, friendName)\n    if (result === undefined) {\n        alert(`Friend added: ${friendName} !`)\n    }\n    else {\n        if (result.problemDomain === 'friendName') {\n            const newFriendName = prompt(`Could not add friend: ${result.errorMessage}\\n\\nPlease correct the friend name:`, friendName)\n            if (newFriendName !== null) {\n                await addFriendFromLink(friendID, newFriendName.trim())\n            }\n        }\n        else {\n            alert(`Could not add friend: ${result.errorMessage}`)\n        }\n    }\n}\n"],"names":["module","equal","a","b","_type_of","Array","length","i","RegExp","Object","keys","key","ReactPropTypesSecret","require","emptyFunction","emptyFunctionWithReset","shim","props","propName","componentName","location","propFullName","secret","err","Error","getShim","ReactPropTypes","extendStatics","__extends","d","_instanceof","p","TypeError","String","__","__assign","t","s","n","arguments","__createBinding","o","m","k","k2","undefined","desc","get","__setModuleDefault","v","__importStar","mod","result","__rest","e","__importDefault","React","fast_deep_equal_1","PropTypes","normalizeHtml","str","exports","_super","ContentEditable","_this","originalEvt","el","html","evt","_a","tagName","innerRef","current","nextProps","target","document","isTargetFocused","sel","window","range","HTMLElement","GenericShareButton","_navigator_canShare1","colors","useColors","canShare","isShare","isMobile","isFirefox","buttonStyle","_ref","text","url","copyToClipboard","navigator","color","textColor","Icon","param","size","src","style","Statistic","statname","_props_unit","useImperial","_useSetting","temperatureUnit","_useSetting1","_unitDisplay_renderValue","getUnitDisplay","unitType","value","separateNumber","unitName","adjustedValue","places","unit","rendered","ElectionResult","hours","Math","minutes","party","partyColor","Percentile","ordinal","percentile","EditableString","contentEditable","useRef","setCounter","_useState","useEffect","count","handleSubmit","content","setTimeout","selection","EditableNumber","number","parseInt","Number","SignedOutPanel","startSignIn","AuthenticationStateMachine","authState","ErrorBox","Header","quiz","nameOfQuizKind","useHeaderTextClass","Footer","juxtaColors","useJuxtastatColors","footerColors","correct","x","Help","juxtaInfiniteCorrectForBonus","UserId","ExportImport","user","QuizModel","QuizAuthStatus","state","Map","computeShapesToRender","Promise","MapGeneric","QuizQuestionDispatch","RetroQuizQuestion","JuxtastatQuizQuestion","QuizQuestion","buttonA","buttonB","choices","pattern","choice","cssClass","question","rowStyle","quizTextCSS","useMobileLayout","JuxtastatLivesDisplay","letter","keyUpper","aCorrect","renderQuestion","questionString","questionText","_questionText_split","tooltip","Tooltip","_React_useState","show","setShow","grid","createAnimation","random","top","_b","_c","_d","speedMultiplier","_e","_f","_g","margin","additionalprops","sizeWithUnit","parseLengthAndUnit","marginWithUnit","width","parseFloat","wrapper","rand","cssValue","ref","node","QuizFriendsPanel","friendScores","setFriendScores","_useState1","isLoading","setIsLoading","_useState2","error","setError","secureID","friends","quizIDtoName","requesters","friendScoresResponse","quizDescriptor","name","id","persistentClient","date","parseTimeIdentifier","idx","allResults","InfiniteHeader","PlayerScore","friendScore","FriendScore","newQuizFriends","tuple","Date","AddFriend","spinnerSize","WithError","MoonLoader","scoreCorrectHeight","addFriendHeight","FriendScoreCorrects","playerName","_AuthenticationStateMachine_shared_state_email","hash","prompt","urlFromPageDescriptor","alert","_props_friendScore_name","loading","setLoading","row","GridLoader","navContext","useContext","Navigator","border","greyedOut","mixWithBackground","_Math","_Math1","_props_result_forThisSeed","_props_result_maxScore","link","relevantOtherResults","baseStyle","maxMaxScore","_x_maxScore","maxForThisSeed","_x_forThisSeed","corrects","friendNameField","setFriendNameField","friendIDField","setFriendIDField","_useState3","form","friendID","friendName","addFriend","QuizStatistics","QuizStatisticsForTimedStatistics","QuizStatisticsForInfinite","today","historicalCorrect","frequencies","playedGames","histI","history","amount","partialSum","maxStreaks","val","maxStreak","currentStreak","totalFreq","statistics","DisplayedStats","amt","AudienceStatistics","total","perQuestion","stat","DisplayedStat","additionalClass","onClick","juxtastatInfiniteDisplay","wholeHistory","sortedIndicesAll","currentOrdinal","currentVal","ordinals","mask","sortedIndicesFilt","_getInfiniteQuizzes","seedVersions","numCorrects","thisIndex","seed","version","_computeOrdinalsAndIndices","index","_","sortedIndices","_juxtastatInfiniteDisplay","QuizResult","bestIndex","button","getCachedPerQuestionStats","stats","setStats","quizFriends","reportToServer","getPerQuestionStats","correctPattern","authError","dismiss","nagSignIn","NotificationBanner","Summary","ShareButton","ordinalThis","thisOrdinal","TimeToNextQuiz","JuxtastatInfiniteButton","QuizResultRow","qf","OtherQuizzesButtons","compactRepr","asb","ActualShareButton","CheckboxSetting","buttonRef","todayName","quizKind","medal","summaryText","thisURL","data","_summaryTexts","redAndGreenSquares","contents","setTime","interval","setInterval","time","clearInterval","timerStyle","msRemaining","renderTimeRemaining","summaryTexts","incorrect","prefix","line","JuxtastatQuizResultRow","RetrostatQuizResultRow","GenericQuizResultRow","comparison","firstStyle","secondStyle","Value","statColumn","ComparisonLink","q","children","settings","Settings","getVector","settingsOverrides","questionStatPath","parents","statParents","categoryId","year","allGroups","group","allYears","y","toCompactRepresentation","currentSymbol","currentCount","add","symbol","last","_last","emojiForCount","_iteratorError","lines","QuizPanel","QuizPanelNoResets","quizHistory","setQuizHistory","_quizHistory_props_quizDescriptor_name","headerClass","persistentQuizHistory","transientQuizHistory","setTransientQuizHistory","newHistory","waitingForTime","setWaitingForTime","waitingForNextQuestion","setWaitingForNextQuestion","questions","setQuestions","validQuizInfiniteVersions","PageTemplate","todaysQuizHistory","quizDone","getCorrectPattern","missing","questionsExpected","waiting","newQuestions","console","setTodaysQuizHistory","historyToday","onSelect","selected","_quiz_length","message","LongLoad","currentQuizMode","otherQuizPages","useMemo","mode","todoQuizzes","setTodoQuizzes","cancel","quizDatas","pageDescriptor","loadPageDescriptor","otherQuizButtonStyle","_localStorage_getItem","reference","offsetForTesting","debugMillis","startOfDay","getDailyOffsetNumber","offset","getRetrostatOffsetNumber","daily","dayStart","timeToEndOfDay","start","dayEnd","timeToEndOfWeek","weekId","weekEnd","weekStart","weekNumber","renderTimeWithinDay","ms","seconds","secondsString","secondRemainder","minutesString","minutesRemainder","hoursString","hoursRemainder","kind","days","timeString","addFriendFromLink","newFriendName","email","idOrEmail","dupFriend","response"],"mappings":"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"}