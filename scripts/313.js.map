{"version":3,"file":"313.js","sources":["webpack://assets/./src/components/GenericShareButton.tsx","webpack://assets/./src/data/syau_region_types.ts","webpack://assets/./src/syau/EditableSelector.tsx","webpack://assets/./src/syau/SYAULocalStorage.tsx","webpack://assets/./src/syau/syau-map.tsx","webpack://assets/./src/syau/syau-panel.tsx"],"sourcesContent":["import React, { CSSProperties, ReactNode } from 'react'\nimport { isFirefox, isMobile } from 'react-device-detect'\n\nimport { useColors } from '../page_template/colors'\n\nexport function GenericShareButton(props: {\n    buttonRef: React.RefObject<HTMLButtonElement>\n    produceSummary: () => Promise<[string, string]>\n}): ReactNode {\n    const colors = useColors()\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- We need to check the condition for browser compatibility.\n    const canShare = navigator.canShare?.({ url: 'https://juxtastat.org', text: 'test' }) ?? false\n    const isShare = isMobile && canShare && !isFirefox\n\n    return (\n        <button\n            className=\"serif\"\n            style={buttonStyle(colors.hueColors.green, colors.buttonTextWhite)}\n            ref={props.buttonRef}\n            onClick={async () => {\n                const [text, url] = await props.produceSummary()\n\n                async function copyToClipboard(): Promise<void> {\n                    await navigator.clipboard.writeText(`${text}\\n${url}`)\n                    props.buttonRef.current!.textContent = 'Copied!'\n                }\n\n                if (isShare) {\n                    try {\n                        await navigator.share({\n                            url,\n                            text: `${text}\\n`,\n                        })\n                    }\n                    catch {\n                        await copyToClipboard()\n                    }\n                }\n                else {\n                    await copyToClipboard()\n                }\n            }}\n        >\n            <div>{isShare ? 'Share' : 'Copy'}</div>\n            <div style={{ marginInline: '0.25em' }}></div>\n            <img src=\"/share.png\" className=\"icon\" style={{ width: '1em', height: '1em' }} />\n        </button>\n    )\n}\n\nexport function buttonStyle(color: string, textColor: string): CSSProperties {\n    return {\n        textAlign: 'center',\n        fontSize: '2em',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'row',\n        margin: '0 auto',\n        padding: '0.25em 1em',\n        backgroundColor: color,\n        borderRadius: '0.25em',\n        border: 'none',\n        color: textColor,\n    }\n}\n","export default [\n    \"County\",\n    \"MSA\",\n    \"CSA\",\n    \"Urban Area\",\n    \"CCD\",\n    \"City\",\n    \"Neighborhood\",\n    \"Native Area\",\n    \"Native Statistical Area\",\n    \"Native Subdivision\",\n    \"School District\",\n    \"USDA County Type\",\n    \"Media Market\",\n    \"CA Census Division\",\n    \"CA Census Subdivision\",\n    \"CA Population Center\",\n    \"CA CMA\",\n    \"CA Riding\",\n    \"Continent\",\n    \"Country\",\n    \"Subnational Region\",\n    \"Urban Center\",\n    \"Metropolitan Cluster\"\n] as const","import React, { ReactNode, useContext } from 'react'\n\nimport { CountsByUT } from '../components/countsByArticleType'\nimport { GenericSearchBox } from '../components/search-generic'\nimport syau_region_types from '../data/syau_region_types'\nimport universes_ordered from '../data/universes_ordered'\nimport { Navigator } from '../navigation/Navigator'\nimport { useSubHeaderTextClass } from '../utils/responsive'\n\nimport { populationColumns } from './load'\n\nfunction EditableSelector(props: {\n    items: string[]\n    selected: string | undefined\n    onSelect: (item: string) => ReturnType<Navigator['link']>\n    placeholder: string\n}): ReactNode {\n    let selected = props.selected\n    if (selected !== undefined && !props.items.includes(selected)) {\n        selected = undefined\n    }\n    const subHeaderClass = useSubHeaderTextClass()\n    return (\n        <GenericSearchBox\n            matches={props.items}\n            doSearch={(sq: string) => Promise.resolve(props.items.filter(type => type.toLowerCase().includes(sq.toLowerCase())))}\n            link={props.onSelect}\n            autoFocus={true}\n            placeholder={selected ?? props.placeholder}\n            style={`${subHeaderClass} syau-searchbox`}\n            onChange={(item) => {\n                void props.onSelect(item).onClick()\n            }}\n            renderMatch={(currentMatch, onMouseOver, onClick, style, dataTestId) => (\n                <div\n                    key={currentMatch()}\n                    style={style}\n                    onClick={onClick}\n                    onMouseOver={onMouseOver}\n                    data-test-id={dataTestId}\n                >\n                    {currentMatch()}\n                </div>\n            )}\n        />\n    )\n}\n\nexport function SelectUniverse(props: { typ?: string, universe?: string, counts: CountsByUT }): ReactNode {\n    const navContext = useContext(Navigator.Context)\n    const universes = universes_ordered.filter(\n        universe => props.typ === undefined || populationColumns(props.counts, props.typ, universe).length > 0,\n    )\n    return (\n        <EditableSelector\n            items={universes}\n            selected={props.universe}\n            onSelect={\n                universe => navContext.link({\n                    kind: 'syau',\n                    typ: props.typ,\n                    universe,\n                }, { scroll: { kind: 'none' } })\n            }\n            placeholder=\"Select a universe\"\n        />\n    )\n}\n\nexport function SelectType(props: { typ?: string, universe?: string, counts: CountsByUT }): ReactNode {\n    const types = syau_region_types.filter(\n        type => props.universe === undefined || populationColumns(props.counts, type, props.universe).length > 0,\n    )\n    const navContext = useContext(Navigator.Context)\n    return (\n        <EditableSelector\n            items={types}\n            selected={props.typ}\n            onSelect={\n                type => navContext.link({\n                    kind: 'syau',\n                    typ: type,\n                    universe: props.universe,\n                }, { scroll: { kind: 'none' } })\n            }\n            placeholder=\"Select a region type\"\n        />\n    )\n}\n","import { StoredProperty } from '../quiz/quiz'\nimport { Universe } from '../universe'\n\nimport { SYAUHistory, Type, SYAUHistoryForGame, SYAUHistoryKey } from './syau-panel'\n\nexport class SYAULocalStorage {\n    private constructor() {\n        // Private constructor\n    }\n\n    static shared = new SYAULocalStorage()\n\n    readonly history = new StoredProperty<SYAUHistory>(\n        'syau_history',\n        storedValue => JSON.parse(storedValue ?? '{}') as SYAUHistory,\n        value => JSON.stringify(value),\n    )\n\n    useHistory(typ: Type, universe: Universe): [SYAUHistoryForGame, (newHistory: SYAUHistoryForGame) => void] {\n        const key = `${typ}-${universe}` satisfies SYAUHistoryKey\n        const history = this.history.use()\n        const current: SYAUHistoryForGame = history[key] ?? { guessed: [] }\n        return [current, (newHistory) => {\n            this.history.value = { ...history, [key]: newHistory }\n        }]\n    }\n}\n","import stableStringify from 'json-stable-stringify'\nimport maplibregl from 'maplibre-gl'\nimport React, { ReactNode, useEffect, useMemo, useState } from 'react'\nimport { FullscreenControl, Layer, LngLatLike, MapRef, Source, useMap } from 'react-map-gl/maplibre'\n\nimport { Basemap, CommonMaplibreMap, PolygonFeatureCollection, polygonFeatureCollection } from '../components/map-common'\nimport { notWaiting } from '../utils/promiseStream'\nimport { ICoordinate } from '../utils/protos'\n\nconst circleMarkerRadius = 20\n\ninterface SYAUMapProps {\n    longnames: string[]\n    population: number[]\n    populationOrdinals: number[]\n    centroids: ICoordinate[]\n    isGuessed: boolean[]\n    guessedColor: string\n    notGuessedColor: string\n    voroniHighlightColor: string\n}\n\nexport function SYAUMap(props: SYAUMapProps): ReactNode {\n    const [mapRef, setMapRef] = useState<MapRef | null>(null)\n\n    const [markersOnScreen, setMarkersOnScreen] = useState(new Map<string, maplibregl.Marker>())\n    const [polysOnScreen, setPolysOnScreen] = useState<{ name: string, isGuessed: boolean }[]>([])\n\n    const centroidsData = useMemo(() => {\n        return {\n            type: 'FeatureCollection',\n            features: props.centroids.map((c, idx) => ({\n                type: 'Feature',\n                properties: {\n                    name: props.longnames[idx],\n                    population: props.population[idx],\n                    populationGuessed: props.isGuessed[idx] ? props.population[idx] : 0,\n                    isGuessed: props.isGuessed[idx] ? 1 : 0,\n                    existence: 1,\n                    populationOrdinal: props.populationOrdinals[idx],\n                },\n                geometry: {\n                    type: 'Point',\n                    coordinates: [c.lon!, c.lat!],\n                },\n            })),\n        } satisfies GeoJSON.FeatureCollection\n    }, [props.centroids, props.isGuessed, props.longnames, props.population, props.populationOrdinals])\n\n    const updateMarkers = (): void => {\n        if (mapRef === null) {\n            return\n        }\n\n        const newMarkers = new Map<string, maplibregl.Marker>()\n        const newPolys: { name: string, isGuessed: boolean }[] = []\n\n        const features = mapRef.querySourceFeatures('centroids')\n\n        for (const feature of features) {\n            const coords: LngLatLike = (feature.geometry as GeoJSON.Point).coordinates as LngLatLike\n            const featureProps = feature.properties as (\n                        { populationGuessed: number, population: number, isGuessed: number, existence: number } &\n\n                        // eslint-disable-next-line no-restricted-syntax -- cluster_id comes from maplibre and is out of our control\n                        ({ cluster: true, cluster_id: string } | { cluster: undefined, name: string, populationOrdinal: number }))\n            const featureId = featureProps.cluster ? featureProps.cluster_id : featureProps.name\n\n            let text: string\n            if (featureProps.cluster) {\n                text = `${featureProps.isGuessed}/${featureProps.existence}`\n            }\n            else {\n                newPolys.push({\n                    name: featureProps.name,\n                    isGuessed: featureProps.isGuessed === 1,\n                })\n                if (featureProps.isGuessed) {\n                    text = `#${featureProps.populationOrdinal}`\n                }\n                else {\n                    text = `?`\n                }\n            }\n            const html = circleSector(\n                props.notGuessedColor,\n                props.guessedColor,\n                circleMarkerRadius,\n                2 * Math.PI * (featureProps.populationGuessed / featureProps.population),\n                text,\n            )\n\n            let existingMarker\n            if ((existingMarker = markersOnScreen.get(featureId)) !== undefined) {\n                existingMarker.getElement().innerHTML = html\n                newMarkers.set(featureId, existingMarker)\n            }\n            else {\n                const el = document.createElement('div')\n                el.innerHTML = html\n                el.className = 'syau-marker'\n                el.style.width = `${circleMarkerRadius * 2}px`\n                el.style.height = `${circleMarkerRadius * 2}px`\n                const marker = new maplibregl.Marker({\n                    element: el,\n                }).setLngLat(coords)\n\n                marker.addTo(mapRef.getMap())\n\n                newMarkers.set(featureId, marker)\n                markersOnScreen.set(featureId, marker)\n            }\n        }\n        for (const [oldMarkerId, oldMarker] of markersOnScreen.entries()) {\n            if (!newMarkers.has(oldMarkerId)) oldMarker.remove()\n        }\n        setMarkersOnScreen(newMarkers)\n        newPolys.sort((a, b) => {\n            if (a.name < b.name) return -1\n            if (a.name > b.name) return 1\n            return 0\n        })\n        setPolysOnScreen(newPolys)\n    }\n\n    const features = useMemo(() => polygonFeatureCollection(polysOnScreen.map(({ name, isGuessed }) => ({\n        name,\n        fillColor: isGuessed ? props.guessedColor : props.notGuessedColor,\n        fillOpacity: 0.5,\n        color: isGuessed ? props.guessedColor : props.notGuessedColor,\n        weight: 2,\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- Only want to reload these when polys actually change\n    }))), [stableStringify(polysOnScreen), props.guessedColor, props.notGuessedColor]).use()\n\n    const readyFeatures = useMemo(() => features.filter(notWaiting), [features])\n\n    return (\n        <CommonMaplibreMap\n            ref={setMapRef}\n            onMove={updateMarkers}\n            onData={updateMarkers}\n            style={{ height: 600 }}\n        >\n            <Basemap basemap={useMemo(() => ({ type: 'osm', noLabels: true }), [])} />\n            <FullscreenControl position=\"top-left\" />\n            <Source\n                id=\"centroids\"\n                type=\"geojson\"\n                data={centroidsData}\n                cluster={true}\n                clusterMaxZoom={14}\n                clusterRadius={circleMarkerRadius * 2.5}\n                clusterProperties={{\n                    // keep counts of population and named status in a cluster\n                    population: ['+', ['get', 'population']],\n                    populationGuessed: ['+', ['get', 'populationGuessed']],\n                    isGuessed: ['+', ['get', 'isGuessed']],\n                    existence: ['+', ['get', 'existence']],\n                }}\n            />\n            <Layer\n                id=\"centroid_circle\"\n                type=\"circle\"\n                source=\"centroids\"\n                filter={['!=', 'cluster', true]}\n                paint={{\n                    'circle-color': [\n                        'case',\n                        ['==', ['get', 'isGuessed'], 1],\n                        props.guessedColor,\n                        props.notGuessedColor,\n                    ],\n                    'circle-radius': 0,\n                }}\n            />\n            <PolygonFeatureCollection features={readyFeatures} clickable={false} />\n            <FirstZoom centroids={props.centroids} />\n        </CommonMaplibreMap>\n    )\n}\n\nfunction FirstZoom(props: { centroids: SYAUMapProps['centroids'] }): ReactNode {\n    const map = useMap().current!\n\n    useEffect(() => {\n        const longs = optimizeWrapping(props.centroids.map(c => c.lon!))\n        const lats = props.centroids.map(c => c.lat!)\n        let minLon = Math.min(...longs)\n        let minLat = Math.min(...lats)\n        let maxLon = Math.max(...longs)\n        let maxLat = Math.max(...lats)\n        const lonRange = maxLon - minLon\n        const latRange = maxLat - minLat\n        const padPct = 0.1\n        minLon -= lonRange * padPct\n        minLat -= latRange * padPct\n        maxLon += lonRange * padPct\n        maxLat += latRange * padPct\n        const bounds = [[minLon, minLat], [maxLon, maxLat]] as [[number, number], [number, number]]\n        map.fitBounds(bounds, { animate: false })\n    }, [props.centroids, map])\n\n    return null\n}\n\nfunction circleSector(color1: string, color2: string, radius: number, sizeAngle: number, text: string): string {\n    let startAngle = -Math.PI / 2\n    const singleSectors = []\n    const target = startAngle + sizeAngle\n    let endAngle = Math.min(target, startAngle + Math.PI / 2)\n    for (let i = 0; i < 4; i++) {\n        singleSectors.push(singleSector(radius, startAngle, endAngle, color2))\n        if (endAngle === target) {\n            break\n        }\n        startAngle = endAngle\n        endAngle = Math.min(target, startAngle + Math.PI / 2)\n    }\n\n    const result = [\n        '<div>',\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${radius * 2}\" height=\"${radius * 2}\" viewBox=\"0 0 ${radius * 2} ${radius * 2}\">`,\n        `<circle cx=\"${radius}\" cy=\"${radius}\" r=\"${radius}\" fill=\"${color1}\"></circle>`,\n        ...singleSectors,\n        '</svg>',\n        '<div style=\"position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); width: 100%; text-align: center; font-weight: 500\" class=\"serif\">',\n        text,\n        '</div>',\n        '</div>',\n    ]\n\n    return result.join('')\n}\n\nfunction singleSector(radius: number, startAngle: number, endAngle: number, color2: string): string {\n    const startx = radius + radius * Math.cos(startAngle)\n    const starty = radius + radius * Math.sin(startAngle)\n    const endx = radius + radius * Math.cos(endAngle)\n    const endy = radius + radius * Math.sin(endAngle)\n    return `<path d=\"M${radius},${radius} L${startx},${starty} A${radius},${radius} 1 0,1 ${endx},${endy} z\" fill=\"${color2}\"></path>`\n}\n\nfunction optimizeWrapping(lons: number[]): number[] {\n    const lonsAboutIDL = lons.map(lon => lon > 0 ? lon - 360 : lon)\n    const range = (xs: number[]): number => Math.max(...xs) - Math.min(...xs)\n    if (range(lons) < range(lonsAboutIDL)) {\n        return lons\n    }\n    return lonsAboutIDL\n}\n","import React, { ReactNode, useContext } from 'react'\n\nimport '../common.css'\n\nimport { buttonStyle, GenericShareButton } from '../components/GenericShareButton'\nimport { CountsByUT } from '../components/countsByArticleType'\nimport { CheckboxSetting } from '../components/sidebar'\nimport { Navigator } from '../navigation/Navigator'\nimport { useColors, useJuxtastatColors } from '../page_template/colors'\nimport { useSetting } from '../page_template/settings'\nimport { PageTemplate } from '../page_template/template'\nimport { Universe } from '../universe'\nimport { useHeaderTextClass, useMobileLayout, useSubHeaderTextClass } from '../utils/responsive'\nimport { pluralize } from '../utils/text'\n\nimport { SelectType, SelectUniverse } from './EditableSelector'\nimport { SYAULocalStorage } from './SYAULocalStorage'\nimport { confirmMatch, SYAUData } from './load'\nimport { SYAUMap } from './syau-map'\n\nexport type Type = string\n\nexport type SYAUHistoryKey = `${Type}-${Universe}`\n\nexport interface SYAUHistoryForGame {\n    guessed: string[]\n}\n\nexport type SYAUHistory = Record<SYAUHistoryKey, SYAUHistoryForGame>\n\nexport function SYAUPanel(props: { typ?: string, universe?: Universe, counts: CountsByUT, syauData?: SYAUData }): ReactNode {\n    const headerClass = useHeaderTextClass()\n    const subHeaderClass = useSubHeaderTextClass()\n    return (\n        <PageTemplate>\n            <div className={headerClass}>So you&apos;re an urbanist?</div>\n            <div className={subHeaderClass}>\n                Name every\n                <SelectType typ={props.typ} universe={props.universe} counts={props.counts} />\n                {' '}\n                in\n                <SelectUniverse typ={props.typ} universe={props.universe} counts={props.counts} />\n            </div>\n            {\n                props.syauData === undefined\n                    ? undefined\n                    : (\n                            <div>\n                                <div style={{ marginBlockEnd: '1em' }} />\n                                <SYAUGame typ={props.typ!} universe={props.universe!} syauData={props.syauData} />\n                            </div>\n                        )\n            }\n        </PageTemplate>\n    )\n}\n\nfunction GuessInputField(props: { guessCallback: (query: string) => boolean }): ReactNode {\n    const [syauRequireEnter] = useSetting('syauRequireEnter')\n    return (\n        <input\n            type=\"text\"\n            id=\"syau-input\"\n            placeholder=\"Type a region name\"\n            style={{ width: '86%' }}\n            onChange={(e) => {\n                if (syauRequireEnter) {\n                    return\n                }\n                if (props.guessCallback(e.target.value)) {\n                    e.target.value = ''\n                }\n            }}\n            onKeyDown={(e) => {\n                if (syauRequireEnter && e.key === 'Enter') {\n                    props.guessCallback(e.currentTarget.value)\n                    e.currentTarget.value = ''\n                }\n            }}\n        />\n    )\n}\n\nexport function SYAUGame(props: { typ: string, universe: Universe, syauData: SYAUData }): ReactNode {\n    const colors = useColors()\n    const jColors = useJuxtastatColors()\n    const [history, setHistory] = SYAULocalStorage.shared.useHistory(props.typ, props.universe)\n    const totalPopulation = props.syauData.populations.reduce((a, b) => a + b, 0)\n    const totalPopulationGuessed = history.guessed.map(name => props.syauData.populations[props.syauData.longnameToIndex[name]]).reduce((a, b) => a + b, 0)\n    const [alreadyGuessed, setAlreadyGuessed] = React.useState(false)\n\n    const shareRef = React.createRef<HTMLButtonElement>()\n\n    const pluralType = pluralize(props.typ)\n\n    function attemptGuess(query: string): boolean {\n        const approxMatches = props.syauData.longnames.filter((_, idx) => confirmMatch(props.syauData.matchChunks[idx], query))\n        const unguessedApproxMatches = approxMatches.filter(name => !history.guessed.includes(name))\n        setAlreadyGuessed(approxMatches.length !== 0 && unguessedApproxMatches.length === 0)\n        if (unguessedApproxMatches.length === 0) {\n            return false\n        }\n        setHistory({ guessed: [...history.guessed, ...unguessedApproxMatches] })\n        return true\n    }\n\n    const isGuessed = props.syauData.longnames.map(name => history.guessed.includes(name))\n    const indicatorColor = alreadyGuessed ? jColors.correct : colors.background\n\n    return (\n        <div>\n            <div style={{ margin: 'auto', width: '50%' }}>\n                <div style={{ display: 'flex', justifyContent: 'center', margin: 'auto' }}>\n                    <div style={{ width: '7%', height: '1.5em' }} />\n                    <GuessInputField guessCallback={attemptGuess} />\n                    <div style={{ width: '2%', height: '1.5em' }} />\n                    <div style={{ width: '5%', height: '1.5em', backgroundColor: indicatorColor }} />\n                </div>\n                <div style={{ marginBlockEnd: '1em' }} />\n                <div style={{ textAlign: 'center' }} id=\"test-syau-status\">\n                    <b>\n                        {history.guessed.length}\n                        /\n                        {props.syauData.longnames.length}\n                    </b>\n                    {' '}\n                    {pluralType}\n                    {' '}\n                    named, which is\n                    {' '}\n                    <b>\n                        {renderPct(totalPopulationGuessed / totalPopulation)}\n                    </b>\n                    {' '}\n                    of the total population.\n                </div>\n                <div style={{ marginBlockEnd: '1em' }} />\n            </div>\n            <SYAUMap\n                longnames={props.syauData.longnames}\n                population={props.syauData.populations}\n                populationOrdinals={props.syauData.populationOrdinals}\n                centroids={props.syauData.centroids}\n                isGuessed={isGuessed}\n                guessedColor={jColors.correct}\n                notGuessedColor={jColors.incorrect}\n                voroniHighlightColor={colors.hueColors.blue}\n            />\n            <div style={{ marginBlockEnd: '1em' }} />\n            <div style={{ display: 'flex', justifyContent: 'center', margin: 'auto' }}>\n                <div style={{ display: 'inline-block' }}>\n                    <GenericShareButton\n                        buttonRef={shareRef}\n                        produceSummary={\n                            () => {\n                                const frac = totalPopulationGuessed / totalPopulation\n                                const numGreen = Math.floor(10 * frac)\n                                const numRed = 10 - numGreen\n                                const emoji = jColors.correctEmoji.repeat(numGreen) + jColors.incorrectEmoji.repeat(numRed)\n                                const lines = [\n                                    `I named ${history.guessed.length}/${props.syauData.longnames.length} ${pluralType} in ${props.universe}`,\n                                    `(${renderPct(frac)} of the population)`,\n                                    '',\n                                    emoji,\n                                    '',\n                                ]\n                                // eslint-disable-next-line no-restricted-syntax -- Sharing\n                                const hash = window.location.hash\n                                const url = `https://soyoureanurbanist.org${hash === '' ? '' : `/${hash}`}`\n                                return Promise.resolve([lines.join('\\n'), url])\n                            }\n                        }\n                    />\n                </div>\n                <div style={{ display: 'inline-block', marginInlineStart: '1em' }} />\n                <div style={{ display: 'inline-block' }}>\n                    <button\n                        style={buttonStyle(colors.hueColors.red, colors.buttonTextWhite)}\n                        onClick={() => {\n                        // check if they are sure\n                            if (window.confirm('Are you sure you want to reset your progress?')) {\n                                setHistory({ guessed: [] })\n                            }\n                        }}\n                    >\n                        Reset\n                    </button>\n                </div>\n            </div>\n            <div style={{ marginBlockEnd: '1em' }} />\n            <div style={{ display: 'flex', justifyContent: 'center', margin: 'auto' }}>\n                <CheckboxSetting\n                    name=\"Require pressing enter to formalize a guess\"\n                    settingKey=\"syauRequireEnter\"\n                    testId=\"syauRequireEnter\"\n                />\n            </div>\n            <div style={{ marginBlockEnd: '1em' }} />\n            <SYAUTable\n                longnames={props.syauData.longnames}\n                populationOrdinals={props.syauData.populationOrdinals}\n                isGuessed={isGuessed}\n            />\n        </div>\n    )\n}\n\nfunction renderPct(frac: number): string {\n    const pct = 100 * frac\n    if (pct === 100) {\n        return '100%'\n    }\n    if (pct > 99.9) {\n        return `${pct.toFixed(3)}%`\n    }\n    if (pct > 99) {\n        return `${pct.toFixed(2)}%`\n    }\n    if (pct > 90) {\n        return `${pct.toFixed(1)}%`\n    }\n    return `${pct.toFixed(0)}%`\n}\n\nfunction SYAUTable(props: { longnames: string[], populationOrdinals: number[], isGuessed: boolean[] }): ReactNode {\n    const colors = useColors()\n    const jColors = useJuxtastatColors()\n    const isMobile = useMobileLayout()\n    const navContext = useContext(Navigator.Context)\n\n    const columns = isMobile ? 3 : 5\n    // const rows = Math.ceil(props.longnames.length / columns)\n\n    return (\n        <div style={{ display: 'grid', gridTemplateColumns: `repeat(${columns}, 1fr)`, gap: '1em' }}>\n            {props.longnames.map((name, idx) => {\n                const ordinal = props.populationOrdinals[idx]\n                const guessed = props.isGuessed[idx]\n                const color = guessed ? colors.buttonTextWhite : colors.textMain\n\n                const linkProps = guessed\n                    ? navContext.link({\n                        kind: 'article',\n                        longname: name,\n                    }, { scroll: { kind: 'position', top: 0 } })\n                    : {}\n\n                return (\n                    <a\n                        key={name}\n                        className={guessed ? 'testing-syau-named' : 'testing-syau-not-named'}\n                        style={{\n                            backgroundColor: guessed ? jColors.correct : colors.background,\n                            padding: '1em',\n                            borderRadius: '5px',\n                            boxShadow: guessed ? `0 0 10px ${jColors.correct}` : `0 0 10px ${colors.background}`,\n                            borderColor: colors.textMain,\n                            borderWidth: '0.2em',\n                            borderStyle: 'solid',\n                            color,\n                            textDecoration: 'none',\n                        }}\n                        {\n                            ...linkProps\n                        }\n                    >\n                        <div style={{ color, fontWeight: 600 }}>\n                            {ordinal}\n                            .\n                            {' '}\n                            {guessed ? name.split(',')[0] : ''}\n                        </div>\n                    </a>\n                )\n            },\n            )}\n        </div>\n    )\n}\n"],"names":["GenericShareButton","props","_navigator_canShare1","colors","useColors","canShare","isShare","isMobile","isFirefox","buttonStyle","_ref","text","url","copyToClipboard","navigator","a","color","textColor","EditableSelector","selected","undefined","subHeaderClass","useSubHeaderTextClass","GenericSearchBox","sq","Promise","type","item","currentMatch","onMouseOver","onClick","style","dataTestId","SelectUniverse","navContext","useContext","Navigator","universes","universes_ordered","universe","populationColumns","SelectType","types","syau_region_types","SYAULocalStorage","StoredProperty","storedValue","JSON","value","useHistory","typ","_history_key","key","history","newHistory","SYAUMap","_useState","mapRef","setMapRef","_useState1","Map","markersOnScreen","setMarkersOnScreen","_useState2","polysOnScreen","setPolysOnScreen","centroidsData","useMemo","c","idx","updateMarkers","newMarkers","newPolys","features","_iteratorError","feature","coords","featureProps","featureId","html","circleSector","color1","color2","radius","sizeAngle","startAngle","Math","singleSectors","target","endAngle","i","singleSector","startx","starty","endx","endy","result","existingMarker","el","document","circleMarkerRadius","marker","maplibregl","_iteratorError1","oldMarkerId","oldMarker","b","polygonFeatureCollection","name","isGuessed","stableStringify","readyFeatures","notWaiting","CommonMaplibreMap","Basemap","FullscreenControl","Source","Layer","PolygonFeatureCollection","FirstZoom","map","useMap","useEffect","lons","_Math","_Math1","lonsAboutIDL","range","_Math2","_Math3","longs","lon","xs","lats","minLon","minLat","maxLon","maxLat","lonRange","latRange","bounds","SYAUPanel","headerClass","useHeaderTextClass","PageTemplate","SYAUGame","GuessInputField","syauRequireEnter","_useSetting","e","jColors","useJuxtastatColors","_SYAULocalStorage_shared_useHistory","setHistory","totalPopulation","totalPopulationGuessed","_React_useState","alreadyGuessed","setAlreadyGuessed","shareRef","React","pluralType","pluralize","indicatorColor","query","approxMatches","_","confirmMatch","unguessedApproxMatches","renderPct","frac","numGreen","emoji","lines","hash","window","CheckboxSetting","SYAUTable","pct","useMobileLayout","ordinal","guessed","linkProps"],"mappings":"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"}