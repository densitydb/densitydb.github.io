"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["152"],{68431:function(e,t,n){n.d(t,{J:()=>o});var r=n(72668);function o(e){var t=e.size,n=e.color,o=e.src,i=e.style;return r.createElement("div",{style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({backgroundColor:n,width:t,height:t,maskImage:"url(".concat(o,")"),maskRepeat:"no-repeat",maskSize:"contain",maskPosition:"center"},i)})}},20306:function(e,t,n){n.r(t),n.d(t,{ComparisonMapButtons:()=>G,ComparisonPanel:()=>I}),n(71540),n(50457);var r=n(72668),o=n(6381),i=n(45437),a=n(44852),l=n(27281),c=n(82074),u=n(79779),s=n(22712),m=n(13736),f=n(36195),p=n(11625),d=n(78773),y=n(68431),h=n(6735),v=n(72082),g=n(85620),b=n(85954),E=n(65547),k=n(65899),w=n(15198),O=n(20110);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw r}}return i}}(e,t)||_(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(R=function(){return!!e})()}function I(e){var t,n,y,v,E,O=(0,a.cI)(),x=(0,r.useRef)(null),P=(0,r.useRef)(null),S=e.articles.map(function(e){return e.shortname}).join(" vs "),_=e.articles.map(function(e){return e.longname}),R=(0,l.rV)((0,c.fX)()),I=e.rows(R),N=I[0].map(function(e,t){return I.map(function(e){return e[t]})}),B=(0,f.wd)(),F=N.map(function(e){return e.every(function(e){return"heterogenous-sources"!==e.disclaimer})}),G=e.articles.every(function(t){return t.articleType===e.articles[0].articleType})&&(0===F.length||F.some(function(e){return e})),J=G?["statval","statval_unit","statistic_ordinal","statistic_percentile"]:["statval","statval_unit"],L=B?4:6,M=(0,l.rV)(N.filter(function(e){return e.some(function(e){return void 0!==e.extraStat})}).map(function(e){var t=A(e,1)[0].statpath;return(0,l.Vv)(t)})),H=N.map(function(e){var t,n=A(e,1)[0].statpath;return null!=(t=M[(0,l.Vv)(n)])&&t}),U=H.filter(function(e){return e}).length,X=(G?1.5:1)*e.articles.length+1,q=(G?1.5:1)*(I[0].length+U)+1.5,K=X>L&&X>q;K&&(X=(E=[q,X])[0],q=E[1]);var Q=K?.24:.18,Z=K?I[0].length:e.articles.length,$=100*(1-Q)/(Z+(K?U:0)),Y=function(e){return K&&H[e]?2*$:$},ee=function(){return r.createElement("div",{style:{width:"".concat(100*Q,"%")}})},et=function(e){return K&&H[e]?r.createElement("div",{key:"spacer_".concat(e),style:{width:"".concat($,"%")}}):null},en=N.map(function(e){return e.map(function(e){return e.statval}).reduce(function(e,t,n,r){return isNaN(t)?e:void 0===e||t>r[e]?n:e},void 0)}),er=(0,f.Kn)(),eo=(0,f.q0)(),ei=(0,f.Pf)("right"),ea=(0,f.Pf)(),el=(0,s.jg)(),ec=(0,r.useContext)(o.C.Context),eu=e.articles.every(function(t){return t.articleType===e.articles[0].articleType})?e.articles[0].articleType:void 0,es=function(t,n){return r.createElement("div",{key:"heading_".concat(t),style:{width:"".concat(n,"%")}},r.createElement(V,{longname:e.articles[t].longname,includeDelete:e.articles.length>1,onDelete:function(){ec.navigate({kind:"comparison",universe:el,longnames:_.filter(function(e,n){return n!==t})},{history:"push",scroll:{kind:"none"}})},onReplace:function(e){return ec.link({kind:"comparison",universe:el,longnames:_.map(function(n,r){return r===t?e:n})},{scroll:{kind:"none"}})},manipulationJustify:K?"center":"flex-end",sharedTypeOfAllArticles:eu}))},em=function(e){return r.createElement("div",{style:{display:"flex"}},ee(),Array.from({length:Z}).map(function(t,n){return r.createElement("div",{key:"bar_".concat(n),style:{width:"".concat(Y(n),"%"),height:"5px",backgroundColor:e(n)}})}))},ef=function(e){return[r.createElement(z,{key:"color",highlightIndex:void 0}),r.createElement(w.GT,{key:"statname",onlyColumns:["statname"],simpleOrdinals:!0,totalWidth:100*(Q-.02),statNameOverride:e})].concat(T(Array.from({length:Z}).map(function(e,t){return[r.createElement(w.GT,{key:"headerCells_".concat(t),onlyColumns:J,simpleOrdinals:!0,totalWidth:$}),et(t)]})))},ep=function(e,t,n){var o,i=null!=(o=N[e].find(function(e){return void 0!==e.extraStat}))?o:N[e][0];return r.createElement("div",{key:"statName_".concat(i.statpath),className:"serif value",style:{width:"".concat(t,"%"),padding:"1px",textAlign:n?"center":void 0}},r.createElement(w.XL,{row:i,longname:_[0],currentUniverse:el,center:n}))},ed=function(e,t){return[r.createElement(w.VV,{key:"rowCells_".concat(e,"_").concat(t),row:I[e][t],longname:_[e],onlyColumns:J,blankColumns:F[t]?[]:["statistic_ordinal","statistic_percentile"],simpleOrdinals:!0,statisticStyle:en[t]===e?{backgroundColor:(0,m.bt)(D(O.hueColors,e),O.mixPct/100,O.background)}:{},onNavigate:function(t){ec.navigate({kind:"comparison",universe:ec.universe,longnames:_.map(function(n,r){return r===e?t:n})},{history:"push",scroll:{kind:"none"}})},totalWidth:$}),et(t)]},ey=function(t){return N[t].map(function(t,n){return j(C({},t),{color:D(O.hueColors,n),shortname:e.articles[n].shortname})})};return r.createElement(p.v.Provider,{value:K},r.createElement(h.Gp,null),r.createElement(u.P,{screencapElements:function(){return{path:"".concat((0,i.Nw)(S),".png"),overallWidth:2*x.current.offsetWidth,elementsToRender:[x.current,P.current]}},hasUniverseSelector:!0,universes:e.universes},r.createElement("div",null,r.createElement("div",{className:er},"Comparison"),r.createElement("div",{className:eo},S),r.createElement("div",{style:{marginBlockEnd:"16px"}}),r.createElement("div",{style:{display:"flex"}},r.createElement("div",{style:{width:"".concat(100*Q,"%")}}),r.createElement("div",{style:{width:"".concat(50*(1-Q),"%"),marginRight:"1em"}},r.createElement("div",{className:"serif",style:ei},"Add another region:")),r.createElement("div",{style:{width:"".concat(50*(1-Q),"%")}},r.createElement(k.R,{style:j(C({},ea),{width:"100%"}),placeholder:"Name",link:function(e){return ec.link({kind:"comparison",universe:el,longnames:T(_).concat([e])},{scroll:{kind:"none"}})},autoFocus:!1,prioritizeArticleType:eu}))),r.createElement("div",{style:{marginBlockEnd:"1em"}}),(v=r.createElement("div",{ref:x},K?(t=H.some(function(e){return e}),n=b.B,y="379.5px",r.createElement(r.Fragment,null,em(function(e){return void 0!==en[e]?D(O.hueColors,en[e]):void 0}),r.createElement("div",{style:{display:"flex",flexDirection:"row"}},ee(),N.map(function(e,t){return ep(t,Y(t),!0)})),r.createElement("div",{style:{position:"relative",minHeight:t?"calc(".concat(n," + ").concat(y,")"):void 0}},r.createElement(w.wD,null,ef("Region")),e.articles.map(function(n,o){return r.createElement(w.Oo,{key:"TableRowContainer_".concat(o),index:o,minHeight:t?"calc(".concat(y," / ").concat(e.articles.length,")"):void 0},r.createElement(z,{highlightIndex:o}),es(o,(Q-.04)*100),r.createElement(z,{highlightIndex:o}),I[o].map(function(e,t){return ed(o,t)}))}),N.map(function(e,t){if(!H[t])return null;var n=100*Q+Array.from({length:t}).reduce(function(e,t,n){return e+Y(n)},$);return r.createElement("div",{key:"statPlot_".concat(t),style:{position:"absolute",top:0,left:"".concat(n,"%"),bottom:0,width:"".concat($,"%")}},r.createElement(g.G,{statDescription:e[0].renderedStatname,plotProps:ey(t)}))})))):r.createElement(r.Fragment,null,em(function(e){return D(O.hueColors,e)}),r.createElement("div",{style:{display:"flex"}},ee(),Array.from({length:e.articles.length}).map(function(e,t){return es(t,$)})),em(function(e){return D(O.hueColors,e)}),r.createElement(w.wD,null,ef()),N.map(function(e,t){return r.createElement("div",{key:"TableRowContainer_".concat(t)},r.createElement(w.Oo,{index:t},r.createElement(z,{key:"color",highlightIndex:en[t]}),ep(t,100*(Q-.02),!1),N[t].map(function(e,n){return ed(n,t)})),H[t]?r.createElement("div",{style:{width:"100%",position:"relative"}},r.createElement(g.G,{statDescription:e[0].renderedStatname,plotProps:ey(t)})):null)})),r.createElement(d.Q,null)),X>L?r.createElement("div",{style:{overflowX:"scroll"}},r.createElement("div",{style:{width:"".concat(100*X/(L-.7),"%")}},v)):v),r.createElement("div",{className:"gap"}),r.createElement("div",{ref:P},r.createElement(W,{longnames:e.articles.map(function(e){return e.longname}),colors:e.articles.map(function(e,t){return D(O.hueColors,t)}),basemap:{type:"osm"},mapPartitions:e.mapPartitions})))))}function D(e,t){var n=[e.blue,e.orange,e.purple,e.red,e.grey,e.pink,e.yellow,e.green];return n[t%n.length]}function z(e){var t=e.highlightIndex,n=(0,a.cI)();return r.createElement("div",{key:"color",style:{width:"".concat(2,"%"),alignSelf:"stretch",position:"relative"}},r.createElement("div",{style:{backgroundColor:void 0===t?n.background:D(n.hueColors,t),height:"100%",width:"50%",left:"25%",position:"absolute"}}))}var N="24px";function B(e){var t=e.color,n=e.onClick,o=e.text,i=e.image,l=(0,f.wd)(),c=(0,p.T)(),u=(0,a.cI)();return r.createElement("div",{style:{height:N,lineHeight:N,cursor:"pointer",paddingLeft:"0.5em",paddingRight:"0.5em",borderRadius:"0.25em",verticalAlign:"middle",backgroundColor:t},className:"serif manipulation-button-".concat(o),onClick:n},l&&c?r.createElement(y.J,{src:i,size:N,color:u.textMain}):o)}function V(e){var t=e.longname,n=e.includeDelete,i=e.onDelete,l=e.onReplace,c=e.manipulationJustify,u=e.sharedTypeOfAllArticles,m=(0,a.cI)(),p=A(r.useState(!1),2),d=p[0],y=p[1],h=(0,s.jg)(),v=(0,f.Pf)(),g=r.createElement("div",{style:{height:N}},r.createElement("div",{style:{display:"flex",justifyContent:c,height:"100%"}},r.createElement(B,{color:m.unselectedButton,onClick:function(){y(!d)},text:"replace",image:"/replace.png"}),n?r.createElement(r.Fragment,null,r.createElement("div",{style:{width:"5px"}}),r.createElement(B,{color:m.unselectedButton,onClick:i,text:"delete",image:"/close.png"})):null,r.createElement("div",{style:{width:"5px"}}))),b=(0,E.Lm)(),w=(0,r.useContext)(o.C.Context);return r.createElement("div",null,b?void 0:g,r.createElement("div",{style:{height:"5px"}}),r.createElement("a",j(C({className:"serif"},w.link({kind:"article",longname:t,universe:h},{scroll:{kind:"position",top:0}})),{style:{textDecoration:"none"}}),r.createElement("div",{style:(0,f.Pf)()},t)),d?r.createElement(k.R,{autoFocus:!0,style:j(C({},v),{width:"100%"}),placeholder:"Replacement",onChange:function(){y(!1)},link:l,prioritizeArticleType:u}):null)}function W(e){var t=e.mapPartitions.map(function(t){return t.map(function(t){return e.longnames[t]})}),n=(0,r.useRef)([]);(0,r.useEffect)(function(){var e=setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var o,i=n.current[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(null!==a)try{a.zoomToAll()}catch(e){O.warn(e)}}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}},0);return function(){clearTimeout(e)}},[t]),n.current=Array(e.mapPartitions.length).fill(null);var o=(0,f.wd)();return(0,r.useMemo)(function(){var t=function(t,n){return e.mapPartitions.slice(t,n).map(function(e,n){return[t+n,e]})};if(o){for(var n=[],r=0;r<e.mapPartitions.length;r+=2)n.push(t(r,r+2));return n}for(var i=[],a=0;a<e.mapPartitions.length;a+=3)e.mapPartitions.length-a==4?(i.push(t(a,a+2),t(a+2,a+4)),a+=1):i.push(t(a,a+3));return i},[o,e.mapPartitions]).map(function(t,o){return r.createElement("div",{key:o,style:{display:"flex",width:"100%"}},t.map(function(o){var i=A(o,2),a=i[0],l=i[1];return r.createElement("div",{key:a,style:{position:"relative",width:"".concat(100/t.length,"%")}},r.createElement(F,j(C({ref:function(e){return n.current[a]=e}},e),{longnames:l.map(function(t){return e.longnames[t]}),colors:l.map(function(t){return e.colors[t]}),attribution:a===e.mapPartitions.length-1?"startVisible":"none"})))}))})}var F=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(){var e,t;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return e=n,t=arguments,e=P(e),function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,R()?Reflect.construct(e,t||[],P(this).constructor):e.apply(this,t))}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&S(n,e),t=[{key:"buttons",value:function(){return r.createElement(G,{map:this})}},{key:"zoomButton",value:function(e,t,n){return r.createElement("div",{key:"zoomButton_".concat(e),style:{display:"inline-block",width:"2em",height:"2em",backgroundColor:t,borderRadius:"50%",marginLeft:"5px",marginRight:"5px",cursor:"pointer"},onClick:n})}},{key:"computeShapesToRender",value:function(){var e=this;return Promise.resolve({shapes:this.props.longnames.map(function(t,n){return{name:t,spec:{type:"polygon",style:{color:e.props.colors[n],fillColor:e.props.colors[n],fillOpacity:.5,weight:1}},meta:{}}}),zoomIndex:-1})}},{key:"mapDidRender",value:function(){return this.zoomToAll({animate:!1}),Promise.resolve()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(v.J9);function G(e){var t=(0,a.cI)();return(0,E.Lm)()?null:r.createElement("div",{style:{display:"flex",backgroundColor:t.background,padding:"0.5em",borderRadius:"0.5em",alignItems:"center"}},r.createElement("span",{className:"serif",style:{fontSize:"15px",fontWeight:500}},"Zoom to:"),r.createElement("div",{style:{width:"0.25em"}}),e.map.zoomButton(-1,t.textMain,function(){e.map.zoomToAll()}),e.map.props.longnames.map(function(t,n){return e.map.zoomButton(n,e.map.props.colors[n],function(){e.map.zoomTo(t)})}))}}}]);
//# sourceMappingURL=152.js.map