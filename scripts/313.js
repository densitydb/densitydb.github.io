"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["313"],{25486:function(e,t,n){n.d(t,{T:()=>p,j:()=>f});var r=n(72668),o=n(76293),a=n(66547);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)})}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],i=!0,u=!1;try{for(o=o.call(e);!(i=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){u=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(u)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){var s=[u,c];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}function p(e){var t,n,i,u=(0,a.cI)(),p=null!=(i=null==(t=(n=navigator).canShare)?void 0:t.call(n,{url:"https://juxtastat.org",text:"test"}))&&i,d=o.isMobile&&p&&!o.isFirefox;return r.createElement("button",{className:"serif",style:f(u.hueColors.green,u.buttonTextWhite),ref:e.buttonRef,onClick:function(){return c(function(){var t,n,r;function o(){return c(function(){return l(this,function(t){switch(t.label){case 0:return[4,navigator.clipboard.writeText("".concat(n,"\n").concat(r))];case 1:return t.sent(),e.buttonRef.current.textContent="Copied!",[2]}})})()}return l(this,function(a){switch(a.label){case 0:return[4,e.produceSummary()];case 1:if(n=(t=s.apply(void 0,[a.sent(),2]))[0],r=t[1],!d)return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,navigator.share({url:r,text:"".concat(n,"\n")})];case 3:case 5:return a.sent(),[3,6];case 4:return a.sent(),[4,o()];case 6:return[3,9];case 7:return[4,o()];case 8:a.sent(),a.label=9;case 9:return[2]}})})()}},r.createElement("div",null,d?"Share":"Copy"),r.createElement("div",{style:{marginInline:"0.25em"}}),r.createElement("img",{src:"/share.png",className:"icon",style:{width:"1em",height:"1em"}}))}function f(e,t){return{textAlign:"center",fontSize:"2em",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",margin:"0 auto",padding:"0.25em 1em",backgroundColor:e,borderRadius:"0.25em",border:"none",color:t}}},97479:function(e,t,n){n.r(t),n.d(t,{SYAUGame:()=>J,SYAUPanel:()=>L});var r=n(72668);n(71540);var o=n(25486),a=n(98234),i=n(6381),u=n(66547),c=n(27281),s=n(79779),l=n(36195),p=n(59070),f=n(48192);let d=["County","MSA","CSA","Urban Area","CCD","City","Neighborhood","Native Area","Native Statistical Area","Native Subdivision","School District","USDA County Type","Media Market","CA Census Division","CA Census Subdivision","CA Population Center","CA CMA","CA Riding","Continent","Country","Subnational Region","Urban Center","Metropolitan Cluster"];var y=n(4050),m=n(46347);function h(e){var t=e.selected;void 0===t||e.items.includes(t)||(t=void 0);var n=(0,l.q0)();return r.createElement(f.p,{matches:e.items,doSearch:function(t){return Promise.resolve(e.items.filter(function(e){return e.toLowerCase().includes(t.toLowerCase())}))},link:e.onSelect,autoFocus:!0,placeholder:null!=t?t:e.placeholder,style:"".concat(n," syau-searchbox"),onChange:function(t){e.onSelect(t).onClick()},renderMatch:function(e,t,n,o,a){return r.createElement("div",{key:e(),style:o,onClick:n,onMouseOver:t,"data-test-id":a},e())}})}function v(e){var t=(0,r.useContext)(i.C.Context),n=y.Z.filter(function(t){return void 0===e.typ||(0,m.W$)(e.counts,e.typ,t).length>0});return r.createElement(h,{items:n,selected:e.universe,onSelect:function(n){return t.link({kind:"syau",typ:e.typ,universe:n},{scroll:{kind:"none"}})},placeholder:"Select a universe"})}function b(e){var t=d.filter(function(t){return void 0===e.universe||(0,m.W$)(e.counts,t,e.universe).length>0}),n=(0,r.useContext)(i.C.Context);return r.createElement(h,{items:t,selected:e.typ,onSelect:function(t){return n.link({kind:"syau",typ:t,universe:e.universe},{scroll:{kind:"none"}})},placeholder:"Select a region type"})}var g=n(72447);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");w(this,"history",new g.StoredProperty("syau_history",function(e){return JSON.parse(null!=e?e:"{}")},function(e){return JSON.stringify(e)}))}return e=[{key:"useHistory",value:function(e,t){var n,r=this,o="".concat(e,"-").concat(t),a=this.history.use();return[null!=(n=a[o])?n:{guessed:[]},function(e){var t,n;r.history.value=(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}({},a),n=null!=(n=w({},o,e))?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t)}]}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();w(S,"shared",new S);var O=n(50038),C=n.n(O),k=n(72082),E=n(77053);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,u,"next",e)}function u(e){j(a,r,o,i,u,"throw",e)}i(void 0)})}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t,n){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}function R(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){var s=[u,c];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}var N=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(){var e,t,r;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return t=n,r=arguments,t=D(t),P(e=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,T()?Reflect.construct(t,r||[],D(this).constructor):t.apply(this,r)),"alreadyFitBounds",!1),P(e,"name_to_index",void 0),P(e,"markersOnScreen",{}),P(e,"polysOnScreen",[]),P(e,"updateAttached",!1),e}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&I(n,e),t=[{key:"computeShapesToRender",value:function(){var e=this;return Promise.resolve({shapes:this.polysOnScreen.map(function(t){var n=t.name,r=t.isGuessed;return{name:n,spec:{type:"polygon",style:{fillColor:r?e.props.guessedColor:e.props.notGuessedColor,fillOpacity:.5,color:r?e.props.guessedColor:e.props.notGuessedColor,weight:2}},notClickable:!0,meta:{}}}),zoomIndex:-1})}},{key:"componentDidUpdate",value:function(e,t){var r=this,o=this;return A(function(){var a;return R(this,function(i){switch(i.label){case 0:return a=this,(e.longnames.length!==this.props.longnames.length||e.longnames.map(function(e,t){return e!==a.props.longnames[t]}).some(function(e){return e}))&&(this.alreadyFitBounds=!1),[4,M(D(n.prototype),"componentDidUpdate",r).call(o,e,t)];case 1:return i.sent(),[2]}})}).call(this)}},{key:"updateCentroidsSource",value:function(e){var t,n,r=this,o={type:"FeatureCollection",features:this.props.centroids.map(function(e,t){return{type:"Feature",properties:{name:r.props.longnames[t],population:r.props.population[t],populationGuessed:r.props.isGuessed[t]?r.props.population[t]:0,isGuessed:+!!r.props.isGuessed[t],existence:1,populationOrdinal:r.props.populationOrdinals[t]},geometry:{type:"Point",coordinates:[e.lon,e.lat]}}})},a=e.getSource("centroids");if(a){if(t=a,null!=(n=C().GeoJSONSource)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!n[Symbol.hasInstance](t):!(t instanceof n))throw Error("Source is not a GeoJSON source");a.setData(o)}else e.addSource("centroids",{type:"geojson",data:o,cluster:!0,clusterMaxZoom:14,clusterRadius:50,clusterProperties:{population:["+",["get","population"]],populationGuessed:["+",["get","populationGuessed"]],isGuessed:["+",["get","isGuessed"]],existence:["+",["get","existence"]]}}),a=e.getSource("centroids");return a}},{key:"fitBounds",value:function(e){if(!this.alreadyFitBounds){var t,n,r,o,a,i,u,c,s,l=(o=(t=this.props.centroids.map(function(e){return e.lon})).map(function(e){return e>0?e-360:e}),(a=function(e){return(n=Math).max.apply(n,G(e))-(r=Math).min.apply(r,G(e))})(t)<a(o)?t:o),p=this.props.centroids.map(function(e){return e.lat}),f=(i=Math).min.apply(i,G(l)),d=(u=Math).min.apply(u,G(p)),y=(c=Math).max.apply(c,G(l)),m=(s=Math).max.apply(s,G(p)),h=y-f,v=m-d,b=[[f-=.1*h,d-=.1*v],[y+=.1*h,m+=.1*v]];e.fitBounds(b,{animate:!1}),this.alreadyFitBounds=!0}}},{key:"updateMarkers",value:function(){var e,t=this.handler.maps;if(t){(0,E.h)(1===t.length,"SYAUMap should only be used with a single map instance");var n=t[0],r={},o=n.querySourceFeatures("centroids"),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}({},this.markersOnScreen),i=[],u=!0,c=!1,s=void 0;try{for(var l,p=o[Symbol.iterator]();!(u=(l=p.next()).done);u=!0){var f=l.value,d=f.geometry.coordinates,y=f.properties,m=y.cluster?y.cluster_id:y.name;a[m]&&a[m].remove();var h=void 0;y.cluster?h="".concat(y.isGuessed,"/").concat(y.existence):(i.push({name:y.name,isGuessed:1===y.isGuessed}),h=y.isGuessed?"#".concat(y.populationOrdinal):"?");var v=function(e,t,n,r,o){for(var a=-Math.PI/2,i=[],u=a+r,c=Math.min(u,a+Math.PI/2),s=0;s<4&&(i.push(function(e,t,n,r){var o=e+e*Math.cos(t),a=e+e*Math.sin(t),i=e+e*Math.cos(n),u=e+e*Math.sin(n);return'<path d="M'.concat(e,",").concat(e," L").concat(o,",").concat(a," A").concat(e,",").concat(e," 1 0,1 ").concat(i,",").concat(u,' z" fill="').concat(r,'"></path>')}(20,a,c,t)),c!==u);s++)c=Math.min(u,(a=c)+Math.PI/2);return["<div>",'<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(2*n,'" height="').concat(2*n,'" viewBox="0 0 ').concat(2*n," ").concat(2*n,'">'),'<circle cx="'.concat(n,'" cy="').concat(n,'" r="').concat(n,'" fill="').concat(e,'"></circle>')].concat(G(i),["</svg>",'<div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); width: 100%; text-align: center; font-weight: 500" class="serif">',o,"</div>","</div>"]).join("")}(this.props.notGuessedColor,this.props.guessedColor,20,2*Math.PI*(y.populationGuessed/y.population),h),b=document.createElement("div");b.innerHTML=v,b.className="syau-marker",b.style.width="".concat(40,"px"),b.style.height="".concat(40,"px");var g=new(C()).Marker({element:b}).setLngLat(d);r[m]=a[m]=g,r[m].addTo(n)}}catch(e){c=!0,s=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw s}}for(var w in a)r[w]||null==(e=a[w])||e.remove();this.markersOnScreen=r,i.sort(function(e,t){return e.name<t.name?-1:+(e.name>t.name)}),JSON.stringify(i)!==JSON.stringify(this.polysOnScreen)&&(this.polysOnScreen=i,this.bumpVersion())}}},{key:"addLayersIfNeeded",value:function(e){e.getLayer("centroid_circle")||e.addLayer({id:"centroid_circle",type:"circle",source:"centroids",filter:["!=","cluster",!0],paint:{"circle-color":["case",["==",["get","isGuessed"],1],this.props.guessedColor,this.props.notGuessedColor],"circle-radius":0}})}},{key:"populateMap",value:function(e,t,r){var o=this,a=this;return A(function(){var i,u,c;return R(this,function(s){switch(s.label){case 0:return i=this,[4,M(D(n.prototype),"populateMap",o).call(a,e,t,r)];case 1:return s.sent(),[4,this.handler.stylesheetPresent()];case 2:return s.sent(),(0,E.h)(1===e.length,"SYAUMap should only be used with a single map instance"),u=e[0],this.fitBounds(u),c=this.updateCentroidsSource(u),this.addLayersIfNeeded(u),this.updateAttached||(this.updateAttached=!0,u.on("move",function(){i.updateMarkers()}),u.on("moveend",function(){i.updateMarkers()}),c.on("data",function(){i.updateMarkers()})),[2]}})}).call(this)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(k.J9);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],i=!0,u=!1;try{for(o=o.call(e);!(i=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){u=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(u)throw r}}return a}}(e,t)||U(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}}function L(e){var t=(0,l.Kn)(),n=(0,l.q0)();return r.createElement(s.P,null,r.createElement("div",{className:t},"So you're an urbanist?"),r.createElement("div",{className:n},"Name every",r.createElement(b,{typ:e.typ,universe:e.universe,counts:e.counts})," ","in",r.createElement(v,{typ:e.typ,universe:e.universe,counts:e.counts})),void 0===e.syauData?void 0:r.createElement("div",null,r.createElement("div",{style:{marginBlockEnd:"1em"}}),r.createElement(J,{typ:e.typ,universe:e.universe,syauData:e.syauData})))}function q(e){var t=_((0,c.yu)("syauRequireEnter"),1)[0];return r.createElement("input",{type:"text",id:"syau-input",placeholder:"Type a region name",style:{width:"86%"},onChange:function(n){!t&&e.guessCallback(n.target.value)&&(n.target.value="")},onKeyDown:function(n){t&&"Enter"===n.key&&(e.guessCallback(n.currentTarget.value),n.currentTarget.value="")}})}function J(e){var t=(0,u.cI)(),n=(0,u.Rv)(),i=_(S.shared.useHistory(e.typ,e.universe),2),c=i[0],s=i[1],l=e.syauData.populations.reduce(function(e,t){return e+t},0),f=c.guessed.map(function(t){return e.syauData.populations[e.syauData.longnameToIndex[t]]}).reduce(function(e,t){return e+t},0),d=_(r.useState(!1),2),y=d[0],h=d[1],v=r.createRef(),b=(0,p._6)(e.typ),g=e.syauData.longnames.map(function(e){return c.guessed.includes(e)}),w=y?n.correct:t.background;return r.createElement("div",null,r.createElement("div",{style:{margin:"auto",width:"50%"}},r.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"auto"}},r.createElement("div",{style:{width:"7%",height:"1.5em"}}),r.createElement(q,{guessCallback:function(t){var n=e.syauData.longnames.filter(function(n,r){return(0,m.FG)(e.syauData.matchChunks[r],t)}),r=n.filter(function(e){return!c.guessed.includes(e)});return h(0!==n.length&&0===r.length),0!==r.length&&(s({guessed:F(c.guessed).concat(F(r))}),!0)}}),r.createElement("div",{style:{width:"2%",height:"1.5em"}}),r.createElement("div",{style:{width:"5%",height:"1.5em",backgroundColor:w}})),r.createElement("div",{style:{marginBlockEnd:"1em"}}),r.createElement("div",{style:{textAlign:"center"},id:"test-syau-status"},r.createElement("b",null,c.guessed.length,"/",e.syauData.longnames.length)," ",b," ","named, which is"," ",r.createElement("b",null,W(f/l))," ","of the total population."),r.createElement("div",{style:{marginBlockEnd:"1em"}})),r.createElement(N,{basemap:{type:"osm",noLabels:!0},longnames:e.syauData.longnames,population:e.syauData.populations,populationOrdinals:e.syauData.populationOrdinals,centroids:e.syauData.centroids,isGuessed:g,guessedColor:n.correct,notGuessedColor:n.incorrect,voroniHighlightColor:t.hueColors.blue,height:{type:"fixed-height",value:600},attribution:"startVisible"}),r.createElement("div",{style:{marginBlockEnd:"1em"}}),r.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"auto"}},r.createElement("div",{style:{display:"inline-block"}},r.createElement(o.T,{buttonRef:v,produceSummary:function(){var t=f/l,r=Math.floor(10*t),o=n.correctEmoji.repeat(r)+n.incorrectEmoji.repeat(10-r),a=["I named ".concat(c.guessed.length,"/").concat(e.syauData.longnames.length," ").concat(b," in ").concat(e.universe),"(".concat(W(t)," of the population)"),"",o,""],i=window.location.hash;return Promise.resolve([a.join("\n"),"https://soyoureanurbanist.org".concat(""===i?"":"/".concat(i))])}})),r.createElement("div",{style:{display:"inline-block",marginInlineStart:"1em"}}),r.createElement("div",{style:{display:"inline-block"}},r.createElement("button",{style:(0,o.j)(t.hueColors.red,t.buttonTextWhite),onClick:function(){window.confirm("Are you sure you want to reset your progress?")&&s({guessed:[]})}},"Reset"))),r.createElement("div",{style:{marginBlockEnd:"1em"}}),r.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"auto"}},r.createElement(a.tG,{name:"Require pressing enter to formalize a guess",settingKey:"syauRequireEnter",testId:"syauRequireEnter"})),r.createElement("div",{style:{marginBlockEnd:"1em"}}),r.createElement($,{longnames:e.syauData.longnames,populationOrdinals:e.syauData.populationOrdinals,isGuessed:g}))}function W(e){var t=100*e;return 100===t?"100%":t>99.9?"".concat(t.toFixed(3),"%"):t>99?"".concat(t.toFixed(2),"%"):t>90?"".concat(t.toFixed(1),"%"):"".concat(t.toFixed(0),"%")}function $(e){var t=(0,u.cI)(),n=(0,u.Rv)(),o=(0,l.wd)(),a=(0,r.useContext)(i.C.Context);return r.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(o?3:5,", 1fr)"),gap:"1em"}},e.longnames.map(function(o,i){var u=e.populationOrdinals[i],c=e.isGuessed[i],s=c?t.buttonTextWhite:t.textMain,l=c?a.link({kind:"article",longname:o},{scroll:{kind:"position",top:0}}):{};return r.createElement("a",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({key:o,className:c?"testing-syau-named":"testing-syau-not-named",style:{backgroundColor:c?n.correct:t.background,padding:"1em",borderRadius:"5px",boxShadow:c?"0 0 10px ".concat(n.correct):"0 0 10px ".concat(t.background),borderColor:t.textMain,borderWidth:"0.2em",borderStyle:"solid",color:s,textDecoration:"none"}},l),r.createElement("div",{style:{color:s,fontWeight:600}},u,"."," ",c?o.split(",")[0]:""))}))}}}]);
//# sourceMappingURL=313.js.map