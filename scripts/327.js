"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["327"],{53296:function(e,t,n){n.d(t,{Z:()=>l});var r=n(63694),i=n.n(r),a=n(9369),o=n.n(a)()(i());o.push([e.id,`.quiz_clickable {
  display: block;
  border-radius: 1em;
  background-color: var(--quiz-plain-bg);
  margin: 0.25em;
  height: 100%;
}

@media (hover: hover) and (pointer: fine) {
  .quiz_clickable:hover {
    background-color: var(--quiz-selected-bg);
    color: var(--text-main-opposite);
  }
}

.quiz_correct {
  background-color: var(--quiz-correct);
  color: #000;
}

.quiz_correct:hover {
  background-color: var(--quiz-correct);
  color: #000;
}

.quiz_incorrect {
  background-color: var(--quiz-incorrect);
  color: #000;
}

.quiz_incorrect:hover {
  background-color: var(--quiz-incorrect);
  color: #000;
}

.quiz_results_question {
  text-align: center;
  display: table;
  margin: 0 auto;
  font-size: 1.25em;
}

.quiz_result_name_left {
  width: 35%;
  text-align: right;
  vertical-align: middle;
}

.quiz_result_value_left {
  width: 10%;
  text-align: right;
  font-weight: 500;
  vertical-align: middle;
}

.quiz_result_symbol {
  width: 5%;
  text-align: center;
  font-weight: 500;
  vertical-align: middle;
}

.quiz_result_value_right {
  width: 10%;
  text-align: left;
  font-weight: 500;
  vertical-align: middle;
}

.quiz_result_name_right {
  width: 35%;
  text-align: left;
  vertical-align: middle;
}

.quiz_summary {
  text-align: center;
  font-size: 2em;
  display: table;
  margin: 0 auto;
}

.quiz_footer {
  table-layout: fixed;
  width: 40%;
  margin-left: 30%;
  margin-right: 30%;
  height: 3em;
}

.quiz_barchart {
  margin: 0 auto;
}

.quiz_bar_td {
  height: 1.5em;
  vertical-align: middle;
  font-size: 1em;
}

.quiz_bar {
  padding-left: 0.5em;
  float: left;
  vertical-align: middle;
  height: 1.5em;
  font-size: 1em;
}

.quiz_stat {
  padding-left: 0.5em;
  float: left;
  vertical-align: middle;
  height: 1.5em;
  line-height: 1.5em;
  font-size: 1em;
}`,"",{version:3,sources:["webpack://./src/components/quiz.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,kBAAkB;EAClB,sCAAsC;EACtC,cAAc;EACd,YAAY;AACd;;AAEA;EACE;IACE,yCAAyC;IACzC,gCAAgC;EAClC;AACF;;AAEA;EACE,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,uCAAuC;EACvC,WAAW;AACb;;AAEA;EACE,uCAAuC;EACvC,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,cAAc;EACd,iBAAiB;AACnB;;AAEA;EACE,UAAU;EACV,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,iBAAiB;EACjB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,SAAS;EACT,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,UAAU;EACV,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,kBAAkB;EAClB,cAAc;AAChB",sourcesContent:[".quiz_clickable {\n  display: block;\n  border-radius: 1em;\n  background-color: var(--quiz-plain-bg);\n  margin: 0.25em;\n  height: 100%;\n}\n\n@media (hover: hover) and (pointer: fine) {\n  .quiz_clickable:hover {\n    background-color: var(--quiz-selected-bg);\n    color: var(--text-main-opposite);\n  }\n}\n\n.quiz_correct {\n  background-color: var(--quiz-correct);\n  color: #000;\n}\n\n.quiz_correct:hover {\n  background-color: var(--quiz-correct);\n  color: #000;\n}\n\n.quiz_incorrect {\n  background-color: var(--quiz-incorrect);\n  color: #000;\n}\n\n.quiz_incorrect:hover {\n  background-color: var(--quiz-incorrect);\n  color: #000;\n}\n\n.quiz_results_question {\n  text-align: center;\n  display: table;\n  margin: 0 auto;\n  font-size: 1.25em;\n}\n\n.quiz_result_name_left {\n  width: 35%;\n  text-align: right;\n  vertical-align: middle;\n}\n\n.quiz_result_value_left {\n  width: 10%;\n  text-align: right;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_symbol {\n  width: 5%;\n  text-align: center;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_value_right {\n  width: 10%;\n  text-align: left;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_name_right {\n  width: 35%;\n  text-align: left;\n  vertical-align: middle;\n}\n\n.quiz_summary {\n  text-align: center;\n  font-size: 2em;\n  display: table;\n  margin: 0 auto;\n}\n\n.quiz_footer {\n  table-layout: fixed;\n  width: 40%;\n  margin-left: 30%;\n  margin-right: 30%;\n  height: 3em;\n}\n\n.quiz_barchart {\n  margin: 0 auto;\n}\n\n.quiz_bar_td {\n  height: 1.5em;\n  vertical-align: middle;\n  font-size: 1em;\n}\n\n.quiz_bar {\n  padding-left: 0.5em;\n  float: left;\n  vertical-align: middle;\n  height: 1.5em;\n  font-size: 1em;\n}\n\n.quiz_stat {\n  padding-left: 0.5em;\n  float: left;\n  vertical-align: middle;\n  height: 1.5em;\n  line-height: 1.5em;\n  font-size: 1em;\n}"],sourceRoot:""}]);let l=o},25486:function(e,t,n){n.d(t,{T:()=>d,j:()=>f});var r=n(72668),i=n(76293),a=n(44852);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,c,"next",e)}function c(e){l(a,r,i,o,c,"throw",e)}o(void 0)})}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){var u=[l,c];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function d(e){var t,n,o,l=(0,a.cI)(),d=null!=(o=null==(t=(n=navigator).canShare)?void 0:t.call(n,{url:"https://juxtastat.org",text:"test"}))&&o,m=i.isMobile&&d&&!i.isFirefox;return r.createElement("button",{className:"serif",style:f(l.hueColors.green,l.buttonTextWhite),ref:e.buttonRef,onClick:function(){return c(function(){var t,n,r;function i(){return c(function(){return s(this,function(t){switch(t.label){case 0:return[4,navigator.clipboard.writeText("".concat(n,"\n").concat(r))];case 1:return t.sent(),e.buttonRef.current.textContent="Copied!",[2]}})})()}return s(this,function(a){switch(a.label){case 0:return[4,e.produceSummary()];case 1:if(n=(t=u.apply(void 0,[a.sent(),2]))[0],r=t[1],!m)return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,navigator.share({url:r,text:"".concat(n,"\n")})];case 3:case 5:return a.sent(),[3,6];case 4:return a.sent(),[4,i()];case 6:return[3,9];case 7:return[4,i()];case 8:a.sent(),a.label=9;case 9:return[2]}})})()}},r.createElement("div",null,m?"Share":"Copy"),r.createElement("div",{style:{marginInline:"0.25em"}}),r.createElement("img",{src:"/share.png",className:"icon",style:{width:"1em",height:"1em"}}))}function f(e,t){return{textAlign:"center",fontSize:"2em",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",margin:"0 auto",padding:"0.25em 1em",backgroundColor:e,borderRadius:"0.25em",border:"none",color:t}}},68431:function(e,t,n){n.d(t,{J:()=>i});var r=n(72668);function i(e){var t=e.size,n=e.color,i=e.src,a=e.style;return r.createElement("div",{style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({backgroundColor:n,width:t,height:t,maskImage:"url(".concat(i,")"),maskRepeat:"no-repeat",maskSize:"contain",maskPosition:"center"},a)})}},24531:function(e,t,n){n.r(t),n.d(t,{OtherQuizzesButtons:()=>th,JuxtastatInfiniteButton:()=>tp,QuizPanel:()=>tf});var r=n(72668),i=n(6381),a=n(8199),o=n(41623),l=n(44852),c=n(27281),u=n(79779);n(71540);var s=n(93379),d=n.n(s),f=n(7795),m=n.n(f),p=n(90569),h=n.n(p),y=n(3565),g=n.n(y),v=n(19216),b=n.n(v),E=n(44589),A=n.n(E),w=n(53296),z={};z.styleTagTransform=A(),z.setAttributes=g(),z.insert=h().bind(null,"head"),z.domAPI=m(),z.insertStyleElement=b(),d()(w.Z,z),w.Z&&w.Z.locals&&w.Z.locals;var q=n(62473),x=n(50751);function C(){var e=q.AuthenticationStateMachine.shared.useStartSignIn(),t=q.AuthenticationStateMachine.shared.useState();return r.createElement(x.T,null,r.createElement("h1",null,"You were signed out"),r.createElement("p",null,"Sign back in to"," ",r.createElement("b",null,t.email)," ","ensure your quiz progress continues syncing."),r.createElement("button",{style:{margin:"1em",padding:"0.5em 1em"},onClick:function(){null==e||e()}},"Sign In"),r.createElement("button",{style:{margin:"1em",padding:"0.5em 1em"},onClick:function(){q.AuthenticationStateMachine.shared.userSignOut()}},"Sign Out"))}var S=n(54194),k=n(65438),O=n(76293),D=n(72082),j=n(36195);function _(e){var t=e.quiz,n=(0,k.nameOfQuizKind)(t.kind);return"number"!=typeof t.name&&"infinite"!==t.kind&&(n+=" ".concat(t.name)),r.createElement("div",{className:(0,j.Kn)()},n)}function I(e){for(var t=(0,l.cI)(),n=(0,l.Rv)(),i=e.history.correct_pattern.map(function(e){return e?n.correct:n.incorrect});i.length<e.length;)i.push(t.unselectedButton);return r.createElement("table",{className:"quiz_footer"},r.createElement("tbody",null,r.createElement("tr",null,i.map(function(e,t){return r.createElement("td",{key:t,style:{backgroundColor:e}})}))))}function P(e){return r.createElement("div",{className:"centered_text serif"},function(){switch(e.quizKind){case"juxtastat":return"Select the geographical region answering the question. The questions get harder as you go on.";case"retrostat":return"Select the easier question. A question is considered easier if more people got it right.";case"custom":return"Select the geographical region answering the question.";case"infinite":return"Select the geographical region answering the question. You lose when you run out of lives."+" You gain lives by getting ".concat(S.juxtaInfiniteCorrectForBonus," questions right in a row.")}}()," ",B(),M())}function B(){var e=k.QuizModel.shared.uniquePersistentId.use();return r.createElement("div",null,"Your user id is ",r.createElement("span",{className:"juxtastat-user-id"},e),". ",r.createElement(N,null))}function N(){var e=q.AuthenticationStateMachine.shared.useState(),t=q.AuthenticationStateMachine.shared.useStartSignIn();return"signedOut"===e.state?r.createElement(r.Fragment,null,r.createElement("a",{href:"","data-test":"googleSignIn",onClick:function(e){e.preventDefault(),null==t||t()}},"Sign In with Google")," to sync your quiz history across devices."):r.createElement(r.Fragment,null,"Signed in with ".concat(e.email,". "),r.createElement("a",{href:"",onClick:function(e){e.preventDefault(),q.AuthenticationStateMachine.shared.userSignOut()}},"Sign Out"))}function M(){return r.createElement("div",{style:{marginTop:"5px"}},r.createElement("button",{onClick:function(){k.QuizModel.shared.exportQuizPersona()}},"Export Quiz History")," ",r.createElement("button",{onClick:function(){k.QuizModel.shared.importQuizPersona()}},"Import Quiz History"))}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function R(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(U=function(){return!!e})()}var L=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(){var e,t;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return e=n,t=arguments,e=Q(e),function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,U()?Reflect.construct(e,t||[],Q(this).constructor):e.apply(this,t))}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&W(n,e),t=[{key:"computeShapesToRender",value:function(){return Promise.resolve({shapes:[{name:this.props.longname,spec:{type:"polygon",style:{fillOpacity:.5,weight:1,color:this.props.color,fillColor:this.props.color}},meta:{},notClickable:!0}],zoomIndex:0})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(D.J9);function G(e){switch(e.question.kind){case"retrostat":return r.createElement(V,R(F({},e),{question:e.question}));case"juxtastat":return r.createElement(Y,R(F({},e),{question:e.question}));default:throw Error("Invalid question kind")}}function K(e){var t="quiz_clickable",n="quiz_clickable";if(e.waiting){var i=e.history.choices,a=e.history.correct_pattern,o=i[i.length-1],l=a[a.length-1]?" quiz_correct":" quiz_incorrect";"A"===o?t+=l:n+=l}var c=e.getQuestion(),u={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"0.5em"},s={display:"flex",justifyContent:"center",width:"90%",margin:"auto"},d=(0,j.wd)()?"quiztext_mobile":"quiztext";return e.nested&&(d+="_nested"),r.createElement("div",null,e.noHeader?void 0:r.createElement(_,{quiz:e.quiz}),r.createElement("div",{className:"centered_text ".concat(d)},c),r.createElement("div",{className:"gap"}),r.createElement("div",{style:s},r.createElement("div",{style:{width:"50%",padding:"0.5em"}},r.createElement("div",{role:"button",id:"quiz-answer-button-a",className:t,onClick:function(){e.onSelect("A")},style:u},r.createElement("span",{style:{margin:"auto"}},r.createElement("div",{className:"centered_text ".concat(d)},e.getOption("a"))))),r.createElement("div",{style:{width:"50%",padding:"0.5em"}},r.createElement("div",{role:"button",id:"quiz-answer-button-b",className:n,onClick:function(){e.onSelect("B")},style:u},r.createElement("span",{style:{margin:"auto"}},r.createElement("div",{className:"centered_text ".concat(d)},e.getOption("b")))))),r.createElement("div",{style:s},r.createElement("div",{style:{width:"50%",padding:"0.5em"}},e.getDemo("a")),r.createElement("div",{style:{width:"50%",padding:"0.5em"}},e.getDemo("b"))),e.noFooter?void 0:r.createElement(r.Fragment,null,"infinite"===e.quiz.kind?r.createElement(S.JuxtastatLivesDisplay,{correctPattern:e.history.correct_pattern.map(function(e){return!!e})}):void 0,r.createElement(I,{history:e.history,length:e.length}),r.createElement(P,{quizKind:e.quiz.kind})))}function V(e){return r.createElement(K,R(F({},e),{getQuestion:function(){return"Which question was easier?"},getOption:function(e){return"Question ".concat(e.toUpperCase())},getDemo:function(t){var n=(0,k.aCorrect)(e.question[t])?"A":"B";return r.createElement("div",{style:{zoom:.5}},r.createElement(Y,{question:e.question[t],history:{choices:[n],correct_pattern:[!0]},length:5,onSelect:function(){},waiting:!0,quiz:{kind:"juxtastat",name:"demo"},noHeader:!0,noFooter:!0,nested:O.isFirefox}))}}))}function Y(e){var t=(0,l.cI)();return r.createElement(K,R(F({},e),{getQuestion:function(){return $(e.question.question)},getOption:function(t){return e.question["longname_".concat(t)]},getDemo:function(n){return r.createElement(L,{longname:e.question["longname_".concat(n)],basemap:{type:"osm"},color:t.hueColors.blue,attribution:"b"===n?"startHidden":"none"})}}))}function J(e){return e.startsWith("!FULL ")?e.slice(6):"Which has a ".concat(e,"?")}function $(e){if(e.includes("!TOOLTIP")){var t=H(e.split("!TOOLTIP "),2),n=t[0],i=t[1];return r.createElement("span",null,J(n),r.createElement(Z,{content:i}))}return J(e)}function Z(e){var t=H(r.useState(!1),2),n=t[0],i=t[1];return r.createElement("span",null,r.createElement("sup",null,r.createElement("div",{style:{cursor:"pointer",fontSize:"smaller",margin:"5px",fontWeight:"bold",border:"none",display:"unset",height:"unset",padding:"0px 5px"},onClick:function(){i(!n)},className:"quiz_clickable",role:"button"},"ⓘ︎")),n?r.createElement("div",{style:{fontSize:"20px"}},"(",e.content,")"):void 0)}var X=n(25486),ee=n(68431),et=n(98234),en=n(15198),er=n(51329),ei=n(15498),ea=n(4334),eo=n(20758),el=n(14466),ec=n(27093),eu=n(9429),es=function(){return(es=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ed=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},ef=(0,eu.i)("GridLoader","0% {transform: scale(1)} 50% {transform: scale(0.5); opacity: 0.7} 100% {transform: scale(1); opacity: 1}","grid"),em=function(e){return Math.random()*e};let ep=function(e){var t=e.loading,n=e.color,i=void 0===n?"#000000":n,a=e.speedMultiplier,o=void 0===a?1:a,l=e.cssOverride,c=e.size,u=void 0===c?15:c,s=e.margin,d=void 0===s?2:s,f=ed(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),m=(0,ec.h)(u),p=(0,ec.h)(d),h=3*parseFloat(m.value.toString())+6*parseFloat(p.value.toString()),y=es({width:"".concat(h).concat(m.unit),fontSize:0,display:"inline-block"},void 0===l?{}:l),g=function(e){return{display:"inline-block",backgroundColor:i,width:"".concat((0,ec.E)(u)),height:"".concat((0,ec.E)(u)),margin:(0,ec.E)(d),borderRadius:"100%",animationFillMode:"both",animation:"".concat(ef," ").concat((e/100+.6)/o,"s ").concat(e/100-.2,"s infinite ease")}};return void 0===t||t?r.createElement("span",es({style:y},f,{ref:function(e){e&&e.style.setProperty("width","".concat(h).concat(m.unit),"important")}}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))}),r.createElement("span",{style:g(em(100))})):null};var eh=n(13736),ey=n(89533),eg=n(82359);function ev(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eb(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,i)}function eE(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){eb(a,r,i,o,l,"next",e)}function l(e){eb(a,r,i,o,l,"throw",e)}o(void 0)})}}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function ew(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function ez(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||ex(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eq(e){return function(e){if(Array.isArray(e))return ev(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ex(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ex(e,t){if(e){if("string"==typeof e)return ev(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ev(e,t)}}function eC(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){var u=[l,c];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function eS(e){var t=(0,l.cI)(),n=ez((0,r.useState)([]),2),i=n[0],a=n[1],o=ez((0,r.useState)(!1),2),c=o[0],u=o[1],s=ez((0,r.useState)(void 0),2),d=s[0],f=s[1],m=k.QuizModel.shared.uniquePersistentId.use(),p=k.QuizModel.shared.uniqueSecureId.use();(0,r.useEffect)(function(){eE(function(){var t,n,r,i,o;return eC(this,function(l){var c,s,d,m;switch(l.label){case 0:u(!0),f(void 0),l.label=1;case 1:if(l.trys.push([1,6,7,8]),n=Object.fromEntries((t=e.quizFriends.filter(function(e){return null!==ez(e,1)[0]})).map(function(e){var t=ez(e,2),n=t[0];return[t[1],n]})),r=t.map(function(e){return e[1]}),"infinite"!==e.quizDescriptor.kind)return[3,3];return[4,(c=e.quizDescriptor,s=r,eE(function(){var e;return eC(this,function(t){switch(t.label){case 0:return[4,ea.G.POST("/juxtastat/infinite_results",{params:{header:k.QuizModel.shared.userHeaders()},body:{requesters:s,seed:c.seed,version:c.version}})];case 1:if(void 0===(e=t.sent().data))return[2,void 0];return[2,e.results.map(function(e){return e.friends?{friends:!0,result:e}:{friends:!1}})]}})})())];case 2:return o=l.sent(),[3,5];case 3:return[4,(d=e.quizDescriptor,m=r,eE(function(){var e,t;return eC(this,function(n){switch(n.label){case 0:return e=(0,eg.parseTimeIdentifier)(d.kind,d.name.toString()),[4,ea.G.POST("/juxtastat/todays_score_for",{params:{header:k.QuizModel.shared.userHeaders()},body:{date:e,requesters:m,quiz_kind:d.kind}})];case 1:if(void 0===(t=n.sent().data))return[2,void 0];return[2,t.results.map(function(e){return e.friends?{friends:!0,result:e}:{friends:!1}})]}})})())];case 4:o=l.sent(),l.label=5;case 5:if(void 0===(i=o))return[2];return a(i.map(function(e,t){return eA({name:n[r[t]]},e)})),[3,8];case 6:return l.sent(),f("Network Error"),[3,8];case 7:return u(!1),[7];case 8:return[2]}})})()},[e.quizDescriptor,e.quizFriends,m,p]);var h=[e.myResult].concat(eq(i.flatMap(function(e){return e.friends?[e.result]:[]}))),y=r.createElement("div",null,r.createElement("div",{style:{margin:"auto",width:"100%"}},r.createElement("div",{className:"quiz_summary"},"Friends")),r.createElement(r.Fragment,null,"infinite"===e.quizDescriptor.kind?r.createElement(ek,null):void 0,r.createElement(ej,{result:e.myResult,otherResults:h}),i.map(function(t,n){return r.createElement(e_,{key:n,index:n,friendScore:t,removeFriend:function(){return eE(function(){var r;return eC(this,function(i){switch(i.label){case 0:return[4,ea.G.POST("/juxtastat/unfriend",{params:{header:k.QuizModel.shared.userHeaders()},body:{requestee:e.quizFriends[n][1]}})];case 1:return i.sent(),r=e.quizFriends.map(function(e){return e[0]===t.name?[null,e[1],Date.now()]:e}),e.setQuizFriends(r),[2]}})})()},quizFriends:e.quizFriends,setQuizFriends:e.setQuizFriends,otherResults:h})})),r.createElement("div",{style:{height:"1em"}}),r.createElement(eP,null)),g="78px";return r.createElement("div",{style:{position:"relative"}},r.createElement("div",{style:{opacity:c?.5:1,pointerEvents:c?"none":void 0}},r.createElement(eB,{content:y,error:d})),c?r.createElement(el.Z,{size:g,color:t.textMain,cssOverride:{position:"absolute",left:"calc(50% - ".concat(g," / 2)"),top:"calc(50% - ".concat(g," / 2)")}}):null)}function ek(){return r.createElement("div",{style:{display:"flex",flexDirection:"row",height:eO,alignItems:"center"},className:"testing-friends-section"},r.createElement("div",{style:{width:"25%"}}),r.createElement("div",{style:{width:"50%",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},"On This Seed"),r.createElement("div",{style:{width:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},"Overall Best")),r.createElement("div",{style:{width:"25%"}}))}var eO="2em",eD="1.5em";function ej(e){return r.createElement("div",{style:{display:"flex",flexDirection:"row",height:eO,alignItems:"center"},className:"testing-friends-section"},r.createElement("div",{style:{width:"25%"}},"You"),r.createElement("div",{style:{width:"50%"}},r.createElement(eI,{result:e.result,friends:!0,otherResults:e.otherResults})),r.createElement("div",{style:{width:"25%",display:"flex",height:eD}},r.createElement("button",{onClick:function(){return eE(function(){var e,t,n,r;return eC(this,function(i){switch(i.label){case 0:if(null===(e=prompt("Enter your name:")))return[2];return n=(0,a.Sz)({kind:"quiz",id:null!=(t=q.AuthenticationStateMachine.shared.state.email)?t:k.QuizModel.shared.uniquePersistentId.value,name:e}).hash,r="https://juxtastat.org/".concat(n),[4,navigator.clipboard.writeText(r)];case 1:return i.sent(),alert("Link copied to clipboard!"),[2]}})})()},style:{marginLeft:"1em"},"data-test-id":"friend-link-button"},"Copy Link")))}function e_(e){var t,n=(0,l.cI)(),i=ez((0,r.useState)(void 0),2),a=i[0],o=i[1],c=ez((0,r.useState)(!1),2),u=c[0],s=c[1],d=r.createElement("div",{style:{display:"flex",flexDirection:"row",height:eO,alignItems:"center"},className:"testing-friends-section"},r.createElement("div",{style:{width:"25%"}},r.createElement(en.P_,{content:null!=(t=e.friendScore.name)?t:"Unknown",onNewContent:function(t){if(""===t)return void o("Friend name cannot be empty");if(e.quizFriends.map(function(e){return e[0]}).includes(t))return void o("Friend name already exists");var n=eq(e.quizFriends);n[e.index]=[t,e.quizFriends[e.index][1],Date.now()],e.setQuizFriends(n),o(void 0)},style:{width:"100%",height:"100%"},inputMode:"text"})),r.createElement("div",{style:{width:"50%"}},r.createElement(eI,ew(eA({},e.friendScore),{otherResults:e.otherResults}))),r.createElement("div",{style:{width:"25%",display:"flex",height:eD}},r.createElement("button",{onClick:function(){return eE(function(){return eC(this,function(t){switch(t.label){case 0:s(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,e.removeFriend()];case 2:return t.sent(),[3,5];case 3:return t.sent(),o("Network Error"),[3,5];case 4:return s(!1),[7];case 5:return[2]}})})()},style:{marginLeft:"1em"},disabled:u},"Remove"),u?r.createElement(ep,{color:n.textMain,size:"4px",cssOverride:{marginLeft:"10px"}}):null));return r.createElement(eB,{error:a,content:d})}function eI(e){var t=(0,l.cI)(),n=(0,l.Rv)(),a=(0,r.useContext)(i.C.Context),o="1px solid ".concat(t.background),c={backgroundColor:(0,eh.bt)(t.hueColors.orange,.5,t.background),width:"100%",height:eO,display:"flex",justifyContent:"center",alignItems:"center",border:o};if(!e.friends)return r.createElement("div",{style:c},"Ask\xa0",r.createElement("b",null,e.name),"\xa0to add you");if("forThisSeed"in e.result){var u,s,d,f,m=null===e.result.maxScoreSeed||null===e.result.maxScoreVersion?{href:void 0,onClick:function(){}}:a.link({kind:"quiz",mode:"infinite",seed:e.result.maxScoreSeed,v:e.result.maxScoreVersion},{scroll:{kind:"position",top:0}}),p=e.otherResults.filter(function(e){return"forThisSeed"in e}),h={width:"50%",border:o,display:"flex",justifyContent:"center",alignItems:"center",color:t.buttonTextWhite,fontWeight:"bold"},y=(u=Math).max.apply(u,eq(p.map(function(e){var t;return null!=(t=e.maxScore)?t:0})))===e.result.maxScore,g=(s=Math).max.apply(s,eq(p.map(function(e){var t;return null!=(t=e.forThisSeed)?t:0})))===e.result.forThisSeed;return r.createElement("div",{style:{display:"flex",flexDirection:"row",height:eO}},r.createElement("div",{style:ew(eA({},h),{backgroundColor:g?t.hueColors.green:t.hueColors.blue})},null!=(d=e.result.forThisSeed)?d:"-"),r.createElement("div",{style:ew(eA({},h),{backgroundColor:y?t.hueColors.green:t.hueColors.blue}),onClick:m.onClick},r.createElement("a",{style:{textDecoration:"none",color:t.buttonTextWhite},href:m.href},null!=(f=e.result.maxScore)?f:"-")))}if(null===e.result.corrects)return r.createElement("div",{style:c},"Not Done Yet");var v=e.result.corrects;return r.createElement("div",{className:"testing-friend-score",style:{display:"flex",flexDirection:"row",height:eO}},v.map(function(e,t){var i=e?n.correct:n.incorrect;return r.createElement("div",{className:e?"testing-friend-score-correct":"testing-friend-score-incorrect",key:t,style:{backgroundColor:i,color:i,width:"".concat(100/v.length,"%"),border:o}},e?"y":"n")}))}function eP(){var e=(0,l.cI)(),t=ez((0,r.useState)(""),2),n=t[0],i=t[1],a=ez((0,r.useState)(""),2),o=a[0],c=a[1],u=ez((0,r.useState)(void 0),2),s=u[0],d=u[1],f=ez((0,r.useState)(!1),2),m=f[0],p=f[1],h=r.createElement("div",{style:{display:"flex",flexDirection:"row",height:eD,alignItems:"center"}},r.createElement("div",{style:{width:"37.5%",padding:"0 0.2em"}},r.createElement("input",{type:"text",placeholder:"Friend Name",value:n,style:{width:"100%",height:"100%"},onChange:function(e){i(e.target.value)},disabled:m})),r.createElement("div",{style:{width:"37.5%",padding:"0 0.2em",height:eD}},r.createElement("input",{type:"text",placeholder:"Friend ID or Email",value:o,style:{width:"100%",height:"100%"},onChange:function(e){c(e.target.value)},disabled:m})),r.createElement("div",{style:{width:"25%",display:"flex",height:eD}},r.createElement("button",{onClick:function(){return eE(function(){var e,t,r;return eC(this,function(a){switch(a.label){case 0:return e=o.trim(),t=n.trim(),p(!0),[4,(0,ey.addFriend)(e,t)];case 1:return r=a.sent(),p(!1),void 0!==r?d(r.errorMessage):(d(void 0),i(""),c("")),[2]}})})()},style:{marginLeft:"1em",height:"100%"},disabled:m},"Add"),m?r.createElement(ep,{color:e.textMain,size:"4px",cssOverride:{marginLeft:"10px"}}):null));return r.createElement(eB,{error:s,content:h})}function eB(e){var t=(0,l.cI)();return void 0!==e.error?r.createElement("div",null,e.content,r.createElement("div",{style:{backgroundColor:t.slightlyDifferentBackgroundFocused,padding:"0 0.5em",marginRight:"25%"}},e.error)):e.content}function eN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||eT(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eT(e,t){if(e){if("string"==typeof e)return eN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eN(e,t)}}function eQ(e){switch(e.quiz.kind){case"juxtastat":case"retrostat":return r.createElement(eF,{quiz:e.quiz,wholeHistory:e.wholeHistory});case"infinite":return r.createElement(eL,{quiz:e.quiz,wholeHistory:e.wholeHistory});case"custom":return}}function eF(e){for(var t,n=(0,l.cI)(),i=(0,eg.parseTimeIdentifier)(e.quiz.kind,e.quiz.name.toString()),a=Array(i+1).fill(-1),o=Array(6).fill(0),c=[],u=0;u<=i;u++){var s=function(t){switch(e.quiz.kind){case"juxtastat":return e.wholeHistory[t];case"retrostat":return e.wholeHistory["W".concat(t)]}}(u);if(void 0!==s){var d=s.correct_pattern.reduce(function(e,t){return e+ +!!t},0);a[u]=d,o[d]+=1,c.push(d)}}for(var f=Array(a.length).fill(0),m=0;m<f.length;m++)a[m]>=3&&(f[m]=(m>0?f[m-1]:0)+1);var p=(t=Math).max.apply(t,function(e){if(Array.isArray(e))return eN(e)}(f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||eT(f)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=f[i],y=o.reduce(function(e,t){return e+t},0),g=[{name:"Played",value:c.length.toString()},{name:"Mean score",value:(c.reduce(function(e,t){return e+t},0)/c.length).toFixed(2)},{name:"Win Rate (3+)",value:"".concat((c.filter(function(e){return e>=3}).length/c.length*100).toFixed(0),"%")},{name:"Current Streak (3+)",value:h.toString()},{name:"Max Streak (3+)",value:p.toString()}];return r.createElement("div",null,r.createElement("div",{className:"serif quiz_summary"},"Your Statistics"),r.createElement(eW,{statistics:g}),r.createElement("div",{className:"gap_small"}),r.createElement("table",{className:"quiz_barchart"},r.createElement("tbody",null,o.map(function(e,t){return r.createElement("tr",{key:t},r.createElement("td",{className:"quiz_bar_td serif",style:{color:n.textMain}},t,"/5"),r.createElement("td",{className:"quiz_bar_td serif"},r.createElement("span",{className:"quiz_bar",style:{width:"".concat(e/y*20,"em"),backgroundColor:n.hueColors.blue}}),e>0?r.createElement("span",{className:"quiz_stat",style:{color:n.textMain}},e," ","(",(e/y*100).toFixed(1),"%)"):void 0))}))))}function eR(e){var t=e.total,n=e.perQuestion,i=(0,l.Rv)();return r.createElement("div",{id:"quiz-audience-statistics"},r.createElement("div",{className:"serif quiz_summary"},"Question Difficulty"),r.createElement(eW,{statistics:n.map(function(e,n){return{name:"Q".concat(n+1," Correct"),value:"".concat((e/t*100).toFixed(0),"%"),addtl_class:"quiz-audience-statistics-displayed",color:e/t>.5?i.correct:i.incorrect}})}))}function eW(e){var t=e.statistics;return r.createElement("div",{className:"serif",style:{textAlign:"center",width:"100%",margin:"auto",fontSize:"1.5em",display:"flex",flexWrap:"wrap",justifyContent:"center"}},t.map(function(e,t){return r.createElement(eH,{key:t,number:e.value,name:e.name,additionalClass:e.additionalClass,color:e.color,onClick:e.onClick})}))}function eH(e){var t=e.number,n=e.name,i=e.additionalClass,a=e.color,o=e.onClick;return r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"0.3em"},onClick:o},r.createElement("div",{className:"serif ".concat(null!=i?i:""),style:{fontSize:"1.5em",color:a}},t),r.createElement("div",{className:"serif",style:{fontSize:"0.5em"}},n))}function eU(e,t){var n,r,i,a,o,l,c=eM((0,eg.getInfiniteQuizzes)(t,!0),2),u=c[0],s=c[1].map(function(e){return t[e].correct_pattern.reduce(function(e,t){return e+ +!!t},0)}),d=u.findIndex(function(t){var n=eM(t,2),r=n[0],i=n[1];return r===e.seed&&i===e.version}),f=eM(((n=Array.from(Array(s.length).keys())).sort(function(e,t){return s[t]-s[e]}),r=1,i=s[n[0]],o=(a=n.map(function(e){return s[e]!==i&&(i=s[e],r+=1),r})).map(function(e,t){return e<=3||n[t]===d}),l=n.filter(function(e,t){return o[t]}),[a.filter(function(e,t){return o[t]}),l]),2);return{ordinals:f[0],sortedIndices:f[1],seedVersions:u,numCorrects:s}}function eL(e){var t=(0,l.cI)(),n=(0,r.useContext)(i.C.Context),a=eU(e.quiz,e.wholeHistory),o=a.ordinals,c=a.sortedIndices,u=a.seedVersions,s=a.numCorrects;return r.createElement("div",{id:"your-best-scores"},r.createElement("div",{className:"serif quiz_summary"},"Your Best Scores"),r.createElement(eW,{statistics:c.map(function(r,i){return{name:"#".concat(o[i]),value:s[r].toString(),additionalClass:"quiz-audience-statistics-displayed",color:u[r][0]===e.quiz.seed?t.hueColors.green:t.hueColors.blue,onClick:function(){n.navigate({kind:"quiz",mode:"infinite",seed:u[r][0],v:u[r][1]},{history:"push",scroll:{kind:"none"}})}}})}))}function eG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eK(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,i)}function eV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function eY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function eJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||eZ(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e$(e){return function(e){if(Array.isArray(e))return eG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eZ(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eZ(e,t){if(e){if("string"==typeof e)return eG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eG(e,t)}}function eX(e){var t,n,i,a,o,c,u,s=(0,r.useRef)(null),d=eJ((0,r.useState)(null!=(u="custom"===e.quizDescriptor.kind||"infinite"===e.quizDescriptor.kind?void 0:(0,eg.getCachedPerQuestionStats)(e.quizDescriptor))?u:{total:0,per_question:[0,0,0,0,0]}),2),f=d[0],m=d[1],p=k.QuizModel.shared.friends.use();(0,r.useEffect)(function(){"custom"!==e.quizDescriptor.kind&&((0,eg.reportToServer)(e.wholeHistory,e.quizDescriptor.kind),"infinite"!==e.quizDescriptor.kind&&(0,eg.getPerQuestionStats)(e.quizDescriptor).then(m))},[e.wholeHistory,e.quizDescriptor]);var h=e.history.correct_pattern,y=k.QuizModel.shared.authenticationError.use(),g=null!==k.QuizModel.shared.dismissAuthNag.use(),v=q.AuthenticationStateMachine.shared.useState(),b=!g&&"signedOut"===v.state&&Object.keys(e.wholeHistory).length>=10,E=(0,l.cI)();return r.createElement("div",null,r.createElement(_,{quiz:e.quizDescriptor}),r.createElement("div",{className:"gap"}),y?r.createElement(e0,null,r.createElement("b",null,"Warning! Someone is possibly attempting to hijack your account. Please contact us at security@urbanstats.org, and send your persistent ID.")):void 0,b&&!y?r.createElement(e0,null,r.createElement("div",null,r.createElement(N,null)),r.createElement("div",{role:"button",title:"Dismiss",onClick:function(){return k.QuizModel.shared.dismissAuthNag.value=Date.now()}},r.createElement(ee.J,{size:"1em",color:E.textMain,src:"/close.png",style:{display:"inline-block"}}))):void 0,r.createElement(e4,{correctPattern:h,quizKind:e.quizDescriptor.kind}),r.createElement("div",{className:"gap_small"}),r.createElement(e1,{buttonRef:s,todayName:e.todayName,correctPattern:h,quizKind:e.quizDescriptor.kind,medal:"infinite"===e.quizDescriptor.kind?function(e,t){var n=eU(e,t),r=n.ordinals,i=n.sortedIndices,a=n.seedVersions.findIndex(function(t){var n=eM(t,2),r=n[0],i=n[1];return r===e.seed&&i===e.version}),o=r[i.indexOf(a)];switch(o){case 1:case 2:case 3:return o;default:return}}(e.quizDescriptor,e.wholeHistory):void 0}),r.createElement("div",{className:"gap"}),r.createElement("div",{className:"gap"}),f.total>30?r.createElement("div",null,r.createElement(eR,{total:f.total,perQuestion:f.per_question}),r.createElement("div",{className:"gap"}),r.createElement("div",{className:"gap"})):void 0,"custom"===e.quizDescriptor.kind||"infinite"===e.quizDescriptor.kind?void 0:r.createElement(e5,{quiz:e.quizDescriptor}),"infinite"===e.quizDescriptor.kind?r.createElement(tp,null):void 0,r.createElement("div",{className:"gap"}),r.createElement(eQ,{wholeHistory:e.wholeHistory,quiz:e.quizDescriptor}),r.createElement("div",{className:"gap"}),r.createElement("span",{className:"serif quiz_summary"},"Details (spoilers, don't share!)"),r.createElement("div",{className:"gap_small"}),e.quiz.map(function(t,n){return r.createElement(e6,{question:t,key:n,index:n,choice:e.history.choices[n],correct:h[n]})}),r.createElement("div",{className:"gap_small"}),"custom"===e.quizDescriptor.kind?void 0:r.createElement("div",{style:{margin:"auto",width:"100%",maxWidth:"500px"}},r.createElement(eS,{quizFriends:p,quizDescriptor:e.quizDescriptor,setQuizFriends:function(e){k.QuizModel.shared.friends.value=e},myResult:"infinite"===e.quizDescriptor.kind?(i=(n=eU(t=e.quizDescriptor,e.wholeHistory)).sortedIndices,a=n.seedVersions,{forThisSeed:(o=n.numCorrects)[a.findIndex(function(e){var n=eM(e,2),r=n[0],i=n[1];return r===t.seed&&i===t.version})],maxScore:o[c=i[0]],maxScoreSeed:a[c][0],maxScoreVersion:a[c][1]}):{corrects:h}})),r.createElement("div",{className:"gap_small"}),r.createElement("div",{className:"centered_text serif"},r.createElement(B,null),r.createElement(M,null)),r.createElement(th,null))}function e0(e){var t=(0,l.cI)();return r.createElement(r.Fragment,null,r.createElement("div",{className:"serif",style:{backgroundColor:t.slightlyDifferentBackgroundFocused,width:"75%",margin:"auto",fontSize:"1.5em",padding:"0.5em",textAlign:"center",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-evenly"}},e.children),r.createElement("div",{className:"gap"}))}function e1(e){var t=eJ((0,c.yu)("juxtastatCompactEmoji"),1)[0],n=r.createElement(e2,eY(eV({},e),{compactRepr:t}));return e.correctPattern.length<=10?n:r.createElement("div",null,r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(et.tG,{name:"Compact emoji representation",settingKey:"juxtastatCompactEmoji",testId:"juxtastatCompactEmoji"})),r.createElement("div",{className:"gap_small"}),n)}function e2(e){var t=e.buttonRef,n=e.todayName,i=e.correctPattern,a=e.quizKind,o=e.medal,c=e.compactRepr,u=(0,l.Rv)();return r.createElement(X.T,{buttonRef:t,produceSummary:function(){var e,t,r,l,s,d,f;return e=u,t=n,r=i,l=a,s=o,d=c,(f=function(){var n,i,a,o,c,u;return function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){var u=[l,c];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(f){switch(f.label){case 0:if(n=eJ(e3(r,l),2)[1],i=(0,k.nameOfQuizKind)(l),void 0!==t&&(i+=" ".concat(t)),i+=" ".concat(n),i+="\n",i+="\n",i+=tn(e,r,d).join("\n"),void 0!==s&&(i+="\n",i+="\n",i+=["\uD83E\uDD47 Personal Best!","\uD83E\uDD48 Personal 2nd Best!","\uD83E\uDD49 Personal 3rd Best!"][s-1]),i+="\n",a=window.location.hash,o="https://juxtastat.org".concat(""===a?"":"/".concat(a)),!(a.length>40))return[3,2];return c=window.location.href.substring(window.location.origin.length+1),[4,ea.G.POST("/shorten",{body:{full_text:c}})];case 1:if(void 0===(u=f.sent().data))throw Error("Error while shortening");o="https://s.urbanstats.org/s?c=".concat(u.shortened),f.label=2;case 2:return[2,[i,o]]}})},function(){var e=this,t=arguments;return new Promise(function(n,r){var i=f.apply(e,t);function a(e){eK(i,n,r,a,o,"next",e)}function o(e){eK(i,n,r,a,o,"throw",e)}a(void 0)})})()}})}function e5(e){var t,n=e.quiz,a=(0,l.cI)(),o=eJ((0,r.useState)(0),2)[1];(0,r.useEffect)(function(){var e=setInterval(function(){o(function(e){return e+1})},1e3);return function(){clearInterval(e)}});var c={width:"juxtastat"===n.kind?"5em":"6.5em",margin:0,backgroundColor:a.hueColors.blue,textAlign:"center",fontSize:"2em",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",padding:"0.25em 0.25em",borderRadius:"0.25em",border:"none",color:a.buttonTextWhite},u=(0,r.useContext)(i.C.Context);return t=0>(0,eo.msRemaining)(n)&&"quiz"===u.currentDescriptor.kind?r.createElement("a",eY(eV({},u.link({kind:"quiz",mode:"retrostat"===n.kind?"retro":void 0,date:void 0!==u.currentDescriptor.date?u.currentDescriptor.date+1:void 0},{scroll:{kind:"position",top:0}})),{style:{textDecoration:"none"}}),r.createElement("div",{className:"serif",style:eY(eV({},c),{width:void 0,padding:"0.25em 1em"})},"Next Quiz")):r.createElement(r.Fragment,null,r.createElement("div",{className:"serif quiz_summary",style:{margin:"auto 0"}},"Next quiz in "),r.createElement("div",{className:"serif",style:c},r.createElement("span",null,(0,eo.renderTimeRemaining)(n)))),r.createElement("div",{style:{margin:"auto"},id:"quiz-timer"},r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"flex-center",flexWrap:"wrap",gap:"1em"}},t))}function e3(e,t){var n,r,i,a,o,l;switch(t){case"juxtastat":case"retrostat":case"custom":return a=(r=e.length)-(i=e.reduce(function(e,t){return e+ +!!t},0)),[0===i?"Impressively Bad Job! \uD83E\uDD37":0===a?"Perfect! \uD83D\uDD25":1===i?"No! No!! \uD83D\uDE20":1===a?"Excellent! \uD83D\uDE0A":2===a?"Good! \uD83D\uDE43":"Better luck next time! \uD83E\uDEE4","".concat(i,"/").concat(r)];case"infinite":return o=e.reduce(function(e,t){return e+ +!!t},0),l="".concat(o,"/∞"),o<10?["You can do better! \uD83E\uDD37",l]:o<20?["Not bad! \uD83E\uDEE4",l]:o<30?["Good job! \uD83D\uDE43",l]:o<40?["Great! \uD83D\uDE0A",l]:["Amazing! \uD83D\uDD25",l]}}function e4(e){var t=eJ((0,c.yu)("juxtastatCompactEmoji"),1)[0],n=(0,l.Rv)(),i=eJ(e3(e.correctPattern,e.quizKind),2),a=i[0],o=i[1],u="".concat(a," ").concat(o);return r.createElement("div",null,r.createElement("span",{className:"serif quiz_summary",id:"quiz-result-summary-words"},u),r.createElement("div",{id:"quiz-result-summary-emoji"},tn(n,e.correctPattern,t).map(function(e,t){return r.createElement("div",{className:"serif quiz_summary",key:t},e)})))}function e6(e){switch(e.question.kind){case"juxtastat":return r.createElement(e9,eY(eV({},e),{question:e.question}));case"retrostat":return r.createElement(te,eY(eV({},e),{question:e.question}))}}function e8(e){var t=(0,l.cI)(),n=(0,l.Rv)(),i=(0,k.aCorrect)(e.question)?r.createElement("span",null,">"):r.createElement("span",null,"<"),a={},o={};"A"===e.choice?a={backgroundColor:t.selectedButton,color:t.selectedButtonText}:o={backgroundColor:t.selectedButton,color:t.selectedButtonText};var c=e.correct?n.correctEmoji:n.incorrectEmoji;return r.createElement("div",{key:e.index},e.getLabel(),r.createElement("table",{className:"stats_table",style:{width:"80%",marginLeft:"10%",marginRight:"10%",borderCollapse:"separate",borderSpacing:"0.1em",fontSize:"1.25em",backgroundColor:t.unselectedButton}},r.createElement("tbody",{style:{color:t.textMain}},r.createElement("tr",null,r.createElement("td",{className:"serif quiz_result_name_left",style:a},e.getOption("a")),r.createElement("td",{style:{fontWeight:400},className:"serif quiz_result_value_left"},e.getStat("a")),r.createElement("td",{className:"serif quiz_result_symbol quiz_result_comparison_symbol"},i),r.createElement("td",{style:{fontWeight:400},className:"serif quiz_result_value_right"},e.getStat("b")),r.createElement("td",{className:"serif quiz_result_name_right",style:o},e.getOption("b")),r.createElement("td",{className:"serif quiz_result_symbol"},c)))),r.createElement("div",{className:"gap_small"}))}function e7(e){var t=e.stat,n=e.statColumn;return r.createElement("span",null,r.createElement(en.$k,{statname:n,value:t,isUnit:!1}),r.createElement(en.$k,{statname:n,value:t,isUnit:!0}))}function e9(e){return r.createElement(tt,{question:e.question},r.createElement(e8,eY(eV({},e),{getLabel:function(){return r.createElement("span",{className:"serif quiz_results_question"},e.question.stat_column)},getOption:function(t){return e.question["longname_".concat(t)]},getStat:function(t){return r.createElement(e7,{stat:e.question["stat_".concat(t)],statColumn:e.question.stat_column})}})))}function te(e){return r.createElement(e8,eY(eV({},e),{getLabel:function(){return r.createElement("span",{className:"serif quiz_results_question"},"Juxtastat Users Who Got This Question Right %")},getOption:function(t){var n=e.question[t];return r.createElement(tt,{question:n},r.createElement("div",{style:{zoom:.5}},r.createElement("div",null,$(n.question)),r.createElement("div",{style:"a"===t?{marginLeft:"20%"}:{marginRight:"20%"}},r.createElement("div",null,n.longname_a," ",r.createElement(e7,{stat:n.stat_a,statColumn:n.stat_column})),r.createElement("div",null,n.longname_b," ",r.createElement(e7,{stat:n.stat_b,statColumn:n.stat_column})))))},getStat:function(t){return r.createElement(e7,{stat:e.question["".concat(t,"_ease")],statColumn:"%"})}}))}function tt(e){var t=e.question,n=e.children,a=(0,r.useContext)(i.C.Context),o=(0,r.useContext)(c.Zr.Context),u=(0,l.cI)();return r.createElement("a",eY(eV({},a.link({kind:"comparison",longnames:[t.longname_a,t.longname_b],s:(0,er.MM)(o,function(e){if(void 0!==e){var t=ei.MH.get(e);if(void 0!==t){var n=t.group.parent.id,r=t.year;return Object.fromEntries(e$(ei.U1.map(function(e){return["show_stat_group_".concat(e.id),e.parent.id===n]})).concat(e$(null!==r?ei.tg.map(function(e){return["show_stat_year_".concat(e),e===r]}):[])))}}}(t.stat_path))},{scroll:{kind:"position",top:0}})),{style:{textDecoration:"none",color:u.textMain}}),n)}function tn(e,t,n){if(n&&t.length>10)return function(e,t,n){var r=[[]],i=void 0,a=0,o=function(e,i){if(void 0!==e){var a=r[r.length-1];a.push(e?t:n),i>1&&a.push.apply(a,e$(function e(t){if(t>=10)return e$(e(Math.floor(t/10))).concat(e$(e(t%10)));switch(t){case 0:return["0️⃣"];case 1:return["1️⃣"];case 2:return["2️⃣"];case 3:return["3️⃣"];case 4:return["4️⃣"];case 5:return["5️⃣"];case 6:return["6️⃣"];case 7:return["7️⃣"];case 8:return["8️⃣"];case 9:return["9️⃣"]}throw Error("unexpected count ".concat(t))}(i))),a.length>=10&&r.push([])}},l=!0,c=!1,u=void 0;try{for(var s,d=e.map(function(e){return!!e})[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;f===i?a+=1:(o(i,a),i=f,a=1)}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return o(i,a),r.map(function(e){return e.join("")})}(t,e.correctEmoji,e.incorrectEmoji);if(t.length>10){for(var r=[],i=0;i<t.length;i+=10)r.push(tn(e,t.slice(i,i+10),n)[0]);return r}return[t.map(function(t){return t?e.correctEmoji:e.incorrectEmoji}).join("")]}var tr=n(20110);function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ta(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,i)}function to(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){to(e,t,n[t])})}return e}function tc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||td(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e){return function(e){if(Array.isArray(e))return ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||td(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function td(e,t){if(e){if("string"==typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}}function tf(e){return r.createElement(tm,{key:e.todaysQuiz.uniqueKey,quizDescriptor:e.quizDescriptor,todayName:e.todayName,todaysQuiz:e.todaysQuiz})}function tm(e){var t,n,i,a=(0,j.Kn)(),c=(0,l.cI)(),s=k.QuizModel.shared.history.use(),d=tu((0,r.useState)({}),2),f=d[0],m=d[1];switch(e.quizDescriptor.kind){case"juxtastat":case"retrostat":case"infinite":t=s,n=function(e){return k.QuizModel.shared.history.value=e};break;case"custom":t=f,n=function(e){m(e)}}var p=tu((0,r.useState)(!1),2),h=p[0],y=p[1],g=tu((0,r.useState)(!1),2),v=g[0],b=g[1],E=tu((0,r.useState)([]),2),A=E[0],w=E[1],z=q.AuthenticationStateMachine.shared.useState();if("signedOut"===z.state&&null!==z.email)return r.createElement(C,null);if("infinite"===e.quizDescriptor.kind&&!S.validQuizInfiniteVersions.includes(e.quizDescriptor.version))return r.createElement(u.P,null,r.createElement("div",null,r.createElement("div",{className:a},"Quiz version mismatch"),r.createElement("div",{style:{width:"50%",margin:"auto",backgroundColor:c.slightlyDifferentBackgroundFocused,padding:"1em",fontWeight:"bold"}},"Juxtastat generation has been updated, so infinite Juxtastat you are trying to access is no longer available."),r.createElement("div",{style:{height:"1.5em"}}),r.createElement(th,null)));var x=null!=(i=t[e.quizDescriptor.name])?i:{choices:[],correct_pattern:[]},O=e.todaysQuiz.isDone((0,k.getCorrectPattern)(t,e.quizDescriptor.name)),D=(O?x.choices.length:x.choices.length+1)-A.length,_=h||v||D>0;!v&&D>0&&(b(!0),Promise.all(Array.from({length:D},function(t,n){return e.todaysQuiz.questionByIndex(A.length+n)})).then(function(e){b(!1),w(ts(A).concat(ts(e.filter(function(e){return void 0!==e}))))}).catch(function(e){tr.error("Error fetching questions",e)}));var I=function(r){var i=tc(tl({},t),to({},e.quizDescriptor.name,r));y(!0),n(i)},P=function(e){if(!_){var t=A[x.correct_pattern.length];x.choices.push(e),x.correct_pattern.push("A"===e===(0,k.aCorrect)(t)),I(x),setTimeout(function(){y(!1)},500)}};return r.createElement(u.P,null,function(){var n,i=e.todaysQuiz,l=x.choices.length;if(_&&(l-=1),!_&&O)return r.createElement(eX,{quiz:A,wholeHistory:t,history:x,todayName:e.todayName,quizDescriptor:e.quizDescriptor});if(l<0||l>=A.length){var c=l<0?"Loading quiz...":"Loading results...";return r.createElement("div",null,r.createElement("input",{type:"hidden","data-test-loading-quiz":!0}),r.createElement("div",{className:a},c),r.createElement(o.WU,null))}return r.createElement(G,{quiz:e.quizDescriptor,question:A[l],history:x,length:null!=(n=i.length)?n:x.choices.length,onSelect:P,waiting:_,nested:!1,noHeader:!1,noFooter:!1})}())}function tp(){var e=(0,l.cI)(),t=(0,r.useContext)(i.C.Context);return r.createElement("a",tl({style:tc(tl({},(0,X.j)(e.hueColors.blue,e.buttonTextWhite)),{width:"30%",textDecoration:"none"})},t.link({kind:"quiz",mode:"infinite"},{scroll:{kind:"position",top:0}})),"Random Juxtastat Infinite")}function th(){var e=(0,l.cI)(),t=(0,r.useContext)(i.C.Context),n=t.usePageState().current,o="quiz"===n.descriptor.kind?n.descriptor.mode:"notAQuiz",u=(0,r.useMemo)(function(){return[{kind:"quiz",mode:void 0},{kind:"quiz",mode:"retro"},{kind:"quiz",mode:"infinite"}].filter(function(e){return e.mode!==o})},[o]),s=tu((0,r.useState)([]),2),d=s[0],f=s[1];(0,r.useEffect)(function(){var e,t=!1;return(e=function(){var e;return function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){var u=[l,c];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,Promise.all(u.map(function(e){return(0,a.X_)(e,c.Zr.shared)}))];case 1:return e=n.sent(),t||f(e.filter(function(e){return"infinite"===e.newPageDescriptor.mode||!e.pageData.quiz.isDone((0,k.getCorrectPattern)(k.QuizModel.shared.history.value,e.pageData.quizDescriptor.name))})),[2]}})},function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){ta(a,r,i,o,l,"next",e)}function l(e){ta(a,r,i,o,l,"throw",e)}o(void 0)})})(),function(){t=!0}},[u]);var m=tc(tl({},(0,X.j)(e.hueColors.blue,e.buttonTextWhite)),{width:"30%",textDecoration:"none"});return 0===d.length?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"gap"}),r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"flex-center",flexWrap:"wrap",gap:"1em"}},d.map(function(e){return r.createElement("a",tl({key:e.pageData.quizDescriptor.kind,style:m},t.link(e.newPageDescriptor,{scroll:{kind:"position",top:0}})),"Play"," ",(0,k.nameOfQuizKind)(e.pageData.quizDescriptor.kind))})))}},20758:function(e,t,n){n.r(t),n.d(t,{getDailyOffsetNumber:()=>c,getRetrostatOffsetNumber:()=>u,msRemaining:()=>p,renderTimeRemaining:()=>h});var r,i=new Date(2023,8,2),a=0,o=parseInt(null!=(r=localStorage.getItem("debug_quiz_transition"))?r:"0");if(o>0){var l=new Date;l.setHours(0,0,0,0),a=l.valueOf()+864e5-o-Date.now()}function c(){var e=new Date(Date.now()+a);e.setHours(0,0,0,0);var t=(e.valueOf()-i.valueOf())/864e5;return Math.round(t)}function u(){return Math.floor((c()-1)/7)-11}function s(e){var t=new Date(i);return t.setDate(t.getDate()+e),t}function d(e){var t;return(t=s(e)).setDate(t.getDate()+1),t.valueOf()-Date.now()-a}function f(e){var t;return(t=function(e){if(!e.startsWith("W"))throw Error("week_id must start with W");return s((parseInt(e.slice(1))+11)*7+1)}(e)).setDate(t.getDate()+7),t.valueOf()-Date.now()}function m(e){var t=Math.floor(e/1e3),n=Math.floor(t/60),r=Math.floor(n/60),i=(t%60).toString().padStart(2,"0"),a=(n%60).toString().padStart(2,"0"),o=(r%24).toString().padStart(2,"0");return"".concat(o,":").concat(a,":").concat(i)}function p(e){var t=e.kind,n=e.name;switch(t){case"juxtastat":return d(n);case"retrostat":return f(n)}}function h(e){var t,n,r,i=e.kind,a=e.name;switch(i){case"juxtastat":return m(d(a));case"retrostat":return n=Math.floor((t=f(a))/864e5),r=m(t%864e5),"".concat(n,"d ").concat(r)}}},89533:function(e,t,n){n.r(t),n.d(t,{addFriend:()=>f,addFriendFromLink:()=>function e(t,n){return c(function(){var r,i;return d(this,function(a){switch(a.label){case 0:return[4,f(t,n)];case 1:if(void 0!==(r=a.sent()))return[3,2];return alert("Friend added: ".concat(n," !")),[3,6];case 2:if("friendName"!==r.problemDomain)return[3,5];if(null===(i=prompt("Could not add friend: ".concat(r.errorMessage,"\n\nPlease correct the friend name:"),n)))return[3,4];return[4,e(t,i.trim())];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:alert("Could not add friend: ".concat(r.errorMessage)),a.label=6;case 6:return[2]}})})()}});var r=n(4334),i=n(62473),a=n(65438);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){n(e);return}l.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,c,"next",e)}function c(e){l(a,r,i,o,c,"throw",e)}o(void 0)})}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}function d(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){var u=[l,c];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function f(e,t){return c(function(){var n,l,c,f,m,p,h;return d(this,function(d){switch(d.label){case 0:if(n=a.QuizModel.shared.uniquePersistentId.value,l=i.AuthenticationStateMachine.shared.state.email,c="Friend ID or Email",""===e)return[2,{errorMessage:"".concat(c," cannot be empty"),problemDomain:"friendID"}];if(e===n)return[2,{errorMessage:"Friend ID cannot be your own ID",problemDomain:"friendID"}];if(e===l)return[2,{errorMessage:"Friend Email cannot be your own Email",problemDomain:"friendID"}];if(f=a.QuizModel.shared.friends.value.find(function(t){var n=u(t,2),r=n[0],i=n[1];return null!==r&&i===e}))return[2,{errorMessage:"".concat(c," ").concat(e," already exists as ").concat(f[0]),problemDomain:"friendID"}];if(""===t)return[2,{errorMessage:"Friend name cannot be empty",problemDomain:"friendName"}];if(a.QuizModel.shared.friends.value.map(function(e){return e[0]}).includes(t))return[2,{errorMessage:"Friend name already exists",problemDomain:"friendName"}];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.G.POST("/juxtastat/friend_request",{body:{requestee:e},params:{header:a.QuizModel.shared.userHeaders()}})];case 2:var y;if(p=(m=d.sent()).response,h=m.error,422===p.status)return[2,{errorMessage:"Invalid ".concat(c),problemDomain:"friendID"}];if(void 0!==h)return[2,{errorMessage:"Unknown Error",problemDomain:"other"}];return a.QuizModel.shared.friends.value=((function(e){if(Array.isArray(e))return o(e)})(y=a.QuizModel.shared.friends.value.filter(function(t){return u(t,2)[1]!==e}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||s(y)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([[t,e,Date.now()]]),[2,void 0];case 3:return d.sent(),[2,{errorMessage:"Network Error",problemDomain:"other"}];case 4:return[2]}})})()}}}]);
//# sourceMappingURL=327.js.map