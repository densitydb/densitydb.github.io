(self.webpackChunkassets=self.webpackChunkassets||[]).push([["327"],{53296:function(e,t,n){"use strict";n.d(t,{Z:()=>l});var r=n(63694),i=n.n(r),a=n(9369),o=n.n(a)()(i());o.push([e.id,`.quiz_clickable {
  display: block;
  border-radius: 1em;
  background-color: var(--quiz-plain-bg);
  margin: 0.25em;
  height: 100%;
}

@media (hover: hover) and (pointer: fine) {
  .quiz_clickable:hover {
    background-color: var(--quiz-selected-bg);
    color: var(--text-main-opposite);
  }
}

.quiz_correct {
  background-color: var(--quiz-correct);
  color: #000;
}

.quiz_correct:hover {
  background-color: var(--quiz-correct);
  color: #000;
}

.quiz_incorrect {
  background-color: var(--quiz-incorrect);
  color: #000;
}

.quiz_incorrect:hover {
  background-color: var(--quiz-incorrect);
  color: #000;
}

.quiz_results_question {
  text-align: center;
  display: table;
  margin: 0 auto;
  font-size: 1.25em;
}

.quiz_result_name_left {
  width: 35%;
  text-align: right;
  vertical-align: middle;
}

.quiz_result_value_left {
  width: 10%;
  text-align: right;
  font-weight: 500;
  vertical-align: middle;
}

.quiz_result_symbol {
  width: 5%;
  text-align: center;
  font-weight: 500;
  vertical-align: middle;
}

.quiz_result_value_right {
  width: 10%;
  text-align: left;
  font-weight: 500;
  vertical-align: middle;
}

.quiz_result_name_right {
  width: 35%;
  text-align: left;
  vertical-align: middle;
}

.quiz_summary {
  text-align: center;
  font-size: 2em;
  display: table;
  margin: 0 auto;
}

.quiz_footer {
  table-layout: fixed;
  width: 40%;
  margin-left: 30%;
  margin-right: 30%;
  height: 3em;
}

.quiz_barchart {
  margin: 0 auto;
}

.quiz_bar_td {
  height: 1.5em;
  vertical-align: middle;
  font-size: 1em;
}

.quiz_bar {
  padding-left: 0.5em;
  float: left;
  vertical-align: middle;
  height: 1.5em;
  font-size: 1em;
}

.quiz_stat {
  padding-left: 0.5em;
  float: left;
  vertical-align: middle;
  height: 1.5em;
  line-height: 1.5em;
  font-size: 1em;
}`,"",{version:3,sources:["webpack://./src/components/quiz.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,kBAAkB;EAClB,sCAAsC;EACtC,cAAc;EACd,YAAY;AACd;;AAEA;EACE;IACE,yCAAyC;IACzC,gCAAgC;EAClC;AACF;;AAEA;EACE,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,qCAAqC;EACrC,WAAW;AACb;;AAEA;EACE,uCAAuC;EACvC,WAAW;AACb;;AAEA;EACE,uCAAuC;EACvC,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,cAAc;EACd,iBAAiB;AACnB;;AAEA;EACE,UAAU;EACV,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,iBAAiB;EACjB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,SAAS;EACT,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,UAAU;EACV,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,kBAAkB;EAClB,cAAc;AAChB",sourcesContent:[".quiz_clickable {\n  display: block;\n  border-radius: 1em;\n  background-color: var(--quiz-plain-bg);\n  margin: 0.25em;\n  height: 100%;\n}\n\n@media (hover: hover) and (pointer: fine) {\n  .quiz_clickable:hover {\n    background-color: var(--quiz-selected-bg);\n    color: var(--text-main-opposite);\n  }\n}\n\n.quiz_correct {\n  background-color: var(--quiz-correct);\n  color: #000;\n}\n\n.quiz_correct:hover {\n  background-color: var(--quiz-correct);\n  color: #000;\n}\n\n.quiz_incorrect {\n  background-color: var(--quiz-incorrect);\n  color: #000;\n}\n\n.quiz_incorrect:hover {\n  background-color: var(--quiz-incorrect);\n  color: #000;\n}\n\n.quiz_results_question {\n  text-align: center;\n  display: table;\n  margin: 0 auto;\n  font-size: 1.25em;\n}\n\n.quiz_result_name_left {\n  width: 35%;\n  text-align: right;\n  vertical-align: middle;\n}\n\n.quiz_result_value_left {\n  width: 10%;\n  text-align: right;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_symbol {\n  width: 5%;\n  text-align: center;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_value_right {\n  width: 10%;\n  text-align: left;\n  font-weight: 500;\n  vertical-align: middle;\n}\n\n.quiz_result_name_right {\n  width: 35%;\n  text-align: left;\n  vertical-align: middle;\n}\n\n.quiz_summary {\n  text-align: center;\n  font-size: 2em;\n  display: table;\n  margin: 0 auto;\n}\n\n.quiz_footer {\n  table-layout: fixed;\n  width: 40%;\n  margin-left: 30%;\n  margin-right: 30%;\n  height: 3em;\n}\n\n.quiz_barchart {\n  margin: 0 auto;\n}\n\n.quiz_bar_td {\n  height: 1.5em;\n  vertical-align: middle;\n  font-size: 1em;\n}\n\n.quiz_bar {\n  padding-left: 0.5em;\n  float: left;\n  vertical-align: middle;\n  height: 1.5em;\n  font-size: 1em;\n}\n\n.quiz_stat {\n  padding-left: 0.5em;\n  float: left;\n  vertical-align: middle;\n  height: 1.5em;\n  line-height: 1.5em;\n  font-size: 1em;\n}"],sourceRoot:""}]);let l=o},61258:function(e){"use strict";function t(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}e.exports=function e(n,r){if(n===r)return!0;if(n&&r&&(void 0===n?"undefined":t(n))=="object"&&(void 0===r?"undefined":t(r))=="object"){if(n.constructor!==r.constructor)return!1;if(Array.isArray(n)){if((i=n.length)!=r.length)return!1;for(a=i;0!=a--;)if(!e(n[a],r[a]))return!1;return!0}if(n.constructor===RegExp)return n.source===r.source&&n.flags===r.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===r.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===r.toString();if((i=(o=Object.keys(n)).length)!==Object.keys(r).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=i;0!=a--;){var i,a,o,l=o[a];if(!e(n[l],r[l]))return!1}return!0}return n!=n&&r!=r}},53939:function(e,t,n){"use strict";var r=n(5139);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},5860:function(e,t,n){e.exports=n(53939)()},5139:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},31007:function(e,t,n){"use strict";function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||r({__proto__:[]},Array)&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return u(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=c(n(72668)),m=f(n(61258)),p=c(n(5860));function h(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ").replace(/<br \/>/g,"<br>")}t.default=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"==typeof t.props.innerRef?{current:null}:d.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!=typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var r=n.innerHTML;if(t.props.onChange&&r!==t.lastHtml){var i=Object.assign({},e,{target:{value:r}});t.props.onChange(i)}t.lastHtml=r}},t}return a(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,r=t.html,i=t.innerRef,a=s(t,["tagName","html","innerRef"]);return d.createElement(n||"div",o(o({},a),{ref:"function"==typeof i?function(t){i(t),e.el.current=t}:i||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||h(e.html)!==h(n.innerHTML)||t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||t.placeholder!==e.placeholder||!(0,m.default)(t.style,e.style)},t.prototype.componentDidUpdate=function(){var e=this.getEl();if(e){this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html;var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var i=window.getSelection();if(null!==i){var a=document.createRange();a.setStart(t,t.nodeValue.length),a.collapse(!0),i.removeAllRanges(),i.addRange(a)}r(e,HTMLElement)&&e.focus()}}},t.propTypes={html:p.string.isRequired,onChange:p.func,disabled:p.bool,tagName:p.string,className:p.string,style:p.object,innerRef:p.oneOfType([p.object,p.func])},t}(d.Component)},25486:function(e,t,n){"use strict";n.d(t,{T:()=>f,j:()=>d});var r=n(72668),i=n(76293),a=n(66547);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(e){n(e);return}l.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,u,"next",e)}function u(e){l(a,r,i,o,u,"throw",e)}o(void 0)})}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){var c=[l,u];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function f(e){var t,n,o,l=(0,a.cI)(),f=null!=(o=null==(t=(n=navigator).canShare)?void 0:t.call(n,{url:"https://juxtastat.org",text:"test"}))&&o,m=i.isMobile&&f&&!i.isFirefox;return r.createElement("button",{className:"serif",style:d(l.hueColors.green,l.buttonTextWhite),ref:e.buttonRef,onClick:function(){return u(function(){var t,n,r;function i(){return u(function(){return s(this,function(t){switch(t.label){case 0:return[4,navigator.clipboard.writeText("".concat(n,"\n").concat(r))];case 1:return t.sent(),e.buttonRef.current.textContent="Copied!",[2]}})})()}return s(this,function(a){switch(a.label){case 0:return[4,e.produceSummary()];case 1:if(n=(t=c.apply(void 0,[a.sent(),2]))[0],r=t[1],!m)return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,navigator.share({url:r,text:"".concat(n,"\n")})];case 3:case 5:return a.sent(),[3,6];case 4:return a.sent(),[4,i()];case 6:return[3,9];case 7:return[4,i()];case 8:a.sent(),a.label=9;case 9:return[2]}})})()}},r.createElement("div",null,m?"Share":"Copy"),r.createElement("div",{style:{marginInline:"0.25em"}}),r.createElement("img",{src:"/share.png",className:"icon",style:{width:"1em",height:"1em"}}))}function d(e,t){return{textAlign:"center",fontSize:"2em",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",margin:"0 auto",padding:"0.25em 1em",backgroundColor:e,borderRadius:"0.25em",border:"none",color:t}}},68431:function(e,t,n){"use strict";n.d(t,{J:()=>i});var r=n(72668);function i(e){var t=e.size,n=e.color,i=e.src,a=e.style;return r.createElement("div",{style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({backgroundColor:n,width:t,height:t,maskImage:"url(".concat(i,")"),maskRepeat:"no-repeat",maskSize:"contain",maskPosition:"center"},a)})}},64455:function(e,t,n){"use strict";n.d(t,{JZ:()=>s,gw:()=>f,$k:()=>c});var r=n(72668),i=n(66547),a=n(27281),o=n(59070);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){var t,n,i=u((0,a.yu)("use_imperial"),1)[0],l=u((0,a.yu)("temperature_unit"),1)[0],c=(function(e){switch(e){case"percentage":return{renderValue:function(e){return{value:r.createElement("span",null,(100*e).toFixed(2)),unit:r.createElement("span",null,"%")}}};case"fatalities":return{renderValue:function(e){return{value:r.createElement("span",null,(0,o.HT)(e.toFixed(0))),unit:r.createElement("span",null,"\xa0")}}};case"fatalitiesPerCapita":return{renderValue:function(e){return{value:r.createElement("span",null,(1e5*e).toFixed(2)),unit:r.createElement("span",null,"/100k")}}};case"density":return{renderValue:function(e,t){var n="km",i=e;t&&(n="mi",i*=2.5899752356);var a=2;return i>10?a=0:i>1&&(a=1),{value:r.createElement("span",null,(0,o.HT)(i.toFixed(a))),unit:r.createElement("span",null,"/\xa0",n,r.createElement("sup",null,"2"))}}};case"population":return{renderValue:function(e){return e>1e9?{value:r.createElement("span",null,(e/1e9).toPrecision(3)),unit:r.createElement("span",null,"B")}:e>1e6?{value:r.createElement("span",null,(e/1e6).toPrecision(3)),unit:r.createElement("span",null,"m")}:e>1e4?{value:r.createElement("span",null,(e/1e3).toPrecision(3)),unit:r.createElement("span",null,"k")}:{value:r.createElement("span",null,(0,o.HT)(e.toFixed(0))),unit:r.createElement("span",null,"\xa0")}}};case"area":return{renderValue:function(e,t){var n,i=e;t?(i/=2.5899752356)<1?(n=r.createElement("span",null,"acres"),i*=640):n=r.createElement("span",null,"mi",r.createElement("sup",null,"2")):i<.01?(i*=1e6,n=r.createElement("span",null,"m",r.createElement("sup",null,"2"))):n=r.createElement("span",null,"km",r.createElement("sup",null,"2"));var a=3;i>100?a=0:i>10?a=1:i>1&&(a=2);var l=i.toFixed(a);return 0===a&&(l=(0,o.HT)(l)),{value:r.createElement("span",null,l),unit:n}}};case"distanceInKm":return{renderValue:function(e,t){var n=r.createElement("span",null,"km"),i=e;return t&&(n=r.createElement("span",null,"mi"),i/=1.60934),{value:r.createElement("span",null,i.toFixed(2)),unit:n}}};case"distanceInM":return{renderValue:function(e,t){var n="m",i=e;return t&&(n="ft",i*=3.28084),{value:r.createElement("span",null,(0,o.HT)(i.toFixed(0))),unit:r.createElement("span",null,n)}}};case"democraticMargin":return{renderValue:function(e){return{value:r.createElement(s,{value:e}),unit:r.createElement("span",null,"%")}}};case"temperature":return{renderValue:function(e,t,n){var i=r.createElement("span",null,"\xb0F"),a=e;return"celsius"===n&&(i=r.createElement("span",null,"\xb0C"),a=5/9*(e-32)),{value:r.createElement("span",null,a.toFixed(1)),unit:i}}};case"time":return{renderValue:function(e){var t=Math.floor(e),n=Math.floor((e-t)*60);return{value:r.createElement("span",null,t,":",n.toString().padStart(2,"0")),unit:r.createElement("span",null,"\xa0")}}};case"distancePerYear":return{renderValue:function(e,t){var n=100*e,i="cm";return t&&(i="in",n/=2.54),{value:r.createElement("span",null,n.toFixed(1)),unit:r.createElement("span",null,i,"/yr")}}};case"contaminantLevel":return{renderValue:function(e){return{value:r.createElement("span",null,e.toFixed(2)),unit:r.createElement("span",null,"μg/m",r.createElement("sup",null,"3"))}}};case"number":return{renderValue:function(e){return{value:r.createElement("span",null,e.toFixed(3)),unit:r.createElement("span",null,"\xa0")}}};case"usd":return{renderValue:function(e){return e>1e9?{value:r.createElement("span",null,"$",(e/1e9).toPrecision(3)),unit:r.createElement("span",null,"B")}:e>1e6?{value:r.createElement("span",null,"$",(e/1e6).toPrecision(3)),unit:r.createElement("span",null,"m")}:e>1e3?{value:r.createElement("span",null,"$",(e/1e3).toPrecision(3)),unit:r.createElement("span",null,"k")}:{value:r.createElement("span",null,"$",(0,o.HT)(e.toFixed(0))),unit:r.createElement("span",null,"\xa0")}}};case"minutes":return{renderValue:function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return t>0?{value:r.createElement("span",null,t,":",n.toString().padStart(2,"0")),unit:r.createElement("span",null,"\xa0")}:{value:r.createElement("span",null,n),unit:r.createElement("span",null,"\xa0")}}}}})(null!=(n=e.unit)?n:(t=e.statname).includes("%")||t.includes("Change")||t.includes("(Grade)")?"percentage":t.includes("Total")&&t.includes("Fatalities")?"fatalities":t.includes("Fatalities Per Capita")?"fatalitiesPerCapita":t.includes("Density")?"density":t.includes("Elevation")?"distanceInM":t.startsWith("Population")?"population":"Area"===t?"area":t.includes("Mean distance")?"distanceInKm":t.includes("Election")||t.includes("Swing")?"democraticMargin":t.includes("high temp")||t.includes("low temp")||t.includes("high heat index")||t.includes("dewpt")?"temperature":"Mean sunny hours"===t?"time":"Rainfall"===t||"Snowfall [rain-equivalent]"===t?"distancePerYear":t.includes("Pollution")?"contaminantLevel":t.includes("(USD)")?"usd":t.includes("(min)")?"minutes":"number").renderValue(e.value,i,l),f=c.value,d=c.unit;return r.createElement("span",{style:e.style},e.isUnit?d:f)}function s(e){var t=(0,i.cI)();if(e.value!=e.value)return r.createElement("span",null,"N/A");var n=100*Math.abs(e.value),a=n>10?1:n>1?2:n>.1?3:4,o=n.toFixed(a),l=e.value>0?"D":"R",u=e.value>0?t.hueColors.blue:t.hueColors.red;return r.createElement("span",{style:{color:u,display:"flex",justifyContent:"flex-end"}},l,"+",o)}function f(e){if(e.ordinal>e.total)return r.createElement("span",null);var t=e.percentileByPopulation,n="".concat(t,"th percentile");return e.simpleOrdinals?n="".concat(t.toString(),"%"):t%10==1&&t%100!=11?n="".concat(t,"st percentile"):t%10==2&&t%100!=12?n="".concat(t,"nd percentile"):t%10==3&&t%100!=13&&(n="".concat(t,"rd percentile")),r.createElement("div",{className:"serif",style:{textAlign:"right",marginRight:e.simpleOrdinals?"5px":void 0}},n)}},42243:function(e,t,n){"use strict";n.d(t,{P:()=>l,t:()=>u});var r=n(72668),i=n(31007),a=n.n(i);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t,n=(0,r.useRef)(null),i=(0,r.useRef)(e.content.toString()),l=(t=(0,r.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];(0,r.useEffect)(function(){i.current=e.content.toString(),l(function(e){return e+1})},[e.content]);var u=function(){var t=n.current.innerText;t!==e.content&&e.onNewContent(t)};return r.createElement(a(),{className:"editable_content",style:e.style,innerRef:n,html:i.current,disabled:!1,onChange:function(e){i.current=e.target.value},onKeyDown:function(e){"Enter"===e.key&&(u(),e.preventDefault())},onBlur:u,tagName:"span",inputMode:e.inputMode,onFocus:function(){setTimeout(function(){var e=document.createRange();e.selectNodeContents(n.current);var t=window.getSelection();null==t||t.removeAllRanges(),null==t||t.addRange(e)},0)}})}function u(e){return r.createElement(l,{content:e.number.toString(),onNewContent:function(t){var n=parseInt(t);Number.isNaN(n)||n===e.number||e.onNewNumber(n)},style:{minWidth:"2em",display:"inline-block"},inputMode:"decimal"})}},24531:function(e,t,n){"use strict";n.r(t),n.d(t,{OtherQuizzesButtons:()=>ty,JuxtastatInfiniteButton:()=>th,QuizPanel:()=>tm});var r=n(72668),i=n(6381),a=n(8199),o=n(41623),l=n(66547),u=n(27281),c=n(79779);n(71540);var s=n(93379),f=n.n(s),d=n(7795),m=n.n(d),p=n(90569),h=n.n(p),y=n(3565),v=n.n(y),g=n(19216),b=n.n(g),E=n(44589),A=n.n(E),w=n(53296),z={};z.styleTagTransform=A(),z.setAttributes=v(),z.insert=h().bind(null,"head"),z.domAPI=m(),z.insertStyleElement=b(),f()(w.Z,z),w.Z&&w.Z.locals&&w.Z.locals;var x=n(62473),C=n(50751);function S(){var e=x.AuthenticationStateMachine.shared.useStartSignIn(),t=x.AuthenticationStateMachine.shared.useState();return r.createElement(C.T,null,r.createElement("h1",null,"You were signed out"),r.createElement("p",null,"Sign back in to"," ",r.createElement("b",null,t.email)," ","ensure your quiz progress continues syncing."),r.createElement("button",{style:{margin:"1em",padding:"0.5em 1em"},onClick:function(){null==e||e()}},"Sign In"),r.createElement("button",{style:{margin:"1em",padding:"0.5em 1em"},onClick:function(){x.AuthenticationStateMachine.shared.userSignOut()}},"Sign Out"))}var q=n(54194),O=n(72447),k=n(76293),_=n(72082),j=n(36195);function D(e){var t=e.quiz,n=(0,O.nameOfQuizKind)(t.kind);return"number"!=typeof t.name&&"infinite"!==t.kind&&(n+=" ".concat(t.name)),r.createElement("div",{className:(0,j.Kn)()},n)}function I(e){for(var t=(0,l.cI)(),n=(0,l.Rv)(),i=e.history.correct_pattern.map(function(e){return e?n.correct:n.incorrect});i.length<e.length;)i.push(t.unselectedButton);return r.createElement("table",{className:"quiz_footer"},r.createElement("tbody",null,r.createElement("tr",null,i.map(function(e,t){return r.createElement("td",{key:t,style:{backgroundColor:e}})}))))}function P(e){return r.createElement("div",{className:"centered_text serif"},function(){switch(e.quizKind){case"juxtastat":return"Select the geographical region answering the question. The questions get harder as you go on.";case"retrostat":return"Select the easier question. A question is considered easier if more people got it right.";case"custom":return"Select the geographical region answering the question.";case"infinite":return"Select the geographical region answering the question. You lose when you run out of lives."+" You gain lives by getting ".concat(q.juxtaInfiniteCorrectForBonus," questions right in a row.")}}()," ",B(),M())}function B(){var e=O.QuizModel.shared.uniquePersistentId.use();return r.createElement("div",null,"Your user id is ",r.createElement("span",{className:"juxtastat-user-id"},e),". ",r.createElement(N,null))}function N(){var e=x.AuthenticationStateMachine.shared.useState(),t=x.AuthenticationStateMachine.shared.useStartSignIn();return"signedOut"===e.state?r.createElement(r.Fragment,null,r.createElement("a",{href:"","data-test":"googleSignIn",onClick:function(e){e.preventDefault(),null==t||t()}},"Sign In with Google")," to sync your quiz history across devices."):r.createElement(r.Fragment,null,"Signed in with ".concat(e.email,". "),r.createElement("a",{href:"",onClick:function(e){e.preventDefault(),x.AuthenticationStateMachine.shared.userSignOut()}},"Sign Out"))}function M(){return r.createElement("div",{style:{marginTop:"5px"}},r.createElement("button",{onClick:function(){O.QuizModel.shared.exportQuizPersona()}},"Export Quiz History")," ",r.createElement("button",{onClick:function(){O.QuizModel.shared.importQuizPersona()}},"Import Quiz History"))}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function Q(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(U=function(){return!!e})()}var V=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(){var e,t;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return e=n,t=arguments,e=F(e),function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,U()?Reflect.construct(e,t||[],F(this).constructor):e.apply(this,t))}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&H(n,e),t=[{key:"computeShapesToRender",value:function(){return Promise.resolve({shapes:[{name:this.props.longname,spec:{type:"polygon",style:{fillOpacity:.5,weight:1,color:this.props.color,fillColor:this.props.color}},meta:{},notClickable:!0}],zoomIndex:0})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(_.J9);function L(e){switch(e.question.kind){case"retrostat":return r.createElement(G,Q(R({},e),{question:e.question}));case"juxtastat":return r.createElement($,Q(R({},e),{question:e.question}));default:throw Error("Invalid question kind")}}function K(e){var t="quiz_clickable",n="quiz_clickable";if(e.waiting){var i=e.history.choices,a=e.history.correct_pattern,o=i[i.length-1],l=a[a.length-1]?" quiz_correct":" quiz_incorrect";"A"===o?t+=l:n+=l}var u=e.getQuestion(),c={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"0.5em"},s={display:"flex",justifyContent:"center",width:"90%",margin:"auto"},f=(0,j.wd)()?"quiztext_mobile":"quiztext";return e.nested&&(f+="_nested"),r.createElement("div",null,e.noHeader?void 0:r.createElement(D,{quiz:e.quiz}),r.createElement("div",{className:"centered_text ".concat(f)},u),r.createElement("div",{className:"gap"}),r.createElement("div",{style:s},r.createElement("div",{style:{width:"50%",padding:"0.5em"}},r.createElement("div",{role:"button",id:"quiz-answer-button-a",className:t,onClick:function(){e.onSelect("A")},style:c},r.createElement("span",{style:{margin:"auto"}},r.createElement("div",{className:"centered_text ".concat(f)},e.getOption("a"))))),r.createElement("div",{style:{width:"50%",padding:"0.5em"}},r.createElement("div",{role:"button",id:"quiz-answer-button-b",className:n,onClick:function(){e.onSelect("B")},style:c},r.createElement("span",{style:{margin:"auto"}},r.createElement("div",{className:"centered_text ".concat(f)},e.getOption("b")))))),r.createElement("div",{style:s},r.createElement("div",{style:{width:"50%",padding:"0.5em"}},e.getDemo("a")),r.createElement("div",{style:{width:"50%",padding:"0.5em"}},e.getDemo("b"))),e.noFooter?void 0:r.createElement(r.Fragment,null,"infinite"===e.quiz.kind?r.createElement(q.JuxtastatLivesDisplay,{correctPattern:e.history.correct_pattern.map(function(e){return!!e})}):void 0,r.createElement(I,{history:e.history,length:e.length}),r.createElement(P,{quizKind:e.quiz.kind})))}function G(e){return r.createElement(K,Q(R({},e),{getQuestion:function(){return"Which question was easier?"},getOption:function(e){return"Question ".concat(e.toUpperCase())},getDemo:function(t){var n=(0,O.aCorrect)(e.question[t])?"A":"B";return r.createElement("div",{style:{zoom:.5}},r.createElement($,{question:e.question[t],history:{choices:[n],correct_pattern:[!0]},length:5,onSelect:function(){},waiting:!0,quiz:{kind:"juxtastat",name:"demo"},noHeader:!0,noFooter:!0,nested:k.isFirefox}))}}))}function $(e){var t=(0,l.cI)();return r.createElement(K,Q(R({},e),{getQuestion:function(){return J(e.question.question)},getOption:function(t){return e.question["longname_".concat(t)]},getDemo:function(n){return r.createElement(V,{longname:e.question["longname_".concat(n)],basemap:{type:"osm"},color:t.hueColors.blue,attribution:"b"===n?"startHidden":"none"})}}))}function Y(e){return e.startsWith("!FULL ")?e.slice(6):"Which has a ".concat(e,"?")}function J(e){if(e.includes("!TOOLTIP")){var t=W(e.split("!TOOLTIP "),2),n=t[0],i=t[1];return r.createElement("span",null,Y(n),r.createElement(Z,{content:i}))}return Y(e)}function Z(e){var t=W(r.useState(!1),2),n=t[0],i=t[1];return r.createElement("span",null,r.createElement("sup",null,r.createElement("div",{style:{cursor:"pointer",fontSize:"smaller",margin:"5px",fontWeight:"bold",border:"none",display:"unset",height:"unset",padding:"0px 5px"},onClick:function(){i(!n)},className:"quiz_clickable",role:"button"},"ⓘ︎")),n?r.createElement("div",{style:{fontSize:"20px"}},"(",e.content,")"):void 0)}var X=n(25486),ee=n(68431),et=n(64455),en=n(98234),er=n(51329),ei=n(15498),ea=n(4334),eo=n(20758),el=n(14466),eu=n(27093),ec=n(9429),es=function(){return(es=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ef=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},ed=(0,ec.i)("GridLoader","0% {transform: scale(1)} 50% {transform: scale(0.5); opacity: 0.7} 100% {transform: scale(1); opacity: 1}","grid"),em=function(e){return Math.random()*e};let ep=function(e){var t=e.loading,n=e.color,i=void 0===n?"#000000":n,a=e.speedMultiplier,o=void 0===a?1:a,l=e.cssOverride,u=e.size,c=void 0===u?15:u,s=e.margin,f=void 0===s?2:s,d=ef(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),m=(0,eu.h)(c),p=(0,eu.h)(f),h=3*parseFloat(m.value.toString())+6*parseFloat(p.value.toString()),y=es({width:"".concat(h).concat(m.unit),fontSize:0,display:"inline-block"},void 0===l?{}:l),v=function(e){return{display:"inline-block",backgroundColor:i,width:"".concat((0,eu.E)(c)),height:"".concat((0,eu.E)(c)),margin:(0,eu.E)(f),borderRadius:"100%",animationFillMode:"both",animation:"".concat(ed," ").concat((e/100+.6)/o,"s ").concat(e/100-.2,"s infinite ease")}};return void 0===t||t?r.createElement("span",es({style:y},d,{ref:function(e){e&&e.style.setProperty("width","".concat(h).concat(m.unit),"important")}}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))}),r.createElement("span",{style:v(em(100))})):null};var eh=n(42243),ey=n(13736),ev=n(89533),eg=n(82359);function eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eE(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(e){n(e);return}l.done?t(u):Promise.resolve(u).then(r,i)}function eA(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){eE(a,r,i,o,l,"next",e)}function l(e){eE(a,r,i,o,l,"throw",e)}o(void 0)})}}function ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function ez(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function ex(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||eS(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eC(e){return function(e){if(Array.isArray(e))return eb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eS(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eS(e,t){if(e){if("string"==typeof e)return eb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eb(e,t)}}function eq(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){var c=[l,u];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function eO(e){var t=(0,l.cI)(),n=ex((0,r.useState)([]),2),i=n[0],a=n[1],o=ex((0,r.useState)(!1),2),u=o[0],c=o[1],s=ex((0,r.useState)(void 0),2),f=s[0],d=s[1],m=O.QuizModel.shared.uniquePersistentId.use(),p=O.QuizModel.shared.uniqueSecureId.use();(0,r.useEffect)(function(){eA(function(){var t,n,r,i,o;return eq(this,function(l){var u,s,f,m;switch(l.label){case 0:c(!0),d(void 0),l.label=1;case 1:if(l.trys.push([1,6,7,8]),n=Object.fromEntries((t=e.quizFriends.filter(function(e){return null!==ex(e,1)[0]})).map(function(e){var t=ex(e,2),n=t[0];return[t[1],n]})),r=t.map(function(e){return e[1]}),"infinite"!==e.quizDescriptor.kind)return[3,3];return[4,(u=e.quizDescriptor,s=r,eA(function(){var e;return eq(this,function(t){switch(t.label){case 0:return[4,ea.G.POST("/juxtastat/infinite_results",{params:{header:O.QuizModel.shared.userHeaders()},body:{requesters:s,seed:u.seed,version:u.version}})];case 1:if(void 0===(e=t.sent().data))return[2,void 0];return[2,e.results.map(function(e){return e.friends?{friends:!0,result:e}:{friends:!1}})]}})})())];case 2:return o=l.sent(),[3,5];case 3:return[4,(f=e.quizDescriptor,m=r,eA(function(){var e,t;return eq(this,function(n){switch(n.label){case 0:return e=(0,eg.parseTimeIdentifier)(f.kind,f.name.toString()),[4,ea.G.POST("/juxtastat/todays_score_for",{params:{header:O.QuizModel.shared.userHeaders()},body:{date:e,requesters:m,quiz_kind:f.kind}})];case 1:if(void 0===(t=n.sent().data))return[2,void 0];return[2,t.results.map(function(e){return e.friends?{friends:!0,result:e}:{friends:!1}})]}})})())];case 4:o=l.sent(),l.label=5;case 5:if(void 0===(i=o))return[2];return a(i.map(function(e,t){return ew({name:n[r[t]]},e)})),[3,8];case 6:return l.sent(),d("Network Error"),[3,8];case 7:return c(!1),[7];case 8:return[2]}})})()},[e.quizDescriptor,e.quizFriends,m,p]);var h=[e.myResult].concat(eC(i.flatMap(function(e){return e.friends?[e.result]:[]}))),y=r.createElement("div",null,r.createElement("div",{style:{margin:"auto",width:"100%"}},r.createElement("div",{className:"quiz_summary"},"Friends")),r.createElement(r.Fragment,null,"infinite"===e.quizDescriptor.kind?r.createElement(ek,null):void 0,r.createElement(eD,{result:e.myResult,otherResults:h}),i.map(function(t,n){return r.createElement(eI,{key:n,index:n,friendScore:t,removeFriend:function(){return eA(function(){var r;return eq(this,function(i){switch(i.label){case 0:return[4,ea.G.POST("/juxtastat/unfriend",{params:{header:O.QuizModel.shared.userHeaders()},body:{requestee:e.quizFriends[n][1]}})];case 1:return i.sent(),r=e.quizFriends.map(function(e){return e[0]===t.name?[null,e[1],Date.now()]:e}),e.setQuizFriends(r),[2]}})})()},quizFriends:e.quizFriends,setQuizFriends:e.setQuizFriends,otherResults:h})})),r.createElement("div",{style:{height:"1em"}}),r.createElement(eB,null)),v="78px";return r.createElement("div",{style:{position:"relative"}},r.createElement("div",{style:{opacity:u?.5:1,pointerEvents:u?"none":void 0}},r.createElement(eN,{content:y,error:f})),u?r.createElement(el.Z,{size:v,color:t.textMain,cssOverride:{position:"absolute",left:"calc(50% - ".concat(v," / 2)"),top:"calc(50% - ".concat(v," / 2)")}}):null)}function ek(){return r.createElement("div",{style:{display:"flex",flexDirection:"row",height:e_,alignItems:"center"},className:"testing-friends-section"},r.createElement("div",{style:{width:"25%"}}),r.createElement("div",{style:{width:"50%",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},"On This Seed"),r.createElement("div",{style:{width:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},"Overall Best")),r.createElement("div",{style:{width:"25%"}}))}var e_="2em",ej="1.5em";function eD(e){return r.createElement("div",{style:{display:"flex",flexDirection:"row",height:e_,alignItems:"center"},className:"testing-friends-section"},r.createElement("div",{style:{width:"25%"}},"You"),r.createElement("div",{style:{width:"50%"}},r.createElement(eP,{result:e.result,friends:!0,otherResults:e.otherResults})),r.createElement("div",{style:{width:"25%",display:"flex",height:ej}},r.createElement("button",{onClick:function(){return eA(function(){var e,t,n,r;return eq(this,function(i){switch(i.label){case 0:if(null===(e=prompt("Enter your name:")))return[2];return n=(0,a.Sz)({kind:"quiz",id:null!=(t=x.AuthenticationStateMachine.shared.state.email)?t:O.QuizModel.shared.uniquePersistentId.value,name:e}).hash,r="https://juxtastat.org/".concat(n),[4,navigator.clipboard.writeText(r)];case 1:return i.sent(),alert("Link copied to clipboard!"),[2]}})})()},style:{marginLeft:"1em"},"data-test-id":"friend-link-button"},"Copy Link")))}function eI(e){var t,n=(0,l.cI)(),i=ex((0,r.useState)(void 0),2),a=i[0],o=i[1],u=ex((0,r.useState)(!1),2),c=u[0],s=u[1],f=r.createElement("div",{style:{display:"flex",flexDirection:"row",height:e_,alignItems:"center"},className:"testing-friends-section"},r.createElement("div",{style:{width:"25%"}},r.createElement(eh.P,{content:null!=(t=e.friendScore.name)?t:"Unknown",onNewContent:function(t){if(""===t)return void o("Friend name cannot be empty");if(e.quizFriends.map(function(e){return e[0]}).includes(t))return void o("Friend name already exists");var n=eC(e.quizFriends);n[e.index]=[t,e.quizFriends[e.index][1],Date.now()],e.setQuizFriends(n),o(void 0)},style:{width:"100%",height:"100%"},inputMode:"text"})),r.createElement("div",{style:{width:"50%"}},r.createElement(eP,ez(ew({},e.friendScore),{otherResults:e.otherResults}))),r.createElement("div",{style:{width:"25%",display:"flex",height:ej}},r.createElement("button",{onClick:function(){return eA(function(){return eq(this,function(t){switch(t.label){case 0:s(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,e.removeFriend()];case 2:return t.sent(),[3,5];case 3:return t.sent(),o("Network Error"),[3,5];case 4:return s(!1),[7];case 5:return[2]}})})()},style:{marginLeft:"1em"},disabled:c},"Remove"),c?r.createElement(ep,{color:n.textMain,size:"4px",cssOverride:{marginLeft:"10px"}}):null));return r.createElement(eN,{error:a,content:f})}function eP(e){var t=(0,l.cI)(),n=(0,l.Rv)(),a=(0,r.useContext)(i.C.Context),o="1px solid ".concat(t.background),u={backgroundColor:(0,ey.bt)(t.hueColors.orange,.5,t.background),width:"100%",height:e_,display:"flex",justifyContent:"center",alignItems:"center",border:o};if(!e.friends)return r.createElement("div",{style:u},"Ask\xa0",r.createElement("b",null,e.name),"\xa0to add you");if("forThisSeed"in e.result){var c,s,f,d,m=null===e.result.maxScoreSeed||null===e.result.maxScoreVersion?{href:void 0,onClick:function(){}}:a.link({kind:"quiz",mode:"infinite",seed:e.result.maxScoreSeed,v:e.result.maxScoreVersion},{scroll:{kind:"position",top:0}}),p=e.otherResults.filter(function(e){return"forThisSeed"in e}),h={width:"50%",border:o,display:"flex",justifyContent:"center",alignItems:"center",color:t.buttonTextWhite,fontWeight:"bold"},y=(c=Math).max.apply(c,eC(p.map(function(e){var t;return null!=(t=e.maxScore)?t:0})))===e.result.maxScore,v=(s=Math).max.apply(s,eC(p.map(function(e){var t;return null!=(t=e.forThisSeed)?t:0})))===e.result.forThisSeed;return r.createElement("div",{style:{display:"flex",flexDirection:"row",height:e_}},r.createElement("div",{style:ez(ew({},h),{backgroundColor:v?t.hueColors.green:t.hueColors.blue})},null!=(f=e.result.forThisSeed)?f:"-"),r.createElement("div",{style:ez(ew({},h),{backgroundColor:y?t.hueColors.green:t.hueColors.blue}),onClick:m.onClick},r.createElement("a",{style:{textDecoration:"none",color:t.buttonTextWhite},href:m.href},null!=(d=e.result.maxScore)?d:"-")))}if(null===e.result.corrects)return r.createElement("div",{style:u},"Not Done Yet");var g=e.result.corrects;return r.createElement("div",{className:"testing-friend-score",style:{display:"flex",flexDirection:"row",height:e_}},g.map(function(e,t){var i=e?n.correct:n.incorrect;return r.createElement("div",{className:e?"testing-friend-score-correct":"testing-friend-score-incorrect",key:t,style:{backgroundColor:i,color:i,width:"".concat(100/g.length,"%"),border:o}},e?"y":"n")}))}function eB(){var e=(0,l.cI)(),t=ex((0,r.useState)(""),2),n=t[0],i=t[1],a=ex((0,r.useState)(""),2),o=a[0],u=a[1],c=ex((0,r.useState)(void 0),2),s=c[0],f=c[1],d=ex((0,r.useState)(!1),2),m=d[0],p=d[1],h=r.createElement("div",{style:{display:"flex",flexDirection:"row",height:ej,alignItems:"center"}},r.createElement("div",{style:{width:"37.5%",padding:"0 0.2em"}},r.createElement("input",{type:"text",placeholder:"Friend Name",value:n,style:{width:"100%",height:"100%"},onChange:function(e){i(e.target.value)},disabled:m})),r.createElement("div",{style:{width:"37.5%",padding:"0 0.2em",height:ej}},r.createElement("input",{type:"text",placeholder:"Friend ID or Email",value:o,style:{width:"100%",height:"100%"},onChange:function(e){u(e.target.value)},disabled:m})),r.createElement("div",{style:{width:"25%",display:"flex",height:ej}},r.createElement("button",{onClick:function(){return eA(function(){var e,t,r;return eq(this,function(a){switch(a.label){case 0:return e=o.trim(),t=n.trim(),p(!0),[4,(0,ev.addFriend)(e,t)];case 1:return r=a.sent(),p(!1),void 0!==r?f(r.errorMessage):(f(void 0),i(""),u("")),[2]}})})()},style:{marginLeft:"1em",height:"100%"},disabled:m},"Add"),m?r.createElement(ep,{color:e.textMain,size:"4px",cssOverride:{marginLeft:"10px"}}):null));return r.createElement(eN,{error:s,content:h})}function eN(e){var t=(0,l.cI)();return void 0!==e.error?r.createElement("div",null,e.content,r.createElement("div",{style:{backgroundColor:t.slightlyDifferentBackgroundFocused,padding:"0 0.5em",marginRight:"25%"}},e.error)):e.content}function eM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||eF(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eF(e,t){if(e){if("string"==typeof e)return eM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eM(e,t)}}function eR(e){switch(e.quiz.kind){case"juxtastat":case"retrostat":return r.createElement(eQ,{quiz:e.quiz,wholeHistory:e.wholeHistory});case"infinite":return r.createElement(eL,{quiz:e.quiz,wholeHistory:e.wholeHistory});case"custom":return}}function eQ(e){for(var t,n=(0,l.cI)(),i=(0,eg.parseTimeIdentifier)(e.quiz.kind,e.quiz.name.toString()),a=Array(i+1).fill(-1),o=Array(6).fill(0),u=[],c=0;c<=i;c++){var s=function(t){switch(e.quiz.kind){case"juxtastat":return e.wholeHistory[t];case"retrostat":return e.wholeHistory["W".concat(t)]}}(c);if(void 0!==s){var f=s.correct_pattern.reduce(function(e,t){return e+ +!!t},0);a[c]=f,o[f]+=1,u.push(f)}}for(var d=Array(a.length).fill(0),m=0;m<d.length;m++)a[m]>=3&&(d[m]=(m>0?d[m-1]:0)+1);var p=(t=Math).max.apply(t,function(e){if(Array.isArray(e))return eM(e)}(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||eF(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=d[i],y=o.reduce(function(e,t){return e+t},0),v=[{name:"Played",value:u.length.toString()},{name:"Mean score",value:(u.reduce(function(e,t){return e+t},0)/u.length).toFixed(2)},{name:"Win Rate (3+)",value:"".concat((u.filter(function(e){return e>=3}).length/u.length*100).toFixed(0),"%")},{name:"Current Streak (3+)",value:h.toString()},{name:"Max Streak (3+)",value:p.toString()}];return r.createElement("div",null,r.createElement("div",{className:"serif quiz_summary"},"Your Statistics"),r.createElement(eW,{statistics:v}),r.createElement("div",{className:"gap_small"}),r.createElement("table",{className:"quiz_barchart"},r.createElement("tbody",null,o.map(function(e,t){return r.createElement("tr",{key:t},r.createElement("td",{className:"quiz_bar_td serif",style:{color:n.textMain}},t,"/5"),r.createElement("td",{className:"quiz_bar_td serif"},r.createElement("span",{className:"quiz_bar",style:{width:"".concat(e/y*20,"em"),backgroundColor:n.hueColors.blue}}),e>0?r.createElement("span",{className:"quiz_stat",style:{color:n.textMain}},e," ","(",(e/y*100).toFixed(1),"%)"):void 0))}))))}function eH(e){var t=e.total,n=e.perQuestion,i=(0,l.Rv)();return r.createElement("div",{id:"quiz-audience-statistics"},r.createElement("div",{className:"serif quiz_summary"},"Question Difficulty"),r.createElement(eW,{statistics:n.map(function(e,n){return{name:"Q".concat(n+1," Correct"),value:"".concat((e/t*100).toFixed(0),"%"),addtl_class:"quiz-audience-statistics-displayed",color:e/t>.5?i.correct:i.incorrect}})}))}function eW(e){var t=e.statistics;return r.createElement("div",{className:"serif",style:{textAlign:"center",width:"100%",margin:"auto",fontSize:"1.5em",display:"flex",flexWrap:"wrap",justifyContent:"center"}},t.map(function(e,t){return r.createElement(eU,{key:t,number:e.value,name:e.name,additionalClass:e.additionalClass,color:e.color,onClick:e.onClick})}))}function eU(e){var t=e.number,n=e.name,i=e.additionalClass,a=e.color,o=e.onClick;return r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"0.3em"},onClick:o},r.createElement("div",{className:"serif ".concat(null!=i?i:""),style:{fontSize:"1.5em",color:a}},t),r.createElement("div",{className:"serif",style:{fontSize:"0.5em"}},n))}function eV(e,t){var n,r,i,a,o,l,u=eT((0,eg.getInfiniteQuizzes)(t,!0),2),c=u[0],s=u[1].map(function(e){return t[e].correct_pattern.reduce(function(e,t){return e+ +!!t},0)}),f=c.findIndex(function(t){var n=eT(t,2),r=n[0],i=n[1];return r===e.seed&&i===e.version}),d=eT(((n=Array.from(Array(s.length).keys())).sort(function(e,t){return s[t]-s[e]}),r=1,i=s[n[0]],o=(a=n.map(function(e){return s[e]!==i&&(i=s[e],r+=1),r})).map(function(e,t){return e<=3||n[t]===f}),l=n.filter(function(e,t){return o[t]}),[a.filter(function(e,t){return o[t]}),l]),2);return{ordinals:d[0],sortedIndices:d[1],seedVersions:c,numCorrects:s}}function eL(e){var t=(0,l.cI)(),n=(0,r.useContext)(i.C.Context),a=eV(e.quiz,e.wholeHistory),o=a.ordinals,u=a.sortedIndices,c=a.seedVersions,s=a.numCorrects;return r.createElement("div",{id:"your-best-scores"},r.createElement("div",{className:"serif quiz_summary"},"Your Best Scores"),r.createElement(eW,{statistics:u.map(function(r,i){return{name:"#".concat(o[i]),value:s[r].toString(),additionalClass:"quiz-audience-statistics-displayed",color:c[r][0]===e.quiz.seed?t.hueColors.green:t.hueColors.blue,onClick:function(){n.navigate({kind:"quiz",mode:"infinite",seed:c[r][0],v:c[r][1]},{history:"push",scroll:{kind:"none"}})}}})}))}function eK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eG(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(e){n(e);return}l.done?t(u):Promise.resolve(u).then(r,i)}function e$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function eY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function eJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||eX(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eZ(e){return function(e){if(Array.isArray(e))return eK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eX(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eX(e,t){if(e){if("string"==typeof e)return eK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eK(e,t)}}function e0(e){var t,n,i,a,o,u,c,s=(0,r.useRef)(null),f=eJ((0,r.useState)(null!=(c="custom"===e.quizDescriptor.kind||"infinite"===e.quizDescriptor.kind?void 0:(0,eg.getCachedPerQuestionStats)(e.quizDescriptor))?c:{total:0,per_question:[0,0,0,0,0]}),2),d=f[0],m=f[1],p=O.QuizModel.shared.friends.use();(0,r.useEffect)(function(){"custom"!==e.quizDescriptor.kind&&((0,eg.reportToServer)(e.wholeHistory,e.quizDescriptor.kind),"infinite"!==e.quizDescriptor.kind&&(0,eg.getPerQuestionStats)(e.quizDescriptor).then(m))},[e.wholeHistory,e.quizDescriptor]);var h=e.history.correct_pattern,y=O.QuizModel.shared.authenticationError.use(),v=null!==O.QuizModel.shared.dismissAuthNag.use(),g=x.AuthenticationStateMachine.shared.useState(),b=!v&&"signedOut"===g.state&&Object.keys(e.wholeHistory).length>=10,E=(0,l.cI)();return r.createElement("div",null,r.createElement(D,{quiz:e.quizDescriptor}),r.createElement("div",{className:"gap"}),y?r.createElement(e1,null,r.createElement("b",null,"Warning! Someone is possibly attempting to hijack your account. Please contact us at security@urbanstats.org, and send your persistent ID.")):void 0,b&&!y?r.createElement(e1,null,r.createElement("div",null,r.createElement(N,null)),r.createElement("div",{role:"button",title:"Dismiss",onClick:function(){return O.QuizModel.shared.dismissAuthNag.value=Date.now()}},r.createElement(ee.J,{size:"1em",color:E.textMain,src:"/close.png",style:{display:"inline-block"}}))):void 0,r.createElement(e4,{correctPattern:h,quizKind:e.quizDescriptor.kind}),r.createElement("div",{className:"gap_small"}),r.createElement(e2,{buttonRef:s,todayName:e.todayName,correctPattern:h,quizKind:e.quizDescriptor.kind,medal:"infinite"===e.quizDescriptor.kind?function(e,t){var n=eV(e,t),r=n.ordinals,i=n.sortedIndices,a=n.seedVersions.findIndex(function(t){var n=eT(t,2),r=n[0],i=n[1];return r===e.seed&&i===e.version}),o=r[i.indexOf(a)];switch(o){case 1:case 2:case 3:return o;default:return}}(e.quizDescriptor,e.wholeHistory):void 0}),r.createElement("div",{className:"gap"}),r.createElement("div",{className:"gap"}),d.total>30?r.createElement("div",null,r.createElement(eH,{total:d.total,perQuestion:d.per_question}),r.createElement("div",{className:"gap"}),r.createElement("div",{className:"gap"})):void 0,"custom"===e.quizDescriptor.kind||"infinite"===e.quizDescriptor.kind?void 0:r.createElement(e3,{quiz:e.quizDescriptor}),"infinite"===e.quizDescriptor.kind?r.createElement(th,null):void 0,r.createElement("div",{className:"gap"}),r.createElement(eR,{wholeHistory:e.wholeHistory,quiz:e.quizDescriptor}),r.createElement("div",{className:"gap"}),r.createElement("span",{className:"serif quiz_summary"},"Details (spoilers, don't share!)"),r.createElement("div",{className:"gap_small"}),e.quiz.map(function(t,n){return r.createElement(e8,{question:t,key:n,index:n,choice:e.history.choices[n],correct:h[n]})}),r.createElement("div",{className:"gap_small"}),"custom"===e.quizDescriptor.kind?void 0:r.createElement("div",{style:{margin:"auto",width:"100%",maxWidth:"500px"}},r.createElement(eO,{quizFriends:p,quizDescriptor:e.quizDescriptor,setQuizFriends:function(e){O.QuizModel.shared.friends.value=e},myResult:"infinite"===e.quizDescriptor.kind?(i=(n=eV(t=e.quizDescriptor,e.wholeHistory)).sortedIndices,a=n.seedVersions,{forThisSeed:(o=n.numCorrects)[a.findIndex(function(e){var n=eT(e,2),r=n[0],i=n[1];return r===t.seed&&i===t.version})],maxScore:o[u=i[0]],maxScoreSeed:a[u][0],maxScoreVersion:a[u][1]}):{corrects:h}})),r.createElement("div",{className:"gap_small"}),r.createElement("div",{className:"centered_text serif"},r.createElement(B,null),r.createElement(M,null)),r.createElement(ty,null))}function e1(e){var t=(0,l.cI)();return r.createElement(r.Fragment,null,r.createElement("div",{className:"serif",style:{backgroundColor:t.slightlyDifferentBackgroundFocused,width:"75%",margin:"auto",fontSize:"1.5em",padding:"0.5em",textAlign:"center",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-evenly"}},e.children),r.createElement("div",{className:"gap"}))}function e2(e){var t=eJ((0,u.yu)("juxtastatCompactEmoji"),1)[0],n=r.createElement(e5,eY(e$({},e),{compactRepr:t}));return e.correctPattern.length<=10?n:r.createElement("div",null,r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(en.tG,{name:"Compact emoji representation",settingKey:"juxtastatCompactEmoji",testId:"juxtastatCompactEmoji"})),r.createElement("div",{className:"gap_small"}),n)}function e5(e){var t=e.buttonRef,n=e.todayName,i=e.correctPattern,a=e.quizKind,o=e.medal,u=e.compactRepr,c=(0,l.Rv)();return r.createElement(X.T,{buttonRef:t,produceSummary:function(){var e,t,r,l,s,f,d;return e=c,t=n,r=i,l=a,s=o,f=u,(d=function(){var n,i,a,o,u,c;return function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){var c=[l,u];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:if(n=eJ(e6(r,l),2)[1],i=(0,O.nameOfQuizKind)(l),void 0!==t&&(i+=" ".concat(t)),i+=" ".concat(n),i+="\n",i+="\n",i+=tr(e,r,f).join("\n"),void 0!==s&&(i+="\n",i+="\n",i+=["\uD83E\uDD47 Personal Best!","\uD83E\uDD48 Personal 2nd Best!","\uD83E\uDD49 Personal 3rd Best!"][s-1]),i+="\n",a=window.location.hash,o="https://juxtastat.org".concat(""===a?"":"/".concat(a)),!(a.length>40))return[3,2];return u=window.location.href.substring(window.location.origin.length+1),[4,ea.G.POST("/shorten",{body:{full_text:u}})];case 1:if(void 0===(c=d.sent().data))throw Error("Error while shortening");o="https://s.urbanstats.org/s?c=".concat(c.shortened),d.label=2;case 2:return[2,[i,o]]}})},function(){var e=this,t=arguments;return new Promise(function(n,r){var i=d.apply(e,t);function a(e){eG(i,n,r,a,o,"next",e)}function o(e){eG(i,n,r,a,o,"throw",e)}a(void 0)})})()}})}function e3(e){var t,n=e.quiz,a=(0,l.cI)(),o=eJ((0,r.useState)(0),2)[1];(0,r.useEffect)(function(){var e=setInterval(function(){o(function(e){return e+1})},1e3);return function(){clearInterval(e)}});var u={width:"juxtastat"===n.kind?"5em":"6.5em",margin:0,backgroundColor:a.hueColors.blue,textAlign:"center",fontSize:"2em",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",padding:"0.25em 0.25em",borderRadius:"0.25em",border:"none",color:a.buttonTextWhite},c=(0,r.useContext)(i.C.Context);return t=0>(0,eo.msRemaining)(n)&&"quiz"===c.currentDescriptor.kind?r.createElement("a",eY(e$({},c.link({kind:"quiz",mode:"retrostat"===n.kind?"retro":void 0,date:void 0!==c.currentDescriptor.date?c.currentDescriptor.date+1:void 0},{scroll:{kind:"position",top:0}})),{style:{textDecoration:"none"}}),r.createElement("div",{className:"serif",style:eY(e$({},u),{width:void 0,padding:"0.25em 1em"})},"Next Quiz")):r.createElement(r.Fragment,null,r.createElement("div",{className:"serif quiz_summary",style:{margin:"auto 0"}},"Next quiz in "),r.createElement("div",{className:"serif",style:u},r.createElement("span",null,(0,eo.renderTimeRemaining)(n)))),r.createElement("div",{style:{margin:"auto"},id:"quiz-timer"},r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"flex-center",flexWrap:"wrap",gap:"1em"}},t))}function e6(e,t){var n,r,i,a,o,l;switch(t){case"juxtastat":case"retrostat":case"custom":return a=(r=e.length)-(i=e.reduce(function(e,t){return e+ +!!t},0)),[0===i?"Impressively Bad Job! \uD83E\uDD37":0===a?"Perfect! \uD83D\uDD25":1===i?"No! No!! \uD83D\uDE20":1===a?"Excellent! \uD83D\uDE0A":2===a?"Good! \uD83D\uDE43":"Better luck next time! \uD83E\uDEE4","".concat(i,"/").concat(r)];case"infinite":return o=e.reduce(function(e,t){return e+ +!!t},0),l="".concat(o,"/∞"),o<10?["You can do better! \uD83E\uDD37",l]:o<20?["Not bad! \uD83E\uDEE4",l]:o<30?["Good job! \uD83D\uDE43",l]:o<40?["Great! \uD83D\uDE0A",l]:["Amazing! \uD83D\uDD25",l]}}function e4(e){var t=eJ((0,u.yu)("juxtastatCompactEmoji"),1)[0],n=(0,l.Rv)(),i=eJ(e6(e.correctPattern,e.quizKind),2),a=i[0],o=i[1],c="".concat(a," ").concat(o);return r.createElement("div",null,r.createElement("span",{className:"serif quiz_summary",id:"quiz-result-summary-words"},c),r.createElement("div",{id:"quiz-result-summary-emoji"},tr(n,e.correctPattern,t).map(function(e,t){return r.createElement("div",{className:"serif quiz_summary",key:t},e)})))}function e8(e){switch(e.question.kind){case"juxtastat":return r.createElement(te,eY(e$({},e),{question:e.question}));case"retrostat":return r.createElement(tt,eY(e$({},e),{question:e.question}))}}function e7(e){var t=(0,l.cI)(),n=(0,l.Rv)(),i=(0,O.aCorrect)(e.question)?r.createElement("span",null,">"):r.createElement("span",null,"<"),a={},o={};"A"===e.choice?a={backgroundColor:t.selectedButton,color:t.selectedButtonText}:o={backgroundColor:t.selectedButton,color:t.selectedButtonText};var u=e.correct?n.correctEmoji:n.incorrectEmoji;return r.createElement("div",{key:e.index},e.getLabel(),r.createElement("table",{className:"stats_table",style:{width:"80%",marginLeft:"10%",marginRight:"10%",borderCollapse:"separate",borderSpacing:"0.1em",fontSize:"1.25em",backgroundColor:t.unselectedButton}},r.createElement("tbody",{style:{color:t.textMain}},r.createElement("tr",null,r.createElement("td",{className:"serif quiz_result_name_left",style:a},e.getOption("a")),r.createElement("td",{style:{fontWeight:400},className:"serif quiz_result_value_left"},e.getStat("a")),r.createElement("td",{className:"serif quiz_result_symbol quiz_result_comparison_symbol"},i),r.createElement("td",{style:{fontWeight:400},className:"serif quiz_result_value_right"},e.getStat("b")),r.createElement("td",{className:"serif quiz_result_name_right",style:o},e.getOption("b")),r.createElement("td",{className:"serif quiz_result_symbol"},u)))),r.createElement("div",{className:"gap_small"}))}function e9(e){var t=e.stat,n=e.statColumn;return r.createElement("span",null,r.createElement(et.$k,{statname:n,value:t,isUnit:!1}),r.createElement(et.$k,{statname:n,value:t,isUnit:!0}))}function te(e){return r.createElement(tn,{question:e.question},r.createElement(e7,eY(e$({},e),{getLabel:function(){return r.createElement("span",{className:"serif quiz_results_question"},e.question.stat_column)},getOption:function(t){return e.question["longname_".concat(t)]},getStat:function(t){return r.createElement(e9,{stat:e.question["stat_".concat(t)],statColumn:e.question.stat_column})}})))}function tt(e){return r.createElement(e7,eY(e$({},e),{getLabel:function(){return r.createElement("span",{className:"serif quiz_results_question"},"Juxtastat Users Who Got This Question Right %")},getOption:function(t){var n=e.question[t];return r.createElement(tn,{question:n},r.createElement("div",{style:{zoom:.5}},r.createElement("div",null,J(n.question)),r.createElement("div",{style:"a"===t?{marginLeft:"20%"}:{marginRight:"20%"}},r.createElement("div",null,n.longname_a," ",r.createElement(e9,{stat:n.stat_a,statColumn:n.stat_column})),r.createElement("div",null,n.longname_b," ",r.createElement(e9,{stat:n.stat_b,statColumn:n.stat_column})))))},getStat:function(t){return r.createElement(e9,{stat:e.question["".concat(t,"_ease")],statColumn:"%"})}}))}function tn(e){var t=e.question,n=e.children,a=(0,r.useContext)(i.C.Context),o=(0,r.useContext)(u.Zr.Context),c=(0,l.cI)();return r.createElement("a",eY(e$({},a.link({kind:"comparison",longnames:[t.longname_a,t.longname_b],s:(0,er.MM)(o,function(e){if(void 0!==e){var t=ei.MH.get(e);if(void 0!==t){var n=t.group.parent.id,r=t.year;return Object.fromEntries(eZ(ei.U1.map(function(e){return["show_stat_group_".concat(e.id),e.parent.id===n]})).concat(eZ(null!==r?ei.tg.map(function(e){return["show_stat_year_".concat(e),e===r]}):[])))}}}(t.stat_path))},{scroll:{kind:"position",top:0}})),{style:{textDecoration:"none",color:c.textMain}}),n)}function tr(e,t,n){if(n&&t.length>10)return function(e,t,n){var r=[[]],i=void 0,a=0,o=function(e,i){if(void 0!==e){var a=r[r.length-1];a.push(e?t:n),i>1&&a.push.apply(a,eZ(function e(t){if(t>=10)return eZ(e(Math.floor(t/10))).concat(eZ(e(t%10)));switch(t){case 0:return["0️⃣"];case 1:return["1️⃣"];case 2:return["2️⃣"];case 3:return["3️⃣"];case 4:return["4️⃣"];case 5:return["5️⃣"];case 6:return["6️⃣"];case 7:return["7️⃣"];case 8:return["8️⃣"];case 9:return["9️⃣"]}throw Error("unexpected count ".concat(t))}(i))),a.length>=10&&r.push([])}},l=!0,u=!1,c=void 0;try{for(var s,f=e.map(function(e){return!!e})[Symbol.iterator]();!(l=(s=f.next()).done);l=!0){var d=s.value;d===i?a+=1:(o(i,a),i=d,a=1)}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return o(i,a),r.map(function(e){return e.join("")})}(t,e.correctEmoji,e.incorrectEmoji);if(t.length>10){for(var r=[],i=0;i<t.length;i+=10)r.push(tr(e,t.slice(i,i+10),n)[0]);return r}return[t.map(function(t){return t?e.correctEmoji:e.incorrectEmoji}).join("")]}var ti=n(20110);function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function to(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(e){n(e);return}l.done?t(u):Promise.resolve(u).then(r,i)}function tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){tl(e,t,n[t])})}return e}function tc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||td(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tf(e){return function(e){if(Array.isArray(e))return ta(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||td(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function td(e,t){if(e){if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ta(e,t)}}function tm(e){return r.createElement(tp,{key:e.todaysQuiz.uniqueKey,quizDescriptor:e.quizDescriptor,todayName:e.todayName,todaysQuiz:e.todaysQuiz})}function tp(e){var t,n,i,a=(0,j.Kn)(),u=(0,l.cI)(),s=O.QuizModel.shared.history.use(),f=ts((0,r.useState)({}),2),d=f[0],m=f[1];switch(e.quizDescriptor.kind){case"juxtastat":case"retrostat":case"infinite":t=s,n=function(e){return O.QuizModel.shared.history.value=e};break;case"custom":t=d,n=function(e){m(e)}}var p=ts((0,r.useState)(!1),2),h=p[0],y=p[1],v=ts((0,r.useState)(!1),2),g=v[0],b=v[1],E=ts((0,r.useState)([]),2),A=E[0],w=E[1],z=x.AuthenticationStateMachine.shared.useState();if("signedOut"===z.state&&null!==z.email)return r.createElement(S,null);if("infinite"===e.quizDescriptor.kind&&!q.validQuizInfiniteVersions.includes(e.quizDescriptor.version))return r.createElement(c.P,null,r.createElement("div",null,r.createElement("div",{className:a},"Quiz version mismatch"),r.createElement("div",{style:{width:"50%",margin:"auto",backgroundColor:u.slightlyDifferentBackgroundFocused,padding:"1em",fontWeight:"bold"}},"Juxtastat generation has been updated, so infinite Juxtastat you are trying to access is no longer available."),r.createElement("div",{style:{height:"1.5em"}}),r.createElement(ty,null)));var C=null!=(i=t[e.quizDescriptor.name])?i:{choices:[],correct_pattern:[]},k=e.todaysQuiz.isDone((0,O.getCorrectPattern)(t,e.quizDescriptor.name)),_=(k?C.choices.length:C.choices.length+1)-A.length,D=h||g||_>0;!g&&_>0&&(b(!0),Promise.all(Array.from({length:_},function(t,n){return e.todaysQuiz.questionByIndex(A.length+n)})).then(function(e){b(!1),w(tf(A).concat(tf(e.filter(function(e){return void 0!==e}))))}).catch(function(e){ti.error("Error fetching questions",e)}));var I=function(r){var i=tc(tu({},t),tl({},e.quizDescriptor.name,r));y(!0),n(i)},P=function(e){if(!D){var t=A[C.correct_pattern.length];C.choices.push(e),C.correct_pattern.push("A"===e===(0,O.aCorrect)(t)),I(C),setTimeout(function(){y(!1)},500)}};return r.createElement(c.P,null,function(){var n,i=e.todaysQuiz,l=C.choices.length;if(D&&(l-=1),!D&&k)return r.createElement(e0,{quiz:A,wholeHistory:t,history:C,todayName:e.todayName,quizDescriptor:e.quizDescriptor});if(l<0||l>=A.length){var u=l<0?"Loading quiz...":"Loading results...";return r.createElement("div",null,r.createElement("input",{type:"hidden","data-test-loading-quiz":!0}),r.createElement("div",{className:a},u),r.createElement(o.WU,null))}return r.createElement(L,{quiz:e.quizDescriptor,question:A[l],history:C,length:null!=(n=i.length)?n:C.choices.length,onSelect:P,waiting:D,nested:!1,noHeader:!1,noFooter:!1})}())}function th(){var e=(0,l.cI)(),t=(0,r.useContext)(i.C.Context);return r.createElement("a",tu({style:tc(tu({},(0,X.j)(e.hueColors.blue,e.buttonTextWhite)),{width:"30%",textDecoration:"none"})},t.link({kind:"quiz",mode:"infinite"},{scroll:{kind:"position",top:0}})),"Random Juxtastat Infinite")}function ty(){var e=(0,l.cI)(),t=(0,r.useContext)(i.C.Context),n=t.usePageState().current,o="quiz"===n.descriptor.kind?n.descriptor.mode:"notAQuiz",c=(0,r.useMemo)(function(){return[{kind:"quiz",mode:void 0},{kind:"quiz",mode:"retro"},{kind:"quiz",mode:"infinite"}].filter(function(e){return e.mode!==o})},[o]),s=ts((0,r.useState)([]),2),f=s[0],d=s[1];(0,r.useEffect)(function(){var e,t=!1;return(e=function(){var e;return function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){var c=[l,u];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,Promise.all(c.map(function(e){return(0,a.X_)(e,u.Zr.shared)}))];case 1:return e=n.sent(),t||d(e.filter(function(e){return"infinite"===e.newPageDescriptor.mode||!e.pageData.quiz.isDone((0,O.getCorrectPattern)(O.QuizModel.shared.history.value,e.pageData.quizDescriptor.name))})),[2]}})},function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){to(a,r,i,o,l,"next",e)}function l(e){to(a,r,i,o,l,"throw",e)}o(void 0)})})(),function(){t=!0}},[c]);var m=tc(tu({},(0,X.j)(e.hueColors.blue,e.buttonTextWhite)),{width:"30%",textDecoration:"none"});return 0===f.length?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"gap"}),r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"flex-center",flexWrap:"wrap",gap:"1em"}},f.map(function(e){return r.createElement("a",tu({key:e.pageData.quizDescriptor.kind,style:m},t.link(e.newPageDescriptor,{scroll:{kind:"position",top:0}})),"Play"," ",(0,O.nameOfQuizKind)(e.pageData.quizDescriptor.kind))})))}},20758:function(e,t,n){"use strict";n.r(t),n.d(t,{getDailyOffsetNumber:()=>u,getRetrostatOffsetNumber:()=>c,msRemaining:()=>p,renderTimeRemaining:()=>h});var r,i=new Date(2023,8,2),a=0,o=parseInt(null!=(r=localStorage.getItem("debug_quiz_transition"))?r:"0");if(o>0){var l=new Date;l.setHours(0,0,0,0),a=l.valueOf()+864e5-o-Date.now()}function u(){var e=new Date(Date.now()+a);e.setHours(0,0,0,0);var t=(e.valueOf()-i.valueOf())/864e5;return Math.round(t)}function c(){return Math.floor((u()-1)/7)-11}function s(e){var t=new Date(i);return t.setDate(t.getDate()+e),t}function f(e){var t;return(t=s(e)).setDate(t.getDate()+1),t.valueOf()-Date.now()-a}function d(e){var t;return(t=function(e){if(!e.startsWith("W"))throw Error("week_id must start with W");return s((parseInt(e.slice(1))+11)*7+1)}(e)).setDate(t.getDate()+7),t.valueOf()-Date.now()}function m(e){var t=Math.floor(e/1e3),n=Math.floor(t/60),r=Math.floor(n/60),i=(t%60).toString().padStart(2,"0"),a=(n%60).toString().padStart(2,"0"),o=(r%24).toString().padStart(2,"0");return"".concat(o,":").concat(a,":").concat(i)}function p(e){var t=e.kind,n=e.name;switch(t){case"juxtastat":return f(n);case"retrostat":return d(n)}}function h(e){var t,n,r,i=e.kind,a=e.name;switch(i){case"juxtastat":return m(f(a));case"retrostat":return n=Math.floor((t=d(a))/864e5),r=m(t%864e5),"".concat(n,"d ").concat(r)}}},89533:function(e,t,n){"use strict";n.r(t),n.d(t,{addFriend:()=>d,addFriendFromLink:()=>function e(t,n){return u(function(){var r,i;return f(this,function(a){switch(a.label){case 0:return[4,d(t,n)];case 1:if(void 0!==(r=a.sent()))return[3,2];return alert("Friend added: ".concat(n," !")),[3,6];case 2:if("friendName"!==r.problemDomain)return[3,5];if(null===(i=prompt("Could not add friend: ".concat(r.errorMessage,"\n\nPlease correct the friend name:"),n)))return[3,4];return[4,e(t,i.trim())];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:alert("Could not add friend: ".concat(r.errorMessage)),a.label=6;case 6:return[2]}})})()}});var r=n(4334),i=n(62473),a=n(72447);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(e){n(e);return}l.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,u,"next",e)}function u(e){l(a,r,i,o,u,"throw",e)}o(void 0)})}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}function f(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){var c=[l,u];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function d(e,t){return u(function(){var n,l,u,d,m,p,h;return f(this,function(f){switch(f.label){case 0:if(n=a.QuizModel.shared.uniquePersistentId.value,l=i.AuthenticationStateMachine.shared.state.email,u="Friend ID or Email",""===e)return[2,{errorMessage:"".concat(u," cannot be empty"),problemDomain:"friendID"}];if(e===n)return[2,{errorMessage:"Friend ID cannot be your own ID",problemDomain:"friendID"}];if(e===l)return[2,{errorMessage:"Friend Email cannot be your own Email",problemDomain:"friendID"}];if(d=a.QuizModel.shared.friends.value.find(function(t){var n=c(t,2),r=n[0],i=n[1];return null!==r&&i===e}))return[2,{errorMessage:"".concat(u," ").concat(e," already exists as ").concat(d[0]),problemDomain:"friendID"}];if(""===t)return[2,{errorMessage:"Friend name cannot be empty",problemDomain:"friendName"}];if(a.QuizModel.shared.friends.value.map(function(e){return e[0]}).includes(t))return[2,{errorMessage:"Friend name already exists",problemDomain:"friendName"}];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r.G.POST("/juxtastat/friend_request",{body:{requestee:e},params:{header:a.QuizModel.shared.userHeaders()}})];case 2:var y;if(p=(m=f.sent()).response,h=m.error,422===p.status)return[2,{errorMessage:"Invalid ".concat(u),problemDomain:"friendID"}];if(void 0!==h)return[2,{errorMessage:"Unknown Error",problemDomain:"other"}];return a.QuizModel.shared.friends.value=((function(e){if(Array.isArray(e))return o(e)})(y=a.QuizModel.shared.friends.value.filter(function(t){return c(t,2)[1]!==e}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||s(y)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([[t,e,Date.now()]]),[2,void 0];case 3:return f.sent(),[2,{errorMessage:"Network Error",problemDomain:"other"}];case 4:return[2]}})})()}}}]);
//# sourceMappingURL=327.js.map