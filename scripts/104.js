"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([["104"],{78773:function(e,t,n){n.d(t,{Q:()=>s});var r=n(72668),a=n(69610),o=n(27281),i=n(82074),l=n(65547);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){var e=(0,l.Lm)(),t=(0,i.E0)(),n=(0,i.ky)(),a=(0,i.e5)(),c=(0,i.z0)(),s=(0,o.rV)((0,i.fX)()),d=c.filter(function(e){var t=e.category;return e.checkboxSpecs.every(function(e){var n=e.name;return!e.forcedOn&&!s[(0,o.sm)({category:t,name:n})]})});if(e)return null;var y=0===t.length?[r.createElement("b",{key:"noneSelected"},"No Statistic Categories are selected")]:u(n.map(function(e){return r.createElement(r.Fragment,null,"To see"," ",r.createElement("b",null,r.createElement(f,{groupOrCategory:e}))," statistics, select ",r.createElement(p,{years:a.filter(function(t){return e.years.has(t)})}),".")})).concat(u(d.map(function(e){var t=e.category;return r.createElement(r.Fragment,null,"All statistics from the"," ",r.createElement("b",null,(0,o.NI)(t))," ","are disabled.")})));return 0===y.length?null:r.createElement(m,{warnings:y})}function m(e){var t=e.warnings,n=(0,a.cI)();return r.createElement("div",{style:{backgroundColor:n.slightlyDifferentBackgroundFocused,borderRadius:"5px"},"data-test-id":"article-warnings"},r.createElement("ul",{style:{paddingTop:"1em",paddingBottom:"1em"}},t.map(function(e,t){return r.createElement("li",{key:t},e)})))}function f(e){var t=e.groupOrCategory;switch(t.kind){case"Group":return"".concat(t.parent.name," > ").concat(t.name);case"Category":return t.name}}function p(e){var t=e.years;switch(t.length){case 0:return null;case 1:return r.createElement("b",null,t[0]);case 2:return r.createElement(r.Fragment,null,r.createElement("b",null,t[0])," or ",r.createElement("b",null,t[1]));case 3:return r.createElement(r.Fragment,null,r.createElement("b",null,t[0]),", ",r.createElement("b",null,t[1]),", or ",r.createElement("b",null,t[2]));default:return r.createElement(r.Fragment,null,r.createElement("b",null,t[0]),", ",r.createElement(p,{years:t.slice(1)}))}}},71008:function(e,t,n){n.r(t),n.d(t,{computeNameSpecsWithGroups:()=>ee,ArticlePanel:()=>J,StatisticHeader:()=>en}),n(71540),n(50457);var r=n(72668),a=n(6381),o=n(45437),i=n(69610),l=n(27281),c=n(82074),u=n(15498),s=n(72547),m=n(22712),f=n(36195),p=n(45844);n(17702);var d=n(41623),y=n(13736),v=n(56033),g=n(48358),h=n(6135);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}function S(e){var t,n,a,o,c,u,s,m,f=(m=(0,r.useState)(null),function(e){if(Array.isArray(e))return e}(m)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(m,2)||E(m,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=f[0],S=f[1],x=(n=(t=e).articleType,a=t.related,o=t.longname,c=(0,l.rV)(["show_historical_cds","show_person_circles"]),u=(0,l.rV)((0,l.iN)(n)),s=(0,i.cI)(),(0,r.useMemo)(function(){var e=function(e){return a.filter(function(t){return t.relationshipType===e}).map(function(e){return e.buttons})[0]},t=w(e("contained_by")).concat(w(e("intersects")),w(e("borders")),w(e("contains")),w(e("same_geography"))),r=function(){for(var e=[],r=t.length-1;r>=0;r--)if((0,g.s)(t[r].rowType,c)&&u[(0,l.ZO)(n,t[r].rowType)]){var a=(0,y.p)(t[r].longname);e.push({name:t[r].longname,color:a,weight:1,fillColor:a,fillOpacity:.1})}return e}(),i=s.hueColors.blue;return(0,h.zo)([{name:o,fillOpacity:.5,weight:1,color:i,fillColor:i,clickable:!1}].concat(w(r)))},[n,s.hueColors.blue,o,a,u,c])).use(),k=(0,r.useMemo)(function(){return x.filter(v.gh)},[x]);(0,h.OU)(b,x);var O=x.length>0&&x[0]===v.Vp;return r.createElement("div",{style:{position:"relative"}},r.createElement(d._h,{loading:O}),r.createElement(h.yq,{ref:S},r.createElement(h.uy,{features:k,clickable:!0}),r.createElement(p.ot,{position:"top-left"})))}var x=n(78773);let k=[{index:2,site:"Wikidata",link_prefix:"https://www.wikidata.org/wiki/",normalizer:null},{index:3,site:"Wikipedia",link_prefix:"https://en.wikipedia.org/wiki/",normalizer:"wikipedia"}];var O=n(77053);function P(e){var t=k.flatMap(function(t){var n=e.metadataProtos.find(function(e){return e.metadataIndex===t.index});return void 0===n?[]:[r.createElement(C,{key:t.index,meta:t,metaProto:n})]});return r.createElement(r.Fragment,null,t)}function C(e){var t=(0,i.cI)(),n=e.metaProto.stringValue;return(0,O.h)(null!=n,"ExternalLink: stringValue is undefined for metadata index ".concat(e.meta.index)),r.createElement("a",{href:e.meta.link_prefix+function(e,t){switch(e){case null:return t;case"wikipedia":return t.replace(/ /g,"_")}}(e.meta.normalizer,n)},r.createElement("img",{style:{height:"36px",marginRight:"8px",verticalAlign:"middle"},src:function(e,t){switch(e){case"Wikipedia":return"/wikipedia.svg";case"Wikidata":return t.wikidataURL}}(e.meta.site,t)}))}var I=n(6735),A=n(83619),j=n(45988);let T=[["International","red"],["International City","red"],["US Subdivision","blue"],["US City","blue"],["Census","cyan"],["Political","purple"],["Oddball","darkGrey"],["Kavi","brown"],["School","yellow"],["Small","pink"],["Native","green"]];var N=n(69417),R=n(32785),_=n(79074),D=n(59070),M=n(94366);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){var n,r=(0,i.cI)(),a=R.Z[e],o=(n=r.hueColors,Object.fromEntries(T.map(function(e){var t=L(e,2);return[t[0],n[t[1]]]})))[a];return(0,y.bt)(o,(r.mixPct+(100-r.mixPct)*(1-t))/100,r.background)}function B(e){var t=(0,m.jg)(),n=(0,i.cI)(),o=(0,r.useContext)(a.C.Context);return r.createElement("li",{style:{display:"flex",margin:"".concat(2,"px")}},r.createElement("a",W({className:"serif",style:{color:n.textMain,backgroundColor:z(e.region.rowType,1),textDecoration:"none",padding:"2px 6px 2px 6px",borderRadius:"5px",fontWeight:400,fontSize:(0,f.wd)()?"12pt":"8pt"}},o.link({kind:"article",longname:e.region.longname,universe:t},{scroll:{kind:"position",top:0}})),e.region.shortname))}function H(e){return r.createElement("div",{className:"serif",style:{fontSize:(0,f.wd)()?"12pt":"10pt",fontWeight:e.fontWeight,alignContent:"center",margin:"".concat(2,"px")}},r.createElement("label",{htmlFor:e.checkId},e.children))}function U(e){var t,n=z(e.buttonType,e.groupIndex%2==0?.3:.4);return r.createElement("ul",{style:W({display:"flex",flexFlow:"row wrap",paddingInlineStart:"0px",listStyleType:"none",padding:"".concat(2,"px"),paddingLeft:"".concat(2,"px")},e.numGroups>1?{backgroundColor:n,borderRadius:0===e.groupIndex?"5px 5px 0 0":e.groupIndex===e.numGroups-1?"0 0 5px 5px":void 0,paddingLeft:"".concat(4,"px")}:{})},r.createElement(H,{checkId:e.checkId,fontWeight:400},e.relationshipType.replaceAll("_"," ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})),e.regions.map(function(e,t){return r.createElement(B,{key:t,region:e})}))}function F(e){var t=(0,l.ZO)(e.articleType,e.buttonType),n=(0,r.useId)(),a=(0,m.jg)();return r.createElement("li",{style:{paddingInlineStart:"0px",listStyleType:"none",margin:0,width:"100%",display:"flex",alignItems:"center",position:"relative",backgroundColor:z(e.buttonType,e.rowIndex%2==0?.1:.2),borderRadius:0===e.rowIndex?"5px 5px 0 0":e.rowIndex===e.totalRows-1?"0 0 5px 5px":void 0}},r.createElement("div",{style:{display:"flex",width:"".concat(20,"%"),alignItems:"center"}},r.createElement(M.tG,{name:"",settingKey:t,classNameToUse:"related_checkbox",id:n}),r.createElement(H,{checkId:n,fontWeight:500},(0,D.v)(a,e.buttonType))),r.createElement("ul",{style:{paddingInlineStart:"0px",listStyleType:"none",margin:0,width:"".concat(80,"%"),display:"flex",flexDirection:"column",padding:e.regions.size>1?"".concat(4,"px"):"0 0 0 ".concat(6,"px")}},Array.from(e.regions).map(function(t,a){var o=L(t,2),i=o[0],l=o[1];return r.createElement(U,{key:i,regions:l,checkId:n,relationshipType:i,groupIndex:a,buttonType:e.buttonType,numGroups:e.regions.size})})))}function G(e){var t=(0,l.rV)(["show_historical_cds","show_person_circles"]),n=new _.G(function(){return new _.G(function(){return[]})}),a=!0,o=!1,i=void 0;try{for(var c,u=e.related[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value,m=!0,f=!1,p=void 0;try{for(var d,y=s.buttons[Symbol.iterator]();!(m=(d=y.next()).done);m=!0){var v=d.value;n.get(v.rowType).get(s.relationshipType).push(v)}}catch(e){f=!0,p=e}finally{try{m||null==y.return||y.return()}finally{if(f)throw p}}}}catch(e){o=!0,i=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw i}}var h=Array.from(n.keys()).sort(function(e,t){return N.Z[e]-N.Z[t]}).filter(function(e){return(0,g.s)(e,t)}),b=h.map(function(t,a){return r.createElement(F,{key:t,buttonType:t,regions:n.get(t),articleType:e.articleType,rowIndex:a,totalRows:h.length})});return r.createElement("ul",{style:{margin:"1em 0",paddingInlineStart:"0px",listStyleType:"none"}},b)}var Z=n(65547),q=n(65899),$=n(13499);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function Y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){var t=e.article,n=e.rows,a=(0,r.useRef)(null),i=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,f.Kn)(),p=(0,f.q0)(),d=(0,f.Pf)("right"),y=n((0,l.rV)((0,c.fX)()))[0],v=(0,j.xE)([t],[y],!0),g="".concat((0,o.Nw)(t.longname),".csv");return r.createElement(r.Fragment,null,r.createElement(I.Gp,null),r.createElement(s.P,{screencap:function(e,n){return(0,Z.Y2)({path:"".concat((0,o.Nw)(t.longname),".png"),overallWidth:2*i.current.offsetWidth,elementsToRender:[a.current,i.current,u.current]},e,n)},csvExportData:{csvData:v,csvFilename:g},hasUniverseSelector:!0,universes:t.universes},r.createElement("div",null,r.createElement("div",{ref:a},r.createElement("div",{className:m},t.shortname),r.createElement("div",{className:p},t.longname)),r.createElement("div",{style:{marginBlockEnd:"16px"}}),r.createElement("div",{ref:i},r.createElement(et,{filteredRows:y,article:t})),r.createElement("p",null),r.createElement("div",{ref:u},r.createElement(S,{longname:t.longname,related:t.related,articleType:t.articleType})),r.createElement("div",{style:{marginBlockEnd:"1em"}}),r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{flex:"0 0 auto",marginRight:"1em"}},r.createElement(P,{metadataProtos:t.metadata})),r.createElement("div",{style:{flex:"0 0 auto",marginRight:"1em"}},r.createElement("div",{className:"serif",style:d},"Compare to: ")),r.createElement("div",{style:{flex:"1 1 auto"}},r.createElement(er,{longname:t.longname,type:t.articleType}))),r.createElement(G,{related:t.related,articleType:t.articleType}))))}function ee(e){var t=[],n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value,s=Q(function(e,t){if(void 0===e.row)return[void 0,e.renderedStatname];var n,r,a=u.MH.get(e.row.statpath),o=t.filter(function(e){var t;return void 0!==e.row&&(null==(t=u.MH.get(e.row.statpath))?void 0:t.group.id)===(null==a?void 0:a.group.id)}),i=o.length,l=new Set(o.map(function(e){var t;return null==(t=u.MH.get(e.row.statpath))?void 0:t.source}).filter(function(e){return null!==e}).map(function(e){return e.name})).size>1,c=null==a||null==(n=a.source)?void 0:n.name,s=i>1&&null!=(r=null==a?void 0:a.indentedName)?r:e.renderedStatname;return l&&c&&(s="".concat(s," [").concat(c,"]")),[i>1?null==a?void 0:a.group.name:void 0,s]}(c,e),2),m=s[0],f=s[1];t.push(Y(K({},c),{isIndented:void 0!==m,displayName:f})),n.push(m)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return{updatedNameSpecs:t,groupNames:n}}function et(e){var t,n,o,c=(0,i.cI)(),u=(0,l.rV)(e.filteredRows.map(function(e){return(0,l.Vv)(e.statpath)})),s=e.filteredRows.map(function(e){return u[(0,l.Vv)(e.statpath)]}),p=(0,m.jg)(),d=Q((0,l.yu)("simple_ordinals"),1)[0],y=(0,r.useContext)(a.C.Context),v=(t=Q((0,l.yu)("simple_ordinals"),1)[0],n=(0,f.wd)(),{widthLeftHeader:o=31/(25+(t?15:42)+8*((0,Z.Lm)()?0:!t&&n?1:2)+31)*100,columnWidth:100-o}),g=v.widthLeftHeader,h=v.columnWidth,b=ee(e.filteredRows.map(function(t){return{type:"statistic-name",longname:e.article.longname,row:t,renderedStatname:t.renderedStatname,currentUniverse:p}})),w=b.updatedNameSpecs,E=b.groupNames,S=["statval","statval_unit","statistic_percentile","statistic_ordinal","pointer_in_class","pointer_overall"],k=e.filteredRows.map(function(t){return[{type:"statistic-row",longname:e.article.longname,row:t,onNavigate:function(e){y.navigate({kind:"article",longname:e,universe:p},{history:"push",scroll:{kind:"none"}})},simpleOrdinals:d,onlyColumns:S}]}),O=s.map(function(t,n){return t?{statDescription:e.filteredRows[n].renderedStatname,plotProps:(0,A.pullRelevantPlotProps)(e.filteredRows,n,c.hueColors.blue,e.article.shortname,e.article.longname,e.article.articleType)}:void 0});return r.createElement("div",{className:"stats_table"},r.createElement($.C4,{leftHeaderSpec:{leftHeaderSpecs:w,groupNames:E},rowSpecs:k,horizontalPlotSpecs:O,verticalPlotSpecs:[],topLeftSpec:{type:"top-left-header"},widthLeftHeader:g,columnWidth:h,onlyColumns:S,simpleOrdinals:d}),r.createElement(x.Q,null))}function en(e){return r.createElement("div",{style:{width:"100%",padding:"1px"}},r.createElement("span",{className:"serif value"},r.createElement("span",null,e.groupName)))}function er(e){var t=e.longname,n=e.type,o=(0,m.jg)(),i=(0,r.useContext)(a.C.Context);return r.createElement(q.R,{style:Y(K({},(0,f.Pf)()),{width:"100%"}),placeholder:"Other region...",link:function(e){return i.link({kind:"comparison",universe:o,longnames:[t,e]},{scroll:{kind:"position",top:0}})},autoFocus:!1,prioritizeArticleType:n})}},83619:function(e,t,n){n.r(t),n.d(t,{ComparisonPanel:()=>M,pullRelevantPlotProps:()=>V,ComparisonMapButtons:()=>z}),n(71540),n(50457);var r=n(5648),a=n(30018),o=n(72668),i=n(45844),l=n(15638),c=n(6381),u=n(45437),s=n(69610),m=n(27281),f=n(82074),p=n(15498),d=n(72547),y=n(22712),v=n(13736),g=n(77053),h=n(56033),b=n(36195),w=n(11625),E=n(42111),S=n(78773),x=n(6735),k=n(71008),O=n(45988),P=n(6135),C=n(65547),I=n(65899),A=n(13499);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function N(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||D(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}}function M(e){var t,n,i,l,p=(0,s.cI)(),g=(0,o.useRef)(null),h=(0,o.useRef)(null),E=R((0,o.useState)(null),2),P=E[0],j=E[1],D=R((0,o.useState)({value:e.articles,propsValue:e.articles}),2),M=D[0],L=D[1],z=R((0,o.useState)(null),2),B=z[0],H=z[1],U=R((0,o.useState)("down"),2),F=U[0],G=U[1],Z=(0,r.Dy)((0,r.VT)(r.we,{activationConstraint:{distance:1}}),(0,r.VT)(r.LO,{activationConstraint:{delay:50,tolerance:0}}));M.propsValue===e.articles?i=M.value:(L({propsValue:e.articles,value:e.articles}),i=e.articles);var q=i.map(function(e){return e.shortname}).join(" vs "),$=i.map(function(e){return e.longname}),X=(0,m.rV)((0,f.fX)()),K=e.rows(X),Y=K[0].map(function(e,t){return K.map(function(e){return e[t]})}),Q=function(t){B===t?n="up"===F?"down":"up":(n="down",H(t)),G(n);var n,r=Y[t].map(function(e,t){return{row:e,index:t}}).sort(function(e,t){var r,a,o;return r=e.row,a=t.row,o=n,isNaN(r.statval)||isNaN(a.statval)?isNaN(r.statval)?1:isNaN(a.statval)?-1:"up"===o?r.renderedStatname.localeCompare(a.renderedStatname):a.renderedStatname.localeCompare(r.renderedStatname):"up"===o?r.statval-a.statval:a.statval-r.statval}).map(function(e){return e.index}).map(function(e){return i[e]});L({propsValue:e.articles,value:r}),eh.navigate({kind:"comparison",universe:eh.universe,longnames:r.map(function(e){return e.longname})},{history:"push",scroll:{kind:"none"}})},J=(0,b.wd)(),ee=Y.map(function(e){return e.every(function(e){return"heterogenous-sources"!==e.disclaimer})}),et=i.every(function(e){return e.articleType===i[0].articleType})&&(0===ee.length||ee.some(function(e){return e})),en=et?["statval","statval_unit","statistic_ordinal","statistic_percentile"]:["statval","statval_unit"],er=J?3:6,ea=(0,m.rV)(Y.filter(function(e){return e.some(function(e){return void 0!==e.extraStat})}).map(function(e){var t=R(e,1)[0].statpath;return(0,m.Vv)(t)})),eo=Y.map(function(e){var t,n=R(e,1)[0].statpath;return null!=(t=ea[(0,m.Vv)(n)])&&t}),ei=eo.filter(function(e){return e}).length,el=(et?1.5:1)*i.length+1,ec=(et?1.5:1)*(K[0].length+ei)+1.5,eu=el>er&&el>ec;eu&&(el=(l=[ec,el])[0],ec=l[1]);var es=eu?.24:.18,em=100*(1-es)/((eu?K[0].length:i.length)+(eu?ei:0)),ef=Y.map(function(e){return e.map(function(e){return e.statval}).reduce(function(e,t,n,r){return isNaN(t)?e:void 0===e||t>r[e]?n:e},void 0)}),ep=(0,b.Kn)(),ed=(0,b.q0)(),ey=(0,b.Pf)("right"),ev=(0,b.Pf)(),eg=(0,y.jg)(),eh=(0,o.useContext)(c.C.Context),eb=i.every(function(e){return e.articleType===i[0].articleType})?i[0].articleType:void 0,ew=function(e){var t;return null!=(t=Y[e].find(function(e){return void 0!==e.extraStat}))?t:Y[e][0]},eE=Array.from({length:i.length}).map(function(e,t){return{type:"comparison-longname",articleIndex:t,articles:i,names:$,transpose:eu,sharedTypeOfAllArticles:eb,highlightIndex:t,draggable:!0,articleId:i[t].shortname}}),eS=Array.from({length:Y.length}).map(function(e,t){var n=ew(t);return{type:"statistic-name",row:n,renderedStatname:n.renderedStatname,longname:$[0],currentUniverse:eg,center:!!eu,transpose:eu,highlightIndex:ef[t],sortInfo:{onSort:function(){Q(t)},sortDirection:B===t?F:"both"}}}),ex=(0,k.computeNameSpecsWithGroups)(eS),ek=ex.updatedNameSpecs,eO=ex.groupNames,eP=Array.from({length:Y.length}).map(function(e,t){return Array.from({length:i.length}).map(function(e,n){return{type:"statistic-row",row:K[n][t],longname:$[n],onlyColumns:en,blankColumns:ee[t]?[]:["statistic_ordinal","statistic_percentile"],simpleOrdinals:!0,statisticStyle:ef[t]===n?{backgroundColor:(0,v.bt)((0,s.wb)(p.hueColors,n),p.mixPct/100,p.background)}:{},onNavigate:function(e){eh.navigate({kind:"comparison",universe:eh.universe,longnames:$.map(function(t,r){return r===n?e:t})},{history:"push",scroll:{kind:"none"}})}}})}),eC=0===eP.length?[]:eP[0].map(function(e,t){return eP.map(function(e){return e[t]})}),eI=Array.from({length:Y.length}).map(function(e,t){return eo[t]?{statDescription:Y[t][0].renderedStatname,plotProps:Y[t].flatMap(function(e,n){return V(K[n],t,(0,s.wb)(p.hueColors,n),i[n].shortname,i[n].longname,eb)})}:void 0}),eA={type:"comparison-top-left-header",statNameOverride:eu?"Region":void 0},ej=(0,O.xE)(i,K,et),eT="".concat((0,u.Nw)(q),".csv");return o.createElement(w.v.Provider,{value:eu},o.createElement(x.Gp,null),o.createElement(d.P,{screencap:function(e){return(0,C.Y2)({path:"".concat((0,u.Nw)(q),".png"),overallWidth:2*g.current.offsetWidth,elementsToRender:[g.current,h.current]},e,p)},csvExportData:{csvData:ej,csvFilename:eT},hasUniverseSelector:!0,universes:e.universes},o.createElement(r.LB,{sensors:Z,onDragStart:function(e){j(e.active.id)},onDragEnd:function(t){var n=t.active,r=t.over;if(r&&n.id!==r.id){var o=i.findIndex(function(e){return e.shortname===n.id}),l=i.findIndex(function(e){return e.shortname===r.id}),c=(0,a.Rp)(i,o,l),u=c.map(function(e){return e.longname});L({propsValue:e.articles,value:c}),eh.navigate({kind:"comparison",universe:eh.universe,longnames:u},{history:"push",scroll:{kind:"none"}})}j(null)},collisionDetection:r.pE},o.createElement(a.Fo,{items:i.map(function(e){return e.shortname}),strategy:eu?a.qw:a.PG},o.createElement("div",null,o.createElement("div",{className:ep},"Comparison"),o.createElement("div",{className:ed},q),o.createElement("div",{style:{marginBlockEnd:"16px"}}),o.createElement("div",{style:{display:"flex"}},o.createElement("div",{style:{width:"".concat(100*es,"%")}}),o.createElement("div",{style:{width:"".concat(50*(1-es),"%"),marginRight:"1em"}},o.createElement("div",{className:"serif",style:ey},"Add another region:")),o.createElement("div",{style:{width:"".concat(50*(1-es),"%")}},o.createElement(I.R,{style:N(T({},ev),{width:"100%"}),placeholder:"Name",link:function(e){return eh.link({kind:"comparison",universe:eg,longnames:_($).concat([e])},{scroll:{kind:"none"}})},autoFocus:!1,prioritizeArticleType:eb}))),o.createElement("div",{style:{marginBlockEnd:"1em"}}),(t=o.createElement("div",{ref:g},eu?o.createElement(A.C4,{superHeaderSpec:{headerSpecs:ek,showBottomBar:!1,groupNames:eO},leftHeaderSpec:{leftHeaderSpecs:eE},rowSpecs:eC,horizontalPlotSpecs:eI.map(function(){}),verticalPlotSpecs:eI,topLeftSpec:eA,widthLeftHeader:100*es,columnWidth:em,onlyColumns:en,simpleOrdinals:!0}):o.createElement(A.C4,{superHeaderSpec:{headerSpecs:eE,showBottomBar:!0},leftHeaderSpec:{leftHeaderSpecs:ek,groupNames:eO},rowSpecs:eP,horizontalPlotSpecs:eI,verticalPlotSpecs:[],topLeftSpec:eA,widthLeftHeader:100*es,columnWidth:em,onlyColumns:en,simpleOrdinals:!0}),o.createElement(S.Q,null)),el>er?o.createElement("div",{style:{overflowX:"scroll"}},o.createElement("div",{style:{width:"".concat(100*el/(J?3.5:5.3),"%")}},t)):t),o.createElement("div",{className:"gap"}),o.createElement("div",{ref:h},o.createElement(W,{longnames:i.map(function(e){return e.longname}),colors:i.map(function(e,t){return(0,s.wb)(p.hueColors,t)}),mapPartitions:e.mapPartitions})))),o.createElement(r.y9,null,P?o.createElement("div",{style:{opacity:.5,backgroundColor:p.background,padding:"8px",borderRadius:"4px"}},null==(n=i.find(function(e){return e.shortname===P}))?void 0:n.longname):null))))}function V(e,t,n,r,a,o){if(void 0===e[t].extraStat)return[];var i=e.map(function(e){return p.MH.get(e.statpath)}).map(function(e,t){return{sP:e,i:t}}),l=new Map;i.filter(function(n){var r=n.sP,a=n.i;return r.group.id===i[t].sP.group.id&&void 0!==e[a].extraStat}).forEach(function(e){var t,n=e.sP.year,r=e.i;(0,g.h)(null!==n,"Year should not be null for plot data"),l.set(n,_(null!=(t=l.get(n))?t:[]).concat([r]))});var c=Array.from(l.entries()).map(function(e){var n=R(e,2)[1];if(1===n.length)return n[0];var r=n.map(function(e){return i[e].sP.source}),a=r.findIndex(function(e){return JSON.stringify(e)===JSON.stringify(i[t].sP.source)});if(-1!==a)return n[a];var o=r.findIndex(function(e){return null===e});return -1!==o?n[o]:n[0]}).map(function(e){return i[e]});return c.length>1&&(c.forEach(function(e){var t=e.sP.year;(0,g.h)(null!==t,"Year should not be null for plot data")}),(0,g.h)(c.length===new Set(c.map(function(e){return e.sP.year})).size,"All statpaths for plot data should have unique years")),c.map(function(t){var i=t.i,l=t.sP.year;return(0,g.h)(null!==l,"unreachable, we checked this already"),N(T({},e[i]),{color:n,shortname:r,longname:a,sharedTypeOfAllArticles:o,subseriesName:l.toString()})})}function W(e){var t=(0,b.wd)();return(0,o.useMemo)(function(){var n=function(t,n){return e.mapPartitions.slice(t,n).map(function(e,n){return[t+n,e]})};if(t){for(var r=[],a=0;a<e.mapPartitions.length;a+=2)r.push(n(a,a+2));return r}for(var o=[],i=0;i<e.mapPartitions.length;i+=3)e.mapPartitions.length-i==4?(o.push(n(i,i+2),n(i+2,i+4)),i+=1):o.push(n(i,i+3));return o},[t,e.mapPartitions]).map(function(t,n){return o.createElement("div",{key:n,style:{display:"flex",width:"100%"}},t.map(function(n){var r=R(n,2),a=r[0],i=r[1];return o.createElement("div",{key:a,style:{position:"relative",width:"".concat(100/t.length,"%")}},o.createElement(L,{longnames:i.map(function(t){return e.longnames[t]}),colors:i.map(function(t){return e.colors[t]}),attribution:a===e.mapPartitions.length-1}))}))})}function L(e){var t=e.longnames,n=e.colors,r=e.attribution,a=R((0,o.useState)(null),2),l=a[0],c=a[1],u=(0,o.useMemo)(function(){return(0,P.zo)(t.map(function(e,t){return{name:e,color:n[t],fillColor:n[t],fillOpacity:.5,weight:1}}))},[t,n]).use(),s=(0,o.useMemo)(function(){return u.filter(h.gh)},[u]),m=(0,o.useId)();return(0,P.O0)(l,u,s),o.createElement("div",{style:{position:"relative"}},o.createElement(P.yq,{id:m,ref:c,attributionControl:!1},o.createElement(P.uy,{features:s,clickable:!0}),o.createElement(i.ot,{position:"top-left"}),r&&o.createElement(P.X3,{startShowingAttribution:!0})),o.createElement(z,{longnames:t,colors:n,features:u,mapRef:l}))}function z(e){var t=e.longnames,n=e.colors,r=e.features,a=e.mapRef,i=(0,s.cI)();if((0,C.Lm)())return null;var c=function(e){r[e]!==h.Vp&&(null==a||a.fitBounds((0,l.boundingBox)(r[e].geometry),{animate:!0,padding:P.Lg}))};return o.createElement("div",{style:{zIndex:E.W.comparisonMapButton,position:"absolute",right:0,top:0,padding:"12px"}},o.createElement("div",{style:{display:"flex",backgroundColor:i.background,padding:"6px",borderRadius:"6px",alignItems:"center"}},o.createElement("span",{className:"serif",style:{fontSize:"15px",fontWeight:500}},"Zoom to:"),o.createElement("div",{style:{width:"3px"}}),o.createElement(B,{color:i.textMain,onClick:function(){null==a||a.fitBounds((0,l.extendBoxes)(r.filter(h.gh).map(function(e){return(0,l.boundingBox)(e.geometry)})),{animate:!0,padding:P.Lg})}}),t.map(function(e,t){return o.createElement(B,{key:t,color:n[t],onClick:function(){c(t)}})})))}function B(e){var t=e.color,n=e.onClick;return o.createElement("div",{style:{display:"inline-block",width:"24px",height:"24px",backgroundColor:t,borderRadius:"50%",marginLeft:"5px",marginRight:"5px",cursor:"pointer"},onClick:n})}},89147:function(e,t,n){n.d(t,{Z:()=>i});var r=n(72668);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){var e;function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");o(this,"_value",void 0),o(this,"observers",new Set),o(this,"id",Math.random().toString(36).substring(2)),this._value=e}return e=[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.observers.forEach(function(e){e()})}},{key:"use",value:function(){var e,t=this,n=(e=(0,r.useState)(0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];return(0,r.useEffect)(function(){var e=function(){n(function(e){return e+1})};return t.observers.add(e),function(){t.observers.delete(e)}},[this]),this.value}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()}}]);
//# sourceMappingURL=104.js.map